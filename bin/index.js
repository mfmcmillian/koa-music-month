"use strict";var ad=Object.create;var pr=Object.defineProperty;var cd=Object.getOwnPropertyDescriptor;var sd=Object.getOwnPropertyNames;var fd=Object.getPrototypeOf,ud=Object.prototype.hasOwnProperty;var Je=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),dd=(e,n)=>{for(var i in n)pr(e,i,{get:n[i],enumerable:!0})},fc=(e,n,i,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of sd(n))!ud.call(e,r)&&r!==i&&pr(e,r,{get:()=>n[r],enumerable:!(t=cd(n,r))||t.enumerable});return e};var le=(e,n,i)=>(i=e!=null?ad(fd(e)):{},fc(n||!e||!e.__esModule?pr(i,"default",{value:e,enumerable:!0}):i,e)),ld=e=>fc(pr({},"__esModule",{value:!0}),e);var dc=Je((im,uc)=>{"use strict";uc.exports=pd;function pd(e,n){for(var i=new Array(arguments.length-1),t=0,r=2,o=!0;r<arguments.length;)i[t++]=arguments[r++];return new Promise(function(c,a){i[t]=function(l){if(o)if(o=!1,l)a(l);else{for(var w=new Array(arguments.length-1),_=0;_<w.length;)w[_++]=arguments[_];c.apply(null,w)}};try{e.apply(n||null,i)}catch(d){o&&(o=!1,a(d))}})}});var hc=Je(mc=>{"use strict";var mr=mc;mr.length=function(n){var i=n.length;if(!i)return 0;for(var t=0;--i%4>1&&n.charAt(i)==="=";)++t;return Math.ceil(n.length*3)/4-t};var Fn=new Array(64),pc=new Array(123);for(Ot=0;Ot<64;)pc[Fn[Ot]=Ot<26?Ot+65:Ot<52?Ot+71:Ot<62?Ot-4:Ot-59|43]=Ot++;var Ot;mr.encode=function(n,i,t){for(var r=null,o=[],s=0,c=0,a;i<t;){var d=n[i++];switch(c){case 0:o[s++]=Fn[d>>2],a=(d&3)<<4,c=1;break;case 1:o[s++]=Fn[a|d>>4],a=(d&15)<<2,c=2;break;case 2:o[s++]=Fn[a|d>>6],o[s++]=Fn[d&63],c=0;break}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=Fn[a],o[s++]=61,c===1&&(o[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var lc="invalid encoding";mr.decode=function(n,i,t){for(var r=t,o=0,s,c=0;c<n.length;){var a=n.charCodeAt(c++);if(a===61&&o>1)break;if((a=pc[a])===void 0)throw Error(lc);switch(o){case 0:s=a,o=1;break;case 1:i[t++]=s<<2|(a&48)>>4,s=a,o=2;break;case 2:i[t++]=(s&15)<<4|(a&60)>>2,s=a,o=3;break;case 3:i[t++]=(s&3)<<6|a,o=0;break}}if(o===1)throw Error(lc);return t-r};mr.test=function(n){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(n)}});var bc=Je((cm,yc)=>{"use strict";yc.exports=hr;function hr(){this._listeners={}}hr.prototype.on=function(n,i,t){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:i,ctx:t||this}),this};hr.prototype.off=function(n,i){if(n===void 0)this._listeners={};else if(i===void 0)this._listeners[n]=[];else for(var t=this._listeners[n],r=0;r<t.length;)t[r].fn===i?t.splice(r,1):++r;return this};hr.prototype.emit=function(n){var i=this._listeners[n];if(i){for(var t=[],r=1;r<arguments.length;)t.push(arguments[r++]);for(r=0;r<i.length;)i[r].fn.apply(i[r++].ctx,t)}return this}});var Rc=Je((sm,Sc)=>{"use strict";Sc.exports=Ec(Ec);function Ec(e){return typeof Float32Array<"u"?function(){var n=new Float32Array([-0]),i=new Uint8Array(n.buffer),t=i[3]===128;function r(a,d,l){n[0]=a,d[l]=i[0],d[l+1]=i[1],d[l+2]=i[2],d[l+3]=i[3]}function o(a,d,l){n[0]=a,d[l]=i[3],d[l+1]=i[2],d[l+2]=i[1],d[l+3]=i[0]}e.writeFloatLE=t?r:o,e.writeFloatBE=t?o:r;function s(a,d){return i[0]=a[d],i[1]=a[d+1],i[2]=a[d+2],i[3]=a[d+3],n[0]}function c(a,d){return i[3]=a[d],i[2]=a[d+1],i[1]=a[d+2],i[0]=a[d+3],n[0]}e.readFloatLE=t?s:c,e.readFloatBE=t?c:s}():function(){function n(t,r,o,s){var c=r<0?1:0;if(c&&(r=-r),r===0)t(1/r>0?0:2147483648,o,s);else if(isNaN(r))t(2143289344,o,s);else if(r>34028234663852886e22)t((c<<31|2139095040)>>>0,o,s);else if(r<11754943508222875e-54)t((c<<31|Math.round(r/1401298464324817e-60))>>>0,o,s);else{var a=Math.floor(Math.log(r)/Math.LN2),d=Math.round(r*Math.pow(2,-a)*8388608)&8388607;t((c<<31|a+127<<23|d)>>>0,o,s)}}e.writeFloatLE=n.bind(null,xc),e.writeFloatBE=n.bind(null,gc);function i(t,r,o){var s=t(r,o),c=(s>>31)*2+1,a=s>>>23&255,d=s&8388607;return a===255?d?NaN:c*(1/0):a===0?c*1401298464324817e-60*d:c*Math.pow(2,a-150)*(d+8388608)}e.readFloatLE=i.bind(null,_c),e.readFloatBE=i.bind(null,Tc)}(),typeof Float64Array<"u"?function(){var n=new Float64Array([-0]),i=new Uint8Array(n.buffer),t=i[7]===128;function r(a,d,l){n[0]=a,d[l]=i[0],d[l+1]=i[1],d[l+2]=i[2],d[l+3]=i[3],d[l+4]=i[4],d[l+5]=i[5],d[l+6]=i[6],d[l+7]=i[7]}function o(a,d,l){n[0]=a,d[l]=i[7],d[l+1]=i[6],d[l+2]=i[5],d[l+3]=i[4],d[l+4]=i[3],d[l+5]=i[2],d[l+6]=i[1],d[l+7]=i[0]}e.writeDoubleLE=t?r:o,e.writeDoubleBE=t?o:r;function s(a,d){return i[0]=a[d],i[1]=a[d+1],i[2]=a[d+2],i[3]=a[d+3],i[4]=a[d+4],i[5]=a[d+5],i[6]=a[d+6],i[7]=a[d+7],n[0]}function c(a,d){return i[7]=a[d],i[6]=a[d+1],i[5]=a[d+2],i[4]=a[d+3],i[3]=a[d+4],i[2]=a[d+5],i[1]=a[d+6],i[0]=a[d+7],n[0]}e.readDoubleLE=t?s:c,e.readDoubleBE=t?c:s}():function(){function n(t,r,o,s,c,a){var d=s<0?1:0;if(d&&(s=-s),s===0)t(0,c,a+r),t(1/s>0?0:2147483648,c,a+o);else if(isNaN(s))t(0,c,a+r),t(2146959360,c,a+o);else if(s>17976931348623157e292)t(0,c,a+r),t((d<<31|2146435072)>>>0,c,a+o);else{var l;if(s<22250738585072014e-324)l=s/5e-324,t(l>>>0,c,a+r),t((d<<31|l/4294967296)>>>0,c,a+o);else{var w=Math.floor(Math.log(s)/Math.LN2);w===1024&&(w=1023),l=s*Math.pow(2,-w),t(l*4503599627370496>>>0,c,a+r),t((d<<31|w+1023<<20|l*1048576&1048575)>>>0,c,a+o)}}}e.writeDoubleLE=n.bind(null,xc,0,4),e.writeDoubleBE=n.bind(null,gc,4,0);function i(t,r,o,s,c){var a=t(s,c+r),d=t(s,c+o),l=(d>>31)*2+1,w=d>>>20&2047,_=4294967296*(d&1048575)+a;return w===2047?_?NaN:l*(1/0):w===0?l*5e-324*_:l*Math.pow(2,w-1075)*(_+4503599627370496)}e.readDoubleLE=i.bind(null,_c,0,4),e.readDoubleBE=i.bind(null,Tc,4,0)}(),e}function xc(e,n,i){n[i]=e&255,n[i+1]=e>>>8&255,n[i+2]=e>>>16&255,n[i+3]=e>>>24}function gc(e,n,i){n[i]=e>>>24,n[i+1]=e>>>16&255,n[i+2]=e>>>8&255,n[i+3]=e&255}function _c(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0}function Tc(e,n){return(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])>>>0}});var Ac=Je((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var yr=Je(kc=>{"use strict";var ea=kc;ea.length=function(n){for(var i=0,t=0,r=0;r<n.length;++r)t=n.charCodeAt(r),t<128?i+=1:t<2048?i+=2:(t&64512)===55296&&(n.charCodeAt(r+1)&64512)===56320?(++r,i+=4):i+=3;return i};ea.read=function(n,i,t){var r=t-i;if(r<1)return"";for(var o=null,s=[],c=0,a;i<t;)a=n[i++],a<128?s[c++]=a:a>191&&a<224?s[c++]=(a&31)<<6|n[i++]&63:a>239&&a<365?(a=((a&7)<<18|(n[i++]&63)<<12|(n[i++]&63)<<6|n[i++]&63)-65536,s[c++]=55296+(a>>10),s[c++]=56320+(a&1023)):s[c++]=(a&15)<<12|(n[i++]&63)<<6|n[i++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,s.slice(0,c))),o.join("")):String.fromCharCode.apply(String,s.slice(0,c))};ea.write=function(n,i,t){for(var r=t,o,s,c=0;c<n.length;++c)o=n.charCodeAt(c),o<128?i[t++]=o:o<2048?(i[t++]=o>>6|192,i[t++]=o&63|128):(o&64512)===55296&&((s=n.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++c,i[t++]=o>>18|240,i[t++]=o>>12&63|128,i[t++]=o>>6&63|128,i[t++]=o&63|128):(i[t++]=o>>12|224,i[t++]=o>>6&63|128,i[t++]=o&63|128);return t-r}});var Nc=Je((um,wc)=>{"use strict";wc.exports=md;function md(e,n,i){var t=i||8192,r=t>>>1,o=null,s=t;return function(a){if(a<1||a>r)return e(a);s+a>t&&(o=e(t),s=0);var d=n.call(o,s,s+=a);return s&7&&(s=(s|7)+1),d}}});var Oc=Je((dm,Ic)=>{"use strict";Ic.exports=Ze;var Uo=Xt();function Ze(e,n){this.lo=e>>>0,this.hi=n>>>0}var kn=Ze.zero=new Ze(0,0);kn.toNumber=function(){return 0};kn.zzEncode=kn.zzDecode=function(){return this};kn.length=function(){return 1};var hd=Ze.zeroHash="\0\0\0\0\0\0\0\0";Ze.fromNumber=function(n){if(n===0)return kn;var i=n<0;i&&(n=-n);var t=n>>>0,r=(n-t)/4294967296>>>0;return i&&(r=~r>>>0,t=~t>>>0,++t>4294967295&&(t=0,++r>4294967295&&(r=0))),new Ze(t,r)};Ze.from=function(n){if(typeof n=="number")return Ze.fromNumber(n);if(Uo.isString(n))if(Uo.Long)n=Uo.Long.fromString(n);else return Ze.fromNumber(parseInt(n,10));return n.low||n.high?new Ze(n.low>>>0,n.high>>>0):kn};Ze.prototype.toNumber=function(n){if(!n&&this.hi>>>31){var i=~this.lo+1>>>0,t=~this.hi>>>0;return i||(t=t+1>>>0),-(i+t*4294967296)}return this.lo+this.hi*4294967296};Ze.prototype.toLong=function(n){return Uo.Long?new Uo.Long(this.lo|0,this.hi|0,!!n):{low:this.lo|0,high:this.hi|0,unsigned:!!n}};var Zt=String.prototype.charCodeAt;Ze.fromHash=function(n){return n===hd?kn:new Ze((Zt.call(n,0)|Zt.call(n,1)<<8|Zt.call(n,2)<<16|Zt.call(n,3)<<24)>>>0,(Zt.call(n,4)|Zt.call(n,5)<<8|Zt.call(n,6)<<16|Zt.call(n,7)<<24)>>>0)};Ze.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ze.prototype.zzEncode=function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this};Ze.prototype.zzDecode=function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this};Ze.prototype.length=function(){var n=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?i===0?n<16384?n<128?1:2:n<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:t<128?9:10}});var Xt=Je(ta=>{"use strict";var te=ta;te.asPromise=dc();te.base64=hc();te.EventEmitter=bc();te.float=Rc();te.inquire=Ac();te.utf8=yr();te.pool=Nc();te.LongBits=Oc();te.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);te.global=te.isNode&&global||!1||typeof self<"u"&&self||ta;te.emptyArray=Object.freeze?Object.freeze([]):[];te.emptyObject=Object.freeze?Object.freeze({}):{};te.isInteger=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n};te.isString=function(n){return typeof n=="string"||n instanceof String};te.isObject=function(n){return n&&typeof n=="object"};te.isset=te.isSet=function(n,i){var t=n[i];return t!=null&&n.hasOwnProperty(i)?typeof t!="object"||(Array.isArray(t)?t.length:Object.keys(t).length)>0:!1};te.Buffer=function(){try{var e=te.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();te._Buffer_from=null;te._Buffer_allocUnsafe=null;te.newBuffer=function(n){return typeof n=="number"?te.Buffer?te._Buffer_allocUnsafe(n):new te.Array(n):te.Buffer?te._Buffer_from(n):typeof Uint8Array>"u"?n:new Uint8Array(n)};te.Array=typeof Uint8Array<"u"?Uint8Array:Array;te.Long=te.global.dcodeIO&&te.global.dcodeIO.Long||te.global.Long||te.inquire("long");te.key2Re=/^true|false|0|1$/;te.key32Re=/^-?(?:0|[1-9][0-9]*)$/;te.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;te.longToHash=function(n){return n?te.LongBits.from(n).toHash():te.LongBits.zeroHash};te.longFromHash=function(n,i){var t=te.LongBits.fromHash(n);return te.Long?te.Long.fromBits(t.lo,t.hi,i):t.toNumber(!!i)};function Cc(e,n,i){for(var t=Object.keys(n),r=0;r<t.length;++r)(e[t[r]]===void 0||!i)&&(e[t[r]]=n[t[r]]);return e}te.merge=Cc;te.lcFirst=function(n){return n.charAt(0).toLowerCase()+n.substring(1)};function Mc(e){function n(i,t){if(!(this instanceof n))return new n(i,t);Object.defineProperty(this,"message",{get:function(){return i}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:new Error().stack||""}),t&&Cc(this,t)}return n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),n}te.newError=Mc;te.ProtocolError=Mc("ProtocolError");te.oneOfGetter=function(n){for(var i={},t=0;t<n.length;++t)i[n[t]]=1;return function(){for(var r=Object.keys(this),o=r.length-1;o>-1;--o)if(i[r[o]]===1&&this[r[o]]!==void 0&&this[r[o]]!==null)return r[o]}};te.oneOfSetter=function(n){return function(i){for(var t=0;t<n.length;++t)n[t]!==i&&delete this[n[t]]}};te.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};te._configure=function(){var e=te.Buffer;if(!e){te._Buffer_from=te._Buffer_allocUnsafe=null;return}te._Buffer_from=e.from!==Uint8Array.from&&e.from||function(i,t){return new e(i,t)},te._Buffer_allocUnsafe=e.allocUnsafe||function(i){return new e(i)}}});var sa=Je((pm,Pc)=>{"use strict";Pc.exports=Ee;var Rt=Xt(),na,br=Rt.LongBits,vc=Rt.base64,zc=Rt.utf8;function Lo(e,n,i){this.fn=e,this.len=n,this.next=void 0,this.val=i}function ra(){}function yd(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Ee(){this.len=0,this.head=new Lo(ra,0,0),this.tail=this.head,this.states=null}var Bc=function(){return Rt.Buffer?function(){return(Ee.create=function(){return new na})()}:function(){return new Ee}};Ee.create=Bc();Ee.alloc=function(n){return new Rt.Array(n)};Rt.Array!==Array&&(Ee.alloc=Rt.pool(Ee.alloc,Rt.Array.prototype.subarray));Ee.prototype._push=function(n,i,t){return this.tail=this.tail.next=new Lo(n,i,t),this.len+=i,this};function ia(e,n,i){n[i]=e&255}function bd(e,n,i){for(;e>127;)n[i++]=e&127|128,e>>>=7;n[i]=e}function aa(e,n){this.len=e,this.next=void 0,this.val=n}aa.prototype=Object.create(Lo.prototype);aa.prototype.fn=bd;Ee.prototype.uint32=function(n){return this.len+=(this.tail=this.tail.next=new aa((n=n>>>0)<128?1:n<16384?2:n<2097152?3:n<268435456?4:5,n)).len,this};Ee.prototype.int32=function(n){return n<0?this._push(ca,10,br.fromNumber(n)):this.uint32(n)};Ee.prototype.sint32=function(n){return this.uint32((n<<1^n>>31)>>>0)};function ca(e,n,i){for(;e.hi;)n[i++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)n[i++]=e.lo&127|128,e.lo=e.lo>>>7;n[i++]=e.lo}Ee.prototype.uint64=function(n){var i=br.from(n);return this._push(ca,i.length(),i)};Ee.prototype.int64=Ee.prototype.uint64;Ee.prototype.sint64=function(n){var i=br.from(n).zzEncode();return this._push(ca,i.length(),i)};Ee.prototype.bool=function(n){return this._push(ia,1,n?1:0)};function oa(e,n,i){n[i]=e&255,n[i+1]=e>>>8&255,n[i+2]=e>>>16&255,n[i+3]=e>>>24}Ee.prototype.fixed32=function(n){return this._push(oa,4,n>>>0)};Ee.prototype.sfixed32=Ee.prototype.fixed32;Ee.prototype.fixed64=function(n){var i=br.from(n);return this._push(oa,4,i.lo)._push(oa,4,i.hi)};Ee.prototype.sfixed64=Ee.prototype.fixed64;Ee.prototype.float=function(n){return this._push(Rt.float.writeFloatLE,4,n)};Ee.prototype.double=function(n){return this._push(Rt.float.writeDoubleLE,8,n)};var Ed=Rt.Array.prototype.set?function(n,i,t){i.set(n,t)}:function(n,i,t){for(var r=0;r<n.length;++r)i[t+r]=n[r]};Ee.prototype.bytes=function(n){var i=n.length>>>0;if(!i)return this._push(ia,1,0);if(Rt.isString(n)){var t=Ee.alloc(i=vc.length(n));vc.decode(n,t,0),n=t}return this.uint32(i)._push(Ed,i,n)};Ee.prototype.string=function(n){var i=zc.length(n);return i?this.uint32(i)._push(zc.write,i,n):this._push(ia,1,0)};Ee.prototype.fork=function(){return this.states=new yd(this),this.head=this.tail=new Lo(ra,0,0),this.len=0,this};Ee.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Lo(ra,0,0),this.len=0),this};Ee.prototype.ldelim=function(){var n=this.head,i=this.tail,t=this.len;return this.reset().uint32(t),t&&(this.tail.next=n.next,this.tail=i,this.len+=t),this};Ee.prototype.finish=function(){for(var n=this.head.next,i=this.constructor.alloc(this.len),t=0;n;)n.fn(n.val,i,t),t+=n.len,n=n.next;return i};Ee._configure=function(e){na=e,Ee.create=Bc(),na._configure()}});var Fc=Je((mm,Lc)=>{"use strict";Lc.exports=Ft;var Uc=sa();(Ft.prototype=Object.create(Uc.prototype)).constructor=Ft;var Kt=Xt();function Ft(){Uc.call(this)}Ft._configure=function(){Ft.alloc=Kt._Buffer_allocUnsafe,Ft.writeBytesBuffer=Kt.Buffer&&Kt.Buffer.prototype instanceof Uint8Array&&Kt.Buffer.prototype.set.name==="set"?function(n,i,t){i.set(n,t)}:function(n,i,t){if(n.copy)n.copy(i,t,0,n.length);else for(var r=0;r<n.length;)i[t++]=n[r++]}};Ft.prototype.bytes=function(n){Kt.isString(n)&&(n=Kt._Buffer_from(n,"base64"));var i=n.length>>>0;return this.uint32(i),i&&this._push(Ft.writeBytesBuffer,i,n),this};function xd(e,n,i){e.length<40?Kt.utf8.write(e,n,i):n.utf8Write?n.utf8Write(e,i):n.write(e,i)}Ft.prototype.string=function(n){var i=Kt.Buffer.byteLength(n);return this.uint32(i),i&&this._push(xd,i,n),this};Ft._configure()});var da=Je((hm,Gc)=>{"use strict";Gc.exports=We;var Ct=Xt(),ua,Vc=Ct.LongBits,gd=Ct.utf8;function Mt(e,n){return RangeError("index out of range: "+e.pos+" + "+(n||1)+" > "+e.len)}function We(e){this.buf=e,this.pos=0,this.len=e.length}var Dc=typeof Uint8Array<"u"?function(n){if(n instanceof Uint8Array||Array.isArray(n))return new We(n);throw Error("illegal buffer")}:function(n){if(Array.isArray(n))return new We(n);throw Error("illegal buffer")},Hc=function(){return Ct.Buffer?function(i){return(We.create=function(r){return Ct.Buffer.isBuffer(r)?new ua(r):Dc(r)})(i)}:Dc};We.create=Hc();We.prototype._slice=Ct.Array.prototype.subarray||Ct.Array.prototype.slice;We.prototype.uint32=function(){var n=4294967295;return function(){if(n=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(n=(n|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return n;if((this.pos+=5)>this.len)throw this.pos=this.len,Mt(this,10);return n}}();We.prototype.int32=function(){return this.uint32()|0};We.prototype.sint32=function(){var n=this.uint32();return n>>>1^-(n&1)|0};function fa(){var e=new Vc(0,0),n=0;if(this.len-this.pos>4){for(;n<4;++n)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;n=0}else{for(;n<3;++n){if(this.pos>=this.len)throw Mt(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<n*7)>>>0,e}if(this.len-this.pos>4){for(;n<5;++n)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;n<5;++n){if(this.pos>=this.len)throw Mt(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}We.prototype.bool=function(){return this.uint32()!==0};function Er(e,n){return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0}We.prototype.fixed32=function(){if(this.pos+4>this.len)throw Mt(this,4);return Er(this.buf,this.pos+=4)};We.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Mt(this,4);return Er(this.buf,this.pos+=4)|0};function Wc(){if(this.pos+8>this.len)throw Mt(this,8);return new Vc(Er(this.buf,this.pos+=4),Er(this.buf,this.pos+=4))}We.prototype.float=function(){if(this.pos+4>this.len)throw Mt(this,4);var n=Ct.float.readFloatLE(this.buf,this.pos);return this.pos+=4,n};We.prototype.double=function(){if(this.pos+8>this.len)throw Mt(this,4);var n=Ct.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,n};We.prototype.bytes=function(){var n=this.uint32(),i=this.pos,t=this.pos+n;if(t>this.len)throw Mt(this,n);if(this.pos+=n,Array.isArray(this.buf))return this.buf.slice(i,t);if(i===t){var r=Ct.Buffer;return r?r.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,i,t)};We.prototype.string=function(){var n=this.bytes();return gd.read(n,0,n.length)};We.prototype.skip=function(n){if(typeof n=="number"){if(this.pos+n>this.len)throw Mt(this,n);this.pos+=n}else do if(this.pos>=this.len)throw Mt(this);while(this.buf[this.pos++]&128);return this};We.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};We._configure=function(e){ua=e,We.create=Hc(),ua._configure();var n=Ct.Long?"toLong":"toNumber";Ct.merge(We.prototype,{int64:function(){return fa.call(this)[n](!1)},uint64:function(){return fa.call(this)[n](!0)},sint64:function(){return fa.call(this).zzDecode()[n](!1)},fixed64:function(){return Wc.call(this)[n](!0)},sfixed64:function(){return Wc.call(this)[n](!1)}})}});var $c=Je((ym,Yc)=>{"use strict";Yc.exports=wn;var qc=da();(wn.prototype=Object.create(qc.prototype)).constructor=wn;var jc=Xt();function wn(e){qc.call(this,e)}wn._configure=function(){jc.Buffer&&(wn.prototype._slice=jc.Buffer.prototype.slice)};wn.prototype.string=function(){var n=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+n,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+n,this.len))};wn._configure()});var Zc=Je((bm,Jc)=>{"use strict";Jc.exports=Fo;var la=Xt();(Fo.prototype=Object.create(la.EventEmitter.prototype)).constructor=Fo;function Fo(e,n,i){if(typeof e!="function")throw TypeError("rpcImpl must be a function");la.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!n,this.responseDelimited=!!i}Fo.prototype.rpcCall=function e(n,i,t,r,o){if(!r)throw TypeError("request must be specified");var s=this;if(!o)return la.asPromise(e,s,n,i,t,r);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(n,i[s.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(a,d){if(a)return s.emit("error",a,n),o(a);if(d===null){s.end(!0);return}if(!(d instanceof t))try{d=t[s.responseDelimited?"decodeDelimited":"decode"](d)}catch(l){return s.emit("error",l,n),o(l)}return s.emit("data",d,n),o(null,d)})}catch(c){s.emit("error",c,n),setTimeout(function(){o(c)},0);return}};Fo.prototype.end=function(n){return this.rpcImpl&&(n||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Kc=Je(Xc=>{"use strict";var _d=Xc;_d.Service=Zc()});var es=Je((xm,Qc)=>{"use strict";Qc.exports={}});var os=Je(ns=>{"use strict";var ft=ns;ft.build="minimal";ft.Writer=sa();ft.BufferWriter=Fc();ft.Reader=da();ft.BufferReader=$c();ft.util=Xt();ft.rpc=Kc();ft.roots=es();ft.configure=ts;function ts(){ft.util._configure(),ft.Writer._configure(ft.BufferWriter),ft.Reader._configure(ft.BufferReader)}ts()});var me=Je((_m,rs)=>{"use strict";rs.exports=os()});var om={};dd(om,{main:()=>Li,onStart:()=>nm,onUpdate:()=>tm,rendererTransport:()=>Di});module.exports=ld(om);var Nn=le(me());function Td(){return{states:[]}}var Dn;(function(e){function n(t,r=Nn.default.Writer.create()){for(let o of t.states)xr.encode(o,r.uint32(10).fork()).ldelim();return r}e.encode=n;function i(t,r){let o=t instanceof Nn.default.Reader?t:Nn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Td();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.states.push(xr.decode(o,o.uint32()));continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Dn||(Dn={}));function Sd(){return{clip:"",playing:void 0,weight:void 0,speed:void 0,loop:void 0,shouldReset:void 0}}var xr;(function(e){function n(t,r=Nn.default.Writer.create()){return t.clip!==""&&r.uint32(18).string(t.clip),t.playing!==void 0&&r.uint32(24).bool(t.playing),t.weight!==void 0&&r.uint32(37).float(t.weight),t.speed!==void 0&&r.uint32(45).float(t.speed),t.loop!==void 0&&r.uint32(48).bool(t.loop),t.shouldReset!==void 0&&r.uint32(56).bool(t.shouldReset),r}e.encode=n;function i(t,r){let o=t instanceof Nn.default.Reader?t:Nn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Sd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 2:if(a!==18)break;c.clip=o.string();continue;case 3:if(a!==24)break;c.playing=o.bool();continue;case 4:if(a!==37)break;c.weight=o.float();continue;case 5:if(a!==45)break;c.speed=o.float();continue;case 6:if(a!==48)break;c.loop=o.bool();continue;case 7:if(a!==56)break;c.shouldReset=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(xr||(xr={}));var is={COMPONENT_ID:1042,serialize(e,n){let i=Dn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Dn.decode(e.buffer(),e.remainingBytes())},create(){return Dn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAnimator"}};var gr=le(me());function Rd(){return{playing:void 0,volume:void 0,loop:void 0,pitch:void 0,audioClipUrl:""}}var Wn;(function(e){function n(t,r=gr.default.Writer.create()){return t.playing!==void 0&&r.uint32(8).bool(t.playing),t.volume!==void 0&&r.uint32(21).float(t.volume),t.loop!==void 0&&r.uint32(24).bool(t.loop),t.pitch!==void 0&&r.uint32(37).float(t.pitch),t.audioClipUrl!==""&&r.uint32(42).string(t.audioClipUrl),r}e.encode=n;function i(t,r){let o=t instanceof gr.default.Reader?t:gr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Rd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.playing=o.bool();continue;case 2:if(a!==21)break;c.volume=o.float();continue;case 3:if(a!==24)break;c.loop=o.bool();continue;case 4:if(a!==37)break;c.pitch=o.float();continue;case 5:if(a!==42)break;c.audioClipUrl=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Wn||(Wn={}));var as={COMPONENT_ID:1020,serialize(e,n){let i=Wn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Wn.decode(e.buffer(),e.remainingBytes())},create(){return Wn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAudioSource"}};var _r=le(me());function Ad(){return{playing:void 0,volume:void 0,url:""}}var Vn;(function(e){function n(t,r=_r.default.Writer.create()){return t.playing!==void 0&&r.uint32(8).bool(t.playing),t.volume!==void 0&&r.uint32(21).float(t.volume),t.url!==""&&r.uint32(26).string(t.url),r}e.encode=n;function i(t,r){let o=t instanceof _r.default.Reader?t:_r.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Ad();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.playing=o.bool();continue;case 2:if(a!==21)break;c.volume=o.float();continue;case 3:if(a!==26)break;c.url=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Vn||(Vn={}));var cs={COMPONENT_ID:1021,serialize(e,n){let i=Vn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Vn.decode(e.buffer(),e.remainingBytes())},create(){return Vn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAudioStream"}};var Tr=le(me());var ss;(function(e){e[e.AAPT_POSITION=0]="AAPT_POSITION",e[e.AAPT_NAME_TAG=1]="AAPT_NAME_TAG",e[e.AAPT_LEFT_HAND=2]="AAPT_LEFT_HAND",e[e.AAPT_RIGHT_HAND=3]="AAPT_RIGHT_HAND"})(ss||(ss={}));function kd(){return{avatarId:void 0,anchorPointId:0}}var Hn;(function(e){function n(t,r=Tr.default.Writer.create()){return t.avatarId!==void 0&&r.uint32(10).string(t.avatarId),t.anchorPointId!==0&&r.uint32(16).int32(t.anchorPointId),r}e.encode=n;function i(t,r){let o=t instanceof Tr.default.Reader?t:Tr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=kd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.avatarId=o.string();continue;case 2:if(a!==16)break;c.anchorPointId=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Hn||(Hn={}));var fs={COMPONENT_ID:1073,serialize(e,n){let i=Hn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Hn.decode(e.buffer(),e.remainingBytes())},create(){return Hn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarAttach"}};var Sr=le(me());var mt=le(me());function wd(){return{x:0,y:0,z:0}}var us;(function(e){function n(t,r=mt.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),t.z!==0&&r.uint32(29).float(t.z),r}e.encode=n;function i(t,r){let o=t instanceof mt.default.Reader?t:mt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=wd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue;case 3:if(a!==29)break;c.z=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(us||(us={}));function Nd(){return{x:0,y:0,z:0}}var Te;(function(e){function n(t,r=mt.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),t.z!==0&&r.uint32(29).float(t.z),r}e.encode=n;function i(t,r){let o=t instanceof mt.default.Reader?t:mt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Nd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue;case 3:if(a!==29)break;c.z=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Te||(Te={}));function Id(){return{x:0,y:0}}var ds;(function(e){function n(t,r=mt.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),r}e.encode=n;function i(t,r){let o=t instanceof mt.default.Reader?t:mt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Id();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ds||(ds={}));function Od(){return{x:0,y:0,z:0,w:0}}var ls;(function(e){function n(t,r=mt.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),t.z!==0&&r.uint32(29).float(t.z),t.w!==0&&r.uint32(37).float(t.w),r}e.encode=n;function i(t,r){let o=t instanceof mt.default.Reader?t:mt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Od();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue;case 3:if(a!==29)break;c.z=o.float();continue;case 4:if(a!==37)break;c.w=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ls||(ls={}));var ps;(function(e){e[e.AMT_HIDE_AVATARS=0]="AMT_HIDE_AVATARS",e[e.AMT_DISABLE_PASSPORTS=1]="AMT_DISABLE_PASSPORTS"})(ps||(ps={}));function Cd(){return{area:void 0,excludeIds:[],modifiers:[]}}var Gn;(function(e){function n(t,r=Sr.default.Writer.create()){t.area!==void 0&&Te.encode(t.area,r.uint32(10).fork()).ldelim();for(let o of t.excludeIds)r.uint32(18).string(o);r.uint32(26).fork();for(let o of t.modifiers)r.int32(o);return r.ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof Sr.default.Reader?t:Sr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Cd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.area=Te.decode(o,o.uint32());continue;case 2:if(a!==18)break;c.excludeIds.push(o.string());continue;case 3:if(a===24){c.modifiers.push(o.int32());continue}if(a===26){let d=o.uint32()+o.pos;for(;o.pos<d;)c.modifiers.push(o.int32());continue}break}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Gn||(Gn={}));var ms={COMPONENT_ID:1070,serialize(e,n){let i=Gn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Gn.decode(e.buffer(),e.remainingBytes())},create(){return Gn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarModifierArea"}};var At=null;try{At=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Oe(e,n,i){this.low=e|0,this.high=n|0,this.unsigned=!!i}Oe.prototype.__isLong__;Object.defineProperty(Oe.prototype,"__isLong__",{value:!0});function nt(e){return(e&&e.__isLong__)===!0}function hs(e){var n=Math.clz32(e&-e);return e?31-n:n}Oe.isLong=nt;var ys={},bs={};function In(e,n){var i,t,r;return n?(e>>>=0,(r=0<=e&&e<256)&&(t=bs[e],t)?t:(i=xe(e,0,!0),r&&(bs[e]=i),i)):(e|=0,(r=-128<=e&&e<128)&&(t=ys[e],t)?t:(i=xe(e,e<0?-1:0,!1),r&&(ys[e]=i),i))}Oe.fromInt=In;function kt(e,n){if(isNaN(e))return n?Yt:vt;if(n){if(e<0)return Yt;if(e>=_s)return Rs}else{if(e<=-xs)return ut;if(e+1>=xs)return Ss}return e<0?kt(-e,n).neg():xe(e%qn|0,e/qn|0,n)}Oe.fromNumber=kt;function xe(e,n,i){return new Oe(e,n,i)}Oe.fromBits=xe;var Rr=Math.pow;function ma(e,n,i){if(e.length===0)throw Error("empty string");if(typeof n=="number"?(i=n,n=!1):n=!!n,e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return n?Yt:vt;if(i=i||10,i<2||36<i)throw RangeError("radix");var t;if((t=e.indexOf("-"))>0)throw Error("interior hyphen");if(t===0)return ma(e.substring(1),n,i).neg();for(var r=kt(Rr(i,8)),o=vt,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+c),i);if(c<8){var d=kt(Rr(i,c));o=o.mul(d).add(kt(a))}else o=o.mul(r),o=o.add(kt(a))}return o.unsigned=n,o}Oe.fromString=ma;function zt(e,n){return typeof e=="number"?kt(e,n):typeof e=="string"?ma(e,n):xe(e.low,e.high,typeof n=="boolean"?n:e.unsigned)}Oe.fromValue=zt;var Es=65536,Md=1<<24,qn=Es*Es,_s=qn*qn,xs=_s/2,gs=In(Md),vt=In(0);Oe.ZERO=vt;var Yt=In(0,!0);Oe.UZERO=Yt;var jn=In(1);Oe.ONE=jn;var Ts=In(1,!0);Oe.UONE=Ts;var pa=In(-1);Oe.NEG_ONE=pa;var Ss=xe(-1,2147483647,!1);Oe.MAX_VALUE=Ss;var Rs=xe(-1,-1,!0);Oe.MAX_UNSIGNED_VALUE=Rs;var ut=xe(0,-2147483648,!1);Oe.MIN_VALUE=ut;var H=Oe.prototype;H.toInt=function(){return this.unsigned?this.low>>>0:this.low};H.toNumber=function(){return this.unsigned?(this.high>>>0)*qn+(this.low>>>0):this.high*qn+(this.low>>>0)};H.toString=function(n){if(n=n||10,n<2||36<n)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ut)){var i=kt(n),t=this.div(i),r=t.mul(i).sub(this);return t.toString(n)+r.toInt().toString(n)}else return"-"+this.neg().toString(n);for(var o=kt(Rr(n,6),this.unsigned),s=this,c="";;){var a=s.div(o),d=s.sub(a.mul(o)).toInt()>>>0,l=d.toString(n);if(s=a,s.isZero())return l+c;for(;l.length<6;)l="0"+l;c=""+l+c}};H.getHighBits=function(){return this.high};H.getHighBitsUnsigned=function(){return this.high>>>0};H.getLowBits=function(){return this.low};H.getLowBitsUnsigned=function(){return this.low>>>0};H.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ut)?64:this.neg().getNumBitsAbs();for(var n=this.high!=0?this.high:this.low,i=31;i>0&&!(n&1<<i);i--);return this.high!=0?i+33:i+1};H.isZero=function(){return this.high===0&&this.low===0};H.eqz=H.isZero;H.isNegative=function(){return!this.unsigned&&this.high<0};H.isPositive=function(){return this.unsigned||this.high>=0};H.isOdd=function(){return(this.low&1)===1};H.isEven=function(){return(this.low&1)===0};H.equals=function(n){return nt(n)||(n=zt(n)),this.unsigned!==n.unsigned&&this.high>>>31===1&&n.high>>>31===1?!1:this.high===n.high&&this.low===n.low};H.eq=H.equals;H.notEquals=function(n){return!this.eq(n)};H.neq=H.notEquals;H.ne=H.notEquals;H.lessThan=function(n){return this.comp(n)<0};H.lt=H.lessThan;H.lessThanOrEqual=function(n){return this.comp(n)<=0};H.lte=H.lessThanOrEqual;H.le=H.lessThanOrEqual;H.greaterThan=function(n){return this.comp(n)>0};H.gt=H.greaterThan;H.greaterThanOrEqual=function(n){return this.comp(n)>=0};H.gte=H.greaterThanOrEqual;H.ge=H.greaterThanOrEqual;H.compare=function(n){if(nt(n)||(n=zt(n)),this.eq(n))return 0;var i=this.isNegative(),t=n.isNegative();return i&&!t?-1:!i&&t?1:this.unsigned?n.high>>>0>this.high>>>0||n.high===this.high&&n.low>>>0>this.low>>>0?-1:1:this.sub(n).isNegative()?-1:1};H.comp=H.compare;H.negate=function(){return!this.unsigned&&this.eq(ut)?ut:this.not().add(jn)};H.neg=H.negate;H.add=function(n){nt(n)||(n=zt(n));var i=this.high>>>16,t=this.high&65535,r=this.low>>>16,o=this.low&65535,s=n.high>>>16,c=n.high&65535,a=n.low>>>16,d=n.low&65535,l=0,w=0,_=0,O=0;return O+=o+d,_+=O>>>16,O&=65535,_+=r+a,w+=_>>>16,_&=65535,w+=t+c,l+=w>>>16,w&=65535,l+=i+s,l&=65535,xe(_<<16|O,l<<16|w,this.unsigned)};H.subtract=function(n){return nt(n)||(n=zt(n)),this.add(n.neg())};H.sub=H.subtract;H.multiply=function(n){if(this.isZero())return this;if(nt(n)||(n=zt(n)),At){var i=At.mul(this.low,this.high,n.low,n.high);return xe(i,At.get_high(),this.unsigned)}if(n.isZero())return this.unsigned?Yt:vt;if(this.eq(ut))return n.isOdd()?ut:vt;if(n.eq(ut))return this.isOdd()?ut:vt;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(gs)&&n.lt(gs))return kt(this.toNumber()*n.toNumber(),this.unsigned);var t=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,c=n.high>>>16,a=n.high&65535,d=n.low>>>16,l=n.low&65535,w=0,_=0,O=0,x=0;return x+=s*l,O+=x>>>16,x&=65535,O+=o*l,_+=O>>>16,O&=65535,O+=s*d,_+=O>>>16,O&=65535,_+=r*l,w+=_>>>16,_&=65535,_+=o*d,w+=_>>>16,_&=65535,_+=s*a,w+=_>>>16,_&=65535,w+=t*l+r*d+o*a+s*c,w&=65535,xe(O<<16|x,w<<16|_,this.unsigned)};H.mul=H.multiply;H.divide=function(n){if(nt(n)||(n=zt(n)),n.isZero())throw Error("division by zero");if(At){if(!this.unsigned&&this.high===-2147483648&&n.low===-1&&n.high===-1)return this;var i=(this.unsigned?At.div_u:At.div_s)(this.low,this.high,n.low,n.high);return xe(i,At.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Yt:vt;var t,r,o;if(this.unsigned){if(n.unsigned||(n=n.toUnsigned()),n.gt(this))return Yt;if(n.gt(this.shru(1)))return Ts;o=Yt}else{if(this.eq(ut)){if(n.eq(jn)||n.eq(pa))return ut;if(n.eq(ut))return jn;var s=this.shr(1);return t=s.div(n).shl(1),t.eq(vt)?n.isNegative()?jn:pa:(r=this.sub(n.mul(t)),o=t.add(r.div(n)),o)}else if(n.eq(ut))return this.unsigned?Yt:vt;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();o=vt}for(r=this;r.gte(n);){t=Math.max(1,Math.floor(r.toNumber()/n.toNumber()));for(var c=Math.ceil(Math.log(t)/Math.LN2),a=c<=48?1:Rr(2,c-48),d=kt(t),l=d.mul(n);l.isNegative()||l.gt(r);)t-=a,d=kt(t,this.unsigned),l=d.mul(n);d.isZero()&&(d=jn),o=o.add(d),r=r.sub(l)}return o};H.div=H.divide;H.modulo=function(n){if(nt(n)||(n=zt(n)),At){var i=(this.unsigned?At.rem_u:At.rem_s)(this.low,this.high,n.low,n.high);return xe(i,At.get_high(),this.unsigned)}return this.sub(this.div(n).mul(n))};H.mod=H.modulo;H.rem=H.modulo;H.not=function(){return xe(~this.low,~this.high,this.unsigned)};H.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};H.clz=H.countLeadingZeros;H.countTrailingZeros=function(){return this.low?hs(this.low):hs(this.high)+32};H.ctz=H.countTrailingZeros;H.and=function(n){return nt(n)||(n=zt(n)),xe(this.low&n.low,this.high&n.high,this.unsigned)};H.or=function(n){return nt(n)||(n=zt(n)),xe(this.low|n.low,this.high|n.high,this.unsigned)};H.xor=function(n){return nt(n)||(n=zt(n)),xe(this.low^n.low,this.high^n.high,this.unsigned)};H.shiftLeft=function(n){return nt(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?xe(this.low<<n,this.high<<n|this.low>>>32-n,this.unsigned):xe(0,this.low<<n-32,this.unsigned)};H.shl=H.shiftLeft;H.shiftRight=function(n){return nt(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?xe(this.low>>>n|this.high<<32-n,this.high>>n,this.unsigned):xe(this.high>>n-32,this.high>=0?0:-1,this.unsigned)};H.shr=H.shiftRight;H.shiftRightUnsigned=function(n){return nt(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?xe(this.low>>>n|this.high<<32-n,this.high>>>n,this.unsigned):n===32?xe(this.high,0,this.unsigned):xe(this.high>>>n-32,0,this.unsigned)};H.shru=H.shiftRightUnsigned;H.shr_u=H.shiftRightUnsigned;H.rotateLeft=function(n){var i;return nt(n)&&(n=n.toInt()),(n&=63)===0?this:n===32?xe(this.high,this.low,this.unsigned):n<32?(i=32-n,xe(this.low<<n|this.high>>>i,this.high<<n|this.low>>>i,this.unsigned)):(n-=32,i=32-n,xe(this.high<<n|this.low>>>i,this.low<<n|this.high>>>i,this.unsigned))};H.rotl=H.rotateLeft;H.rotateRight=function(n){var i;return nt(n)&&(n=n.toInt()),(n&=63)===0?this:n===32?xe(this.high,this.low,this.unsigned):n<32?(i=32-n,xe(this.high<<i|this.low>>>n,this.low<<i|this.high>>>n,this.unsigned)):(n-=32,i=32-n,xe(this.low<<i|this.high>>>n,this.high<<i|this.low>>>n,this.unsigned))};H.rotr=H.rotateRight;H.toSigned=function(){return this.unsigned?xe(this.low,this.high,!1):this};H.toUnsigned=function(){return this.unsigned?this:xe(this.low,this.high,!0)};H.toBytes=function(n){return n?this.toBytesLE():this.toBytesBE()};H.toBytesLE=function(){var n=this.high,i=this.low;return[i&255,i>>>8&255,i>>>16&255,i>>>24,n&255,n>>>8&255,n>>>16&255,n>>>24]};H.toBytesBE=function(){var n=this.high,i=this.low;return[n>>>24,n>>>16&255,n>>>8&255,n&255,i>>>24,i>>>16&255,i>>>8&255,i&255]};Oe.fromBytes=function(n,i,t){return t?Oe.fromBytesLE(n,i):Oe.fromBytesBE(n,i)};Oe.fromBytesLE=function(n,i){return new Oe(n[0]|n[1]<<8|n[2]<<16|n[3]<<24,n[4]|n[5]<<8|n[6]<<16|n[7]<<24,i)};Oe.fromBytesBE=function(n,i){return new Oe(n[4]<<24|n[5]<<16|n[6]<<8|n[7],n[0]<<24|n[1]<<16|n[2]<<8|n[3],i)};var ha=Oe;var Cn=le(me());var On=le(me());function vd(){return{r:0,g:0,b:0}}var Pe;(function(e){function n(t,r=On.default.Writer.create()){return t.r!==0&&r.uint32(13).float(t.r),t.g!==0&&r.uint32(21).float(t.g),t.b!==0&&r.uint32(29).float(t.b),r}e.encode=n;function i(t,r){let o=t instanceof On.default.Reader?t:On.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=vd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.r=o.float();continue;case 2:if(a!==21)break;c.g=o.float();continue;case 3:if(a!==29)break;c.b=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Pe||(Pe={}));function zd(){return{r:0,g:0,b:0,a:0}}var Me;(function(e){function n(t,r=On.default.Writer.create()){return t.r!==0&&r.uint32(13).float(t.r),t.g!==0&&r.uint32(21).float(t.g),t.b!==0&&r.uint32(29).float(t.b),t.a!==0&&r.uint32(37).float(t.a),r}e.encode=n;function i(t,r){let o=t instanceof On.default.Reader?t:On.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=zd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.r=o.float();continue;case 2:if(a!==21)break;c.g=o.float();continue;case 3:if(a!==29)break;c.b=o.float();continue;case 4:if(a!==37)break;c.a=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Me||(Me={}));function Bd(){return{id:"",name:void 0,bodyShape:void 0,skinColor:void 0,hairColor:void 0,eyeColor:void 0,expressionTriggerId:void 0,expressionTriggerTimestamp:void 0,talking:void 0,wearables:[],emotes:[]}}var Yn;(function(e){function n(t,r=Cn.default.Writer.create()){t.id!==""&&r.uint32(10).string(t.id),t.name!==void 0&&r.uint32(18).string(t.name),t.bodyShape!==void 0&&r.uint32(26).string(t.bodyShape),t.skinColor!==void 0&&Pe.encode(t.skinColor,r.uint32(34).fork()).ldelim(),t.hairColor!==void 0&&Pe.encode(t.hairColor,r.uint32(42).fork()).ldelim(),t.eyeColor!==void 0&&Pe.encode(t.eyeColor,r.uint32(50).fork()).ldelim(),t.expressionTriggerId!==void 0&&r.uint32(58).string(t.expressionTriggerId),t.expressionTriggerTimestamp!==void 0&&r.uint32(64).int64(t.expressionTriggerTimestamp),t.talking!==void 0&&r.uint32(72).bool(t.talking);for(let o of t.wearables)r.uint32(82).string(o);for(let o of t.emotes)r.uint32(90).string(o);return r}e.encode=n;function i(t,r){let o=t instanceof Cn.default.Reader?t:Cn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Bd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.id=o.string();continue;case 2:if(a!==18)break;c.name=o.string();continue;case 3:if(a!==26)break;c.bodyShape=o.string();continue;case 4:if(a!==34)break;c.skinColor=Pe.decode(o,o.uint32());continue;case 5:if(a!==42)break;c.hairColor=Pe.decode(o,o.uint32());continue;case 6:if(a!==50)break;c.eyeColor=Pe.decode(o,o.uint32());continue;case 7:if(a!==58)break;c.expressionTriggerId=o.string();continue;case 8:if(a!==64)break;c.expressionTriggerTimestamp=Ud(o.int64());continue;case 9:if(a!==72)break;c.talking=o.bool();continue;case 10:if(a!==82)break;c.wearables.push(o.string());continue;case 11:if(a!==90)break;c.emotes.push(o.string());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Yn||(Yn={}));var Pd=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global;throw"Unable to locate global object"})();function Ud(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new Pd.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}Cn.default.util.Long!==ha&&(Cn.default.util.Long=ha,Cn.default.configure());var As={COMPONENT_ID:1080,serialize(e,n){let i=Yn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Yn.decode(e.buffer(),e.remainingBytes())},create(){return Yn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarShape"}};var Ar=le(me());var ks;(function(e){e[e.BM_NONE=0]="BM_NONE",e[e.BM_X=1]="BM_X",e[e.BM_Y=2]="BM_Y",e[e.BM_Z=4]="BM_Z",e[e.BM_ALL=7]="BM_ALL"})(ks||(ks={}));function Ld(){return{billboardMode:void 0}}var $n;(function(e){function n(t,r=Ar.default.Writer.create()){return t.billboardMode!==void 0&&r.uint32(8).int32(t.billboardMode),r}e.encode=n;function i(t,r){let o=t instanceof Ar.default.Reader?t:Ar.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Ld();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.billboardMode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})($n||($n={}));var ws={COMPONENT_ID:1090,serialize(e,n){let i=$n.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return $n.decode(e.buffer(),e.remainingBytes())},create(){return $n.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBBillboard"}};var kr=le(me());function Fd(){return{mode:0}}var Jn;(function(e){function n(t,r=kr.default.Writer.create()){return t.mode!==0&&r.uint32(8).int32(t.mode),r}e.encode=n;function i(t,r){let o=t instanceof kr.default.Reader?t:kr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Fd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.mode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Jn||(Jn={}));var Ns={COMPONENT_ID:1072,serialize(e,n){let i=Jn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Jn.decode(e.buffer(),e.remainingBytes())},create(){return Jn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBCameraMode"}};var wr=le(me());function Dd(){return{area:void 0,mode:0}}var Zn;(function(e){function n(t,r=wr.default.Writer.create()){return t.area!==void 0&&Te.encode(t.area,r.uint32(10).fork()).ldelim(),t.mode!==0&&r.uint32(16).int32(t.mode),r}e.encode=n;function i(t,r){let o=t instanceof wr.default.Reader?t:wr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Dd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.area=Te.decode(o,o.uint32());continue;case 2:if(a!==16)break;c.mode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Zn||(Zn={}));var Is={COMPONENT_ID:1071,serialize(e,n){let i=Zn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Zn.decode(e.buffer(),e.remainingBytes())},create(){return Zn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBCameraModeArea"}};var Nr=le(me());function Wd(){return{frameNumber:0,totalRuntime:0,tickNumber:0}}var Xn;(function(e){function n(t,r=Nr.default.Writer.create()){return t.frameNumber!==0&&r.uint32(8).uint32(t.frameNumber),t.totalRuntime!==0&&r.uint32(21).float(t.totalRuntime),t.tickNumber!==0&&r.uint32(24).uint32(t.tickNumber),r}e.encode=n;function i(t,r){let o=t instanceof Nr.default.Reader?t:Nr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Wd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.frameNumber=o.uint32();continue;case 2:if(a!==21)break;c.totalRuntime=o.float();continue;case 3:if(a!==24)break;c.tickNumber=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Xn||(Xn={}));var Os={COMPONENT_ID:1048,serialize(e,n){let i=Xn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Xn.decode(e.buffer(),e.remainingBytes())},create(){return Xn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBEngineInfo"}};var Ir=le(me());function Vd(){return{src:"",visibleMeshesCollisionMask:void 0,invisibleMeshesCollisionMask:void 0}}var Kn;(function(e){function n(t,r=Ir.default.Writer.create()){return t.src!==""&&r.uint32(10).string(t.src),t.visibleMeshesCollisionMask!==void 0&&r.uint32(32).uint32(t.visibleMeshesCollisionMask),t.invisibleMeshesCollisionMask!==void 0&&r.uint32(40).uint32(t.invisibleMeshesCollisionMask),r}e.encode=n;function i(t,r){let o=t instanceof Ir.default.Reader?t:Ir.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Vd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.src=o.string();continue;case 4:if(a!==32)break;c.visibleMeshesCollisionMask=o.uint32();continue;case 5:if(a!==40)break;c.invisibleMeshesCollisionMask=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Kn||(Kn={}));var Cs={COMPONENT_ID:1041,serialize(e,n){let i=Kn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Kn.decode(e.buffer(),e.remainingBytes())},create(){return Kn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBGltfContainer"}};var Or=le(me());function Hd(){return{currentState:0}}var Qn;(function(e){function n(t,r=Or.default.Writer.create()){return t.currentState!==0&&r.uint32(8).int32(t.currentState),r}e.encode=n;function i(t,r){let o=t instanceof Or.default.Reader?t:Or.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Hd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.currentState=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Qn||(Qn={}));var Ms={COMPONENT_ID:1049,serialize(e,n){let i=Qn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Qn.decode(e.buffer(),e.remainingBytes())},create(){return Qn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBGltfContainerLoadingState"}};var Dt=le(me());var ht=le(me());var vs;(function(e){e[e.TWM_REPEAT=0]="TWM_REPEAT",e[e.TWM_CLAMP=1]="TWM_CLAMP",e[e.TWM_MIRROR=2]="TWM_MIRROR"})(vs||(vs={}));var zs;(function(e){e[e.TFM_POINT=0]="TFM_POINT",e[e.TFM_BILINEAR=1]="TFM_BILINEAR",e[e.TFM_TRILINEAR=2]="TFM_TRILINEAR"})(zs||(zs={}));function Gd(){return{src:"",wrapMode:void 0,filterMode:void 0}}var Cr;(function(e){function n(t,r=ht.default.Writer.create()){return t.src!==""&&r.uint32(10).string(t.src),t.wrapMode!==void 0&&r.uint32(16).int32(t.wrapMode),t.filterMode!==void 0&&r.uint32(24).int32(t.filterMode),r}e.encode=n;function i(t,r){let o=t instanceof ht.default.Reader?t:ht.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Gd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.src=o.string();continue;case 2:if(a!==16)break;c.wrapMode=o.int32();continue;case 3:if(a!==24)break;c.filterMode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Cr||(Cr={}));function jd(){return{userId:"",wrapMode:void 0,filterMode:void 0}}var Mr;(function(e){function n(t,r=ht.default.Writer.create()){return t.userId!==""&&r.uint32(10).string(t.userId),t.wrapMode!==void 0&&r.uint32(16).int32(t.wrapMode),t.filterMode!==void 0&&r.uint32(24).int32(t.filterMode),r}e.encode=n;function i(t,r){let o=t instanceof ht.default.Reader?t:ht.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=jd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.userId=o.string();continue;case 2:if(a!==16)break;c.wrapMode=o.int32();continue;case 3:if(a!==24)break;c.filterMode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Mr||(Mr={}));function qd(){return{videoPlayerEntity:0,wrapMode:void 0,filterMode:void 0}}var vr;(function(e){function n(t,r=ht.default.Writer.create()){return t.videoPlayerEntity!==0&&r.uint32(8).uint32(t.videoPlayerEntity),t.wrapMode!==void 0&&r.uint32(16).int32(t.wrapMode),t.filterMode!==void 0&&r.uint32(24).int32(t.filterMode),r}e.encode=n;function i(t,r){let o=t instanceof ht.default.Reader?t:ht.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=qd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.videoPlayerEntity=o.uint32();continue;case 2:if(a!==16)break;c.wrapMode=o.int32();continue;case 3:if(a!==24)break;c.filterMode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(vr||(vr={}));function Yd(){return{tex:void 0}}var ot;(function(e){function n(t,r=ht.default.Writer.create()){switch(t.tex?.$case){case"texture":Cr.encode(t.tex.texture,r.uint32(10).fork()).ldelim();break;case"avatarTexture":Mr.encode(t.tex.avatarTexture,r.uint32(18).fork()).ldelim();break;case"videoTexture":vr.encode(t.tex.videoTexture,r.uint32(26).fork()).ldelim();break}return r}e.encode=n;function i(t,r){let o=t instanceof ht.default.Reader?t:ht.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Yd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.tex={$case:"texture",texture:Cr.decode(o,o.uint32())};continue;case 2:if(a!==18)break;c.tex={$case:"avatarTexture",avatarTexture:Mr.decode(o,o.uint32())};continue;case 3:if(a!==26)break;c.tex={$case:"videoTexture",videoTexture:vr.decode(o,o.uint32())};continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ot||(ot={}));var Bs;(function(e){e[e.MTM_OPAQUE=0]="MTM_OPAQUE",e[e.MTM_ALPHA_TEST=1]="MTM_ALPHA_TEST",e[e.MTM_ALPHA_BLEND=2]="MTM_ALPHA_BLEND",e[e.MTM_ALPHA_TEST_AND_ALPHA_BLEND=3]="MTM_ALPHA_TEST_AND_ALPHA_BLEND",e[e.MTM_AUTO=4]="MTM_AUTO"})(Bs||(Bs={}));function $d(){return{material:void 0}}var eo;(function(e){function n(t,r=Dt.default.Writer.create()){switch(t.material?.$case){case"unlit":zr.encode(t.material.unlit,r.uint32(10).fork()).ldelim();break;case"pbr":Br.encode(t.material.pbr,r.uint32(18).fork()).ldelim();break}return r}e.encode=n;function i(t,r){let o=t instanceof Dt.default.Reader?t:Dt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=$d();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.material={$case:"unlit",unlit:zr.decode(o,o.uint32())};continue;case 2:if(a!==18)break;c.material={$case:"pbr",pbr:Br.decode(o,o.uint32())};continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(eo||(eo={}));function Jd(){return{texture:void 0,alphaTest:void 0,castShadows:void 0,diffuseColor:void 0}}var zr;(function(e){function n(t,r=Dt.default.Writer.create()){return t.texture!==void 0&&ot.encode(t.texture,r.uint32(10).fork()).ldelim(),t.alphaTest!==void 0&&r.uint32(21).float(t.alphaTest),t.castShadows!==void 0&&r.uint32(24).bool(t.castShadows),t.diffuseColor!==void 0&&Me.encode(t.diffuseColor,r.uint32(34).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof Dt.default.Reader?t:Dt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Jd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.texture=ot.decode(o,o.uint32());continue;case 2:if(a!==21)break;c.alphaTest=o.float();continue;case 3:if(a!==24)break;c.castShadows=o.bool();continue;case 4:if(a!==34)break;c.diffuseColor=Me.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(zr||(zr={}));function Zd(){return{texture:void 0,alphaTest:void 0,castShadows:void 0,alphaTexture:void 0,emissiveTexture:void 0,bumpTexture:void 0,albedoColor:void 0,emissiveColor:void 0,reflectivityColor:void 0,transparencyMode:void 0,metallic:void 0,roughness:void 0,specularIntensity:void 0,emissiveIntensity:void 0,directIntensity:void 0}}var Br;(function(e){function n(t,r=Dt.default.Writer.create()){return t.texture!==void 0&&ot.encode(t.texture,r.uint32(10).fork()).ldelim(),t.alphaTest!==void 0&&r.uint32(21).float(t.alphaTest),t.castShadows!==void 0&&r.uint32(24).bool(t.castShadows),t.alphaTexture!==void 0&&ot.encode(t.alphaTexture,r.uint32(34).fork()).ldelim(),t.emissiveTexture!==void 0&&ot.encode(t.emissiveTexture,r.uint32(42).fork()).ldelim(),t.bumpTexture!==void 0&&ot.encode(t.bumpTexture,r.uint32(50).fork()).ldelim(),t.albedoColor!==void 0&&Me.encode(t.albedoColor,r.uint32(58).fork()).ldelim(),t.emissiveColor!==void 0&&Pe.encode(t.emissiveColor,r.uint32(66).fork()).ldelim(),t.reflectivityColor!==void 0&&Pe.encode(t.reflectivityColor,r.uint32(74).fork()).ldelim(),t.transparencyMode!==void 0&&r.uint32(80).int32(t.transparencyMode),t.metallic!==void 0&&r.uint32(93).float(t.metallic),t.roughness!==void 0&&r.uint32(101).float(t.roughness),t.specularIntensity!==void 0&&r.uint32(117).float(t.specularIntensity),t.emissiveIntensity!==void 0&&r.uint32(125).float(t.emissiveIntensity),t.directIntensity!==void 0&&r.uint32(133).float(t.directIntensity),r}e.encode=n;function i(t,r){let o=t instanceof Dt.default.Reader?t:Dt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Zd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.texture=ot.decode(o,o.uint32());continue;case 2:if(a!==21)break;c.alphaTest=o.float();continue;case 3:if(a!==24)break;c.castShadows=o.bool();continue;case 4:if(a!==34)break;c.alphaTexture=ot.decode(o,o.uint32());continue;case 5:if(a!==42)break;c.emissiveTexture=ot.decode(o,o.uint32());continue;case 6:if(a!==50)break;c.bumpTexture=ot.decode(o,o.uint32());continue;case 7:if(a!==58)break;c.albedoColor=Me.decode(o,o.uint32());continue;case 8:if(a!==66)break;c.emissiveColor=Pe.decode(o,o.uint32());continue;case 9:if(a!==74)break;c.reflectivityColor=Pe.decode(o,o.uint32());continue;case 10:if(a!==80)break;c.transparencyMode=o.int32();continue;case 11:if(a!==93)break;c.metallic=o.float();continue;case 12:if(a!==101)break;c.roughness=o.float();continue;case 14:if(a!==117)break;c.specularIntensity=o.float();continue;case 15:if(a!==125)break;c.emissiveIntensity=o.float();continue;case 16:if(a!==133)break;c.directIntensity=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Br||(Br={}));var Ps={COMPONENT_ID:1017,serialize(e,n){let i=eo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return eo.decode(e.buffer(),e.remainingBytes())},create(){return eo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBMaterial"}};var rt=le(me());var Pr;(function(e){e[e.CL_NONE=0]="CL_NONE",e[e.CL_POINTER=1]="CL_POINTER",e[e.CL_PHYSICS=2]="CL_PHYSICS",e[e.CL_RESERVED1=4]="CL_RESERVED1",e[e.CL_RESERVED2=8]="CL_RESERVED2",e[e.CL_RESERVED3=16]="CL_RESERVED3",e[e.CL_RESERVED4=32]="CL_RESERVED4",e[e.CL_RESERVED5=64]="CL_RESERVED5",e[e.CL_RESERVED6=128]="CL_RESERVED6",e[e.CL_CUSTOM1=256]="CL_CUSTOM1",e[e.CL_CUSTOM2=512]="CL_CUSTOM2",e[e.CL_CUSTOM3=1024]="CL_CUSTOM3",e[e.CL_CUSTOM4=2048]="CL_CUSTOM4",e[e.CL_CUSTOM5=4096]="CL_CUSTOM5",e[e.CL_CUSTOM6=8192]="CL_CUSTOM6",e[e.CL_CUSTOM7=16384]="CL_CUSTOM7",e[e.CL_CUSTOM8=32768]="CL_CUSTOM8"})(Pr||(Pr={}));function Xd(){return{collisionMask:void 0,mesh:void 0}}var to;(function(e){function n(t,r=rt.default.Writer.create()){switch(t.collisionMask!==void 0&&r.uint32(8).uint32(t.collisionMask),t.mesh?.$case){case"box":Ur.encode(t.mesh.box,r.uint32(18).fork()).ldelim();break;case"sphere":Dr.encode(t.mesh.sphere,r.uint32(26).fork()).ldelim();break;case"cylinder":Lr.encode(t.mesh.cylinder,r.uint32(34).fork()).ldelim();break;case"plane":Fr.encode(t.mesh.plane,r.uint32(42).fork()).ldelim();break}return r}e.encode=n;function i(t,r){let o=t instanceof rt.default.Reader?t:rt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Xd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.collisionMask=o.uint32();continue;case 2:if(a!==18)break;c.mesh={$case:"box",box:Ur.decode(o,o.uint32())};continue;case 3:if(a!==26)break;c.mesh={$case:"sphere",sphere:Dr.decode(o,o.uint32())};continue;case 4:if(a!==34)break;c.mesh={$case:"cylinder",cylinder:Lr.decode(o,o.uint32())};continue;case 5:if(a!==42)break;c.mesh={$case:"plane",plane:Fr.decode(o,o.uint32())};continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(to||(to={}));function Kd(){return{}}var Ur;(function(e){function n(t,r=rt.default.Writer.create()){return r}e.encode=n;function i(t,r){let o=t instanceof rt.default.Reader?t:rt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Kd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Ur||(Ur={}));function Qd(){return{radiusTop:void 0,radiusBottom:void 0}}var Lr;(function(e){function n(t,r=rt.default.Writer.create()){return t.radiusTop!==void 0&&r.uint32(13).float(t.radiusTop),t.radiusBottom!==void 0&&r.uint32(21).float(t.radiusBottom),r}e.encode=n;function i(t,r){let o=t instanceof rt.default.Reader?t:rt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Qd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.radiusTop=o.float();continue;case 2:if(a!==21)break;c.radiusBottom=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Lr||(Lr={}));function el(){return{}}var Fr;(function(e){function n(t,r=rt.default.Writer.create()){return r}e.encode=n;function i(t,r){let o=t instanceof rt.default.Reader?t:rt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=el();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Fr||(Fr={}));function tl(){return{}}var Dr;(function(e){function n(t,r=rt.default.Writer.create()){return r}e.encode=n;function i(t,r){let o=t instanceof rt.default.Reader?t:rt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=tl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Dr||(Dr={}));var Us={COMPONENT_ID:1019,serialize(e,n){let i=to.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return to.decode(e.buffer(),e.remainingBytes())},create(){return to.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBMeshCollider"}};var it=le(me());function nl(){return{mesh:void 0}}var no;(function(e){function n(t,r=it.default.Writer.create()){switch(t.mesh?.$case){case"box":Wr.encode(t.mesh.box,r.uint32(10).fork()).ldelim();break;case"sphere":Gr.encode(t.mesh.sphere,r.uint32(18).fork()).ldelim();break;case"cylinder":Vr.encode(t.mesh.cylinder,r.uint32(26).fork()).ldelim();break;case"plane":Hr.encode(t.mesh.plane,r.uint32(34).fork()).ldelim();break}return r}e.encode=n;function i(t,r){let o=t instanceof it.default.Reader?t:it.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=nl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.mesh={$case:"box",box:Wr.decode(o,o.uint32())};continue;case 2:if(a!==18)break;c.mesh={$case:"sphere",sphere:Gr.decode(o,o.uint32())};continue;case 3:if(a!==26)break;c.mesh={$case:"cylinder",cylinder:Vr.decode(o,o.uint32())};continue;case 4:if(a!==34)break;c.mesh={$case:"plane",plane:Hr.decode(o,o.uint32())};continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(no||(no={}));function ol(){return{uvs:[]}}var Wr;(function(e){function n(t,r=it.default.Writer.create()){r.uint32(10).fork();for(let o of t.uvs)r.float(o);return r.ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof it.default.Reader?t:it.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=ol();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a===13){c.uvs.push(o.float());continue}if(a===10){let d=o.uint32()+o.pos;for(;o.pos<d;)c.uvs.push(o.float());continue}break}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Wr||(Wr={}));function rl(){return{radiusTop:void 0,radiusBottom:void 0}}var Vr;(function(e){function n(t,r=it.default.Writer.create()){return t.radiusTop!==void 0&&r.uint32(13).float(t.radiusTop),t.radiusBottom!==void 0&&r.uint32(21).float(t.radiusBottom),r}e.encode=n;function i(t,r){let o=t instanceof it.default.Reader?t:it.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=rl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.radiusTop=o.float();continue;case 2:if(a!==21)break;c.radiusBottom=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Vr||(Vr={}));function il(){return{uvs:[]}}var Hr;(function(e){function n(t,r=it.default.Writer.create()){r.uint32(10).fork();for(let o of t.uvs)r.float(o);return r.ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof it.default.Reader?t:it.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=il();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a===13){c.uvs.push(o.float());continue}if(a===10){let d=o.uint32()+o.pos;for(;o.pos<d;)c.uvs.push(o.float());continue}break}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Hr||(Hr={}));function al(){return{}}var Gr;(function(e){function n(t,r=it.default.Writer.create()){return r}e.encode=n;function i(t,r){let o=t instanceof it.default.Reader?t:it.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=al();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Gr||(Gr={}));var Ls={COMPONENT_ID:1018,serialize(e,n){let i=no.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return no.decode(e.buffer(),e.remainingBytes())},create(){return no.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBMeshRenderer"}};var jr=le(me());var Fs;(function(e){e[e.NFT_CLASSIC=0]="NFT_CLASSIC",e[e.NFT_BAROQUE_ORNAMENT=1]="NFT_BAROQUE_ORNAMENT",e[e.NFT_DIAMOND_ORNAMENT=2]="NFT_DIAMOND_ORNAMENT",e[e.NFT_MINIMAL_WIDE=3]="NFT_MINIMAL_WIDE",e[e.NFT_MINIMAL_GREY=4]="NFT_MINIMAL_GREY",e[e.NFT_BLOCKY=5]="NFT_BLOCKY",e[e.NFT_GOLD_EDGES=6]="NFT_GOLD_EDGES",e[e.NFT_GOLD_CARVED=7]="NFT_GOLD_CARVED",e[e.NFT_GOLD_WIDE=8]="NFT_GOLD_WIDE",e[e.NFT_GOLD_ROUNDED=9]="NFT_GOLD_ROUNDED",e[e.NFT_METAL_MEDIUM=10]="NFT_METAL_MEDIUM",e[e.NFT_METAL_WIDE=11]="NFT_METAL_WIDE",e[e.NFT_METAL_SLIM=12]="NFT_METAL_SLIM",e[e.NFT_METAL_ROUNDED=13]="NFT_METAL_ROUNDED",e[e.NFT_PINS=14]="NFT_PINS",e[e.NFT_MINIMAL_BLACK=15]="NFT_MINIMAL_BLACK",e[e.NFT_MINIMAL_WHITE=16]="NFT_MINIMAL_WHITE",e[e.NFT_TAPE=17]="NFT_TAPE",e[e.NFT_WOOD_SLIM=18]="NFT_WOOD_SLIM",e[e.NFT_WOOD_WIDE=19]="NFT_WOOD_WIDE",e[e.NFT_WOOD_TWIGS=20]="NFT_WOOD_TWIGS",e[e.NFT_CANVAS=21]="NFT_CANVAS",e[e.NFT_NONE=22]="NFT_NONE"})(Fs||(Fs={}));function cl(){return{urn:"",style:void 0,color:void 0}}var oo;(function(e){function n(t,r=jr.default.Writer.create()){return t.urn!==""&&r.uint32(10).string(t.urn),t.style!==void 0&&r.uint32(16).int32(t.style),t.color!==void 0&&Pe.encode(t.color,r.uint32(26).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof jr.default.Reader?t:jr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=cl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.urn=o.string();continue;case 2:if(a!==16)break;c.style=o.int32();continue;case 3:if(a!==26)break;c.color=Pe.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(oo||(oo={}));var Ds={COMPONENT_ID:1040,serialize(e,n){let i=oo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return oo.decode(e.buffer(),e.remainingBytes())},create(){return oo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBNftShape"}};var Wt=le(me());function sl(){return{pointerEvents:[]}}var ro;(function(e){function n(t,r=Wt.default.Writer.create()){for(let o of t.pointerEvents)Yr.encode(o,r.uint32(10).fork()).ldelim();return r}e.encode=n;function i(t,r){let o=t instanceof Wt.default.Reader?t:Wt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=sl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.pointerEvents.push(Yr.decode(o,o.uint32()));continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ro||(ro={}));function fl(){return{button:void 0,hoverText:void 0,maxDistance:void 0,showFeedback:void 0}}var qr;(function(e){function n(t,r=Wt.default.Writer.create()){return t.button!==void 0&&r.uint32(8).int32(t.button),t.hoverText!==void 0&&r.uint32(18).string(t.hoverText),t.maxDistance!==void 0&&r.uint32(29).float(t.maxDistance),t.showFeedback!==void 0&&r.uint32(32).bool(t.showFeedback),r}e.encode=n;function i(t,r){let o=t instanceof Wt.default.Reader?t:Wt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=fl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.button=o.int32();continue;case 2:if(a!==18)break;c.hoverText=o.string();continue;case 3:if(a!==29)break;c.maxDistance=o.float();continue;case 4:if(a!==32)break;c.showFeedback=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(qr||(qr={}));function ul(){return{eventType:0,eventInfo:void 0}}var Yr;(function(e){function n(t,r=Wt.default.Writer.create()){return t.eventType!==0&&r.uint32(8).int32(t.eventType),t.eventInfo!==void 0&&qr.encode(t.eventInfo,r.uint32(18).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof Wt.default.Reader?t:Wt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=ul();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.eventType=o.int32();continue;case 2:if(a!==18)break;c.eventInfo=qr.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Yr||(Yr={}));var Ws={COMPONENT_ID:1062,serialize(e,n){let i=ro.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return ro.decode(e.buffer(),e.remainingBytes())},create(){return ro.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBPointerEvents"}};var Jr=le(me());var $r=le(me());function dl(){return{position:void 0,globalOrigin:void 0,direction:void 0,normalHit:void 0,length:0,meshName:void 0,entityId:void 0}}var Qt;(function(e){function n(t,r=$r.default.Writer.create()){return t.position!==void 0&&Te.encode(t.position,r.uint32(10).fork()).ldelim(),t.globalOrigin!==void 0&&Te.encode(t.globalOrigin,r.uint32(18).fork()).ldelim(),t.direction!==void 0&&Te.encode(t.direction,r.uint32(26).fork()).ldelim(),t.normalHit!==void 0&&Te.encode(t.normalHit,r.uint32(34).fork()).ldelim(),t.length!==0&&r.uint32(45).float(t.length),t.meshName!==void 0&&r.uint32(50).string(t.meshName),t.entityId!==void 0&&r.uint32(56).uint32(t.entityId),r}e.encode=n;function i(t,r){let o=t instanceof $r.default.Reader?t:$r.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=dl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.position=Te.decode(o,o.uint32());continue;case 2:if(a!==18)break;c.globalOrigin=Te.decode(o,o.uint32());continue;case 3:if(a!==26)break;c.direction=Te.decode(o,o.uint32());continue;case 4:if(a!==34)break;c.normalHit=Te.decode(o,o.uint32());continue;case 5:if(a!==45)break;c.length=o.float();continue;case 6:if(a!==50)break;c.meshName=o.string();continue;case 7:if(a!==56)break;c.entityId=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Qt||(Qt={}));function ll(){return{button:0,hit:void 0,state:0,timestamp:0,analog:void 0,tickNumber:0}}var io;(function(e){function n(t,r=Jr.default.Writer.create()){return t.button!==0&&r.uint32(8).int32(t.button),t.hit!==void 0&&Qt.encode(t.hit,r.uint32(18).fork()).ldelim(),t.state!==0&&r.uint32(32).int32(t.state),t.timestamp!==0&&r.uint32(40).uint32(t.timestamp),t.analog!==void 0&&r.uint32(53).float(t.analog),t.tickNumber!==0&&r.uint32(56).uint32(t.tickNumber),r}e.encode=n;function i(t,r){let o=t instanceof Jr.default.Reader?t:Jr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=ll();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.button=o.int32();continue;case 2:if(a!==18)break;c.hit=Qt.decode(o,o.uint32());continue;case 4:if(a!==32)break;c.state=o.int32();continue;case 5:if(a!==40)break;c.timestamp=o.uint32();continue;case 6:if(a!==53)break;c.analog=o.float();continue;case 7:if(a!==56)break;c.tickNumber=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(io||(io={}));var Vs={COMPONENT_ID:1063,serialize(e,n){let i=io.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return io.decode(e.buffer(),e.remainingBytes())},create(){return io.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBPointerEventsResult"}};var Zr=le(me());function pl(){return{isPointerLocked:!1}}var ao;(function(e){function n(t,r=Zr.default.Writer.create()){return t.isPointerLocked===!0&&r.uint32(8).bool(t.isPointerLocked),r}e.encode=n;function i(t,r){let o=t instanceof Zr.default.Reader?t:Zr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=pl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.isPointerLocked=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ao||(ao={}));var Hs={COMPONENT_ID:1074,serialize(e,n){let i=ao.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return ao.decode(e.buffer(),e.remainingBytes())},create(){return ao.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBPointerLock"}};var Xr=le(me());var Gs;(function(e){e[e.RQT_HIT_FIRST=0]="RQT_HIT_FIRST",e[e.RQT_QUERY_ALL=1]="RQT_QUERY_ALL",e[e.RQT_NONE=2]="RQT_NONE"})(Gs||(Gs={}));function ml(){return{timestamp:void 0,originOffset:void 0,direction:void 0,maxDistance:0,queryType:0,continuous:void 0,collisionMask:void 0}}var co;(function(e){function n(t,r=Xr.default.Writer.create()){switch(t.timestamp!==void 0&&r.uint32(8).uint32(t.timestamp),t.originOffset!==void 0&&Te.encode(t.originOffset,r.uint32(18).fork()).ldelim(),t.direction?.$case){case"localDirection":Te.encode(t.direction.localDirection,r.uint32(50).fork()).ldelim();break;case"globalDirection":Te.encode(t.direction.globalDirection,r.uint32(26).fork()).ldelim();break;case"globalTarget":Te.encode(t.direction.globalTarget,r.uint32(58).fork()).ldelim();break;case"targetEntity":r.uint32(80).uint32(t.direction.targetEntity);break}return t.maxDistance!==0&&r.uint32(37).float(t.maxDistance),t.queryType!==0&&r.uint32(40).int32(t.queryType),t.continuous!==void 0&&r.uint32(64).bool(t.continuous),t.collisionMask!==void 0&&r.uint32(72).uint32(t.collisionMask),r}e.encode=n;function i(t,r){let o=t instanceof Xr.default.Reader?t:Xr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=ml();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.timestamp=o.uint32();continue;case 2:if(a!==18)break;c.originOffset=Te.decode(o,o.uint32());continue;case 6:if(a!==50)break;c.direction={$case:"localDirection",localDirection:Te.decode(o,o.uint32())};continue;case 3:if(a!==26)break;c.direction={$case:"globalDirection",globalDirection:Te.decode(o,o.uint32())};continue;case 7:if(a!==58)break;c.direction={$case:"globalTarget",globalTarget:Te.decode(o,o.uint32())};continue;case 10:if(a!==80)break;c.direction={$case:"targetEntity",targetEntity:o.uint32()};continue;case 4:if(a!==37)break;c.maxDistance=o.float();continue;case 5:if(a!==40)break;c.queryType=o.int32();continue;case 8:if(a!==64)break;c.continuous=o.bool();continue;case 9:if(a!==72)break;c.collisionMask=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(co||(co={}));var js={COMPONENT_ID:1067,serialize(e,n){let i=co.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return co.decode(e.buffer(),e.remainingBytes())},create(){return co.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBRaycast"}};var Kr=le(me());function hl(){return{timestamp:void 0,globalOrigin:void 0,direction:void 0,hits:[],tickNumber:0}}var so;(function(e){function n(t,r=Kr.default.Writer.create()){t.timestamp!==void 0&&r.uint32(8).uint32(t.timestamp),t.globalOrigin!==void 0&&Te.encode(t.globalOrigin,r.uint32(18).fork()).ldelim(),t.direction!==void 0&&Te.encode(t.direction,r.uint32(26).fork()).ldelim();for(let o of t.hits)Qt.encode(o,r.uint32(34).fork()).ldelim();return t.tickNumber!==0&&r.uint32(40).uint32(t.tickNumber),r}e.encode=n;function i(t,r){let o=t instanceof Kr.default.Reader?t:Kr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=hl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.timestamp=o.uint32();continue;case 2:if(a!==18)break;c.globalOrigin=Te.decode(o,o.uint32());continue;case 3:if(a!==26)break;c.direction=Te.decode(o,o.uint32());continue;case 4:if(a!==34)break;c.hits.push(Qt.decode(o,o.uint32()));continue;case 5:if(a!==40)break;c.tickNumber=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(so||(so={}));var qs={COMPONENT_ID:1068,serialize(e,n){let i=so.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return so.decode(e.buffer(),e.remainingBytes())},create(){return so.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBRaycastResult"}};var Qr=le(me());function yl(){return{text:"",font:void 0,fontSize:void 0,fontAutoSize:void 0,textAlign:void 0,width:void 0,height:void 0,paddingTop:void 0,paddingRight:void 0,paddingBottom:void 0,paddingLeft:void 0,lineSpacing:void 0,lineCount:void 0,textWrapping:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,outlineWidth:void 0,shadowColor:void 0,outlineColor:void 0,textColor:void 0}}var fo;(function(e){function n(t,r=Qr.default.Writer.create()){return t.text!==""&&r.uint32(10).string(t.text),t.font!==void 0&&r.uint32(16).int32(t.font),t.fontSize!==void 0&&r.uint32(29).float(t.fontSize),t.fontAutoSize!==void 0&&r.uint32(32).bool(t.fontAutoSize),t.textAlign!==void 0&&r.uint32(40).int32(t.textAlign),t.width!==void 0&&r.uint32(53).float(t.width),t.height!==void 0&&r.uint32(61).float(t.height),t.paddingTop!==void 0&&r.uint32(69).float(t.paddingTop),t.paddingRight!==void 0&&r.uint32(77).float(t.paddingRight),t.paddingBottom!==void 0&&r.uint32(85).float(t.paddingBottom),t.paddingLeft!==void 0&&r.uint32(93).float(t.paddingLeft),t.lineSpacing!==void 0&&r.uint32(101).float(t.lineSpacing),t.lineCount!==void 0&&r.uint32(104).int32(t.lineCount),t.textWrapping!==void 0&&r.uint32(112).bool(t.textWrapping),t.shadowBlur!==void 0&&r.uint32(125).float(t.shadowBlur),t.shadowOffsetX!==void 0&&r.uint32(133).float(t.shadowOffsetX),t.shadowOffsetY!==void 0&&r.uint32(141).float(t.shadowOffsetY),t.outlineWidth!==void 0&&r.uint32(149).float(t.outlineWidth),t.shadowColor!==void 0&&Pe.encode(t.shadowColor,r.uint32(154).fork()).ldelim(),t.outlineColor!==void 0&&Pe.encode(t.outlineColor,r.uint32(162).fork()).ldelim(),t.textColor!==void 0&&Me.encode(t.textColor,r.uint32(170).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof Qr.default.Reader?t:Qr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=yl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.text=o.string();continue;case 2:if(a!==16)break;c.font=o.int32();continue;case 3:if(a!==29)break;c.fontSize=o.float();continue;case 4:if(a!==32)break;c.fontAutoSize=o.bool();continue;case 5:if(a!==40)break;c.textAlign=o.int32();continue;case 6:if(a!==53)break;c.width=o.float();continue;case 7:if(a!==61)break;c.height=o.float();continue;case 8:if(a!==69)break;c.paddingTop=o.float();continue;case 9:if(a!==77)break;c.paddingRight=o.float();continue;case 10:if(a!==85)break;c.paddingBottom=o.float();continue;case 11:if(a!==93)break;c.paddingLeft=o.float();continue;case 12:if(a!==101)break;c.lineSpacing=o.float();continue;case 13:if(a!==104)break;c.lineCount=o.int32();continue;case 14:if(a!==112)break;c.textWrapping=o.bool();continue;case 15:if(a!==125)break;c.shadowBlur=o.float();continue;case 16:if(a!==133)break;c.shadowOffsetX=o.float();continue;case 17:if(a!==141)break;c.shadowOffsetY=o.float();continue;case 18:if(a!==149)break;c.outlineWidth=o.float();continue;case 19:if(a!==154)break;c.shadowColor=Pe.decode(o,o.uint32());continue;case 20:if(a!==162)break;c.outlineColor=Pe.decode(o,o.uint32());continue;case 21:if(a!==170)break;c.textColor=Me.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(fo||(fo={}));var Ys={COMPONENT_ID:1030,serialize(e,n){let i=fo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return fo.decode(e.buffer(),e.remainingBytes())},create(){return fo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBTextShape"}};var ei=le(me());var Mn=le(me());function bl(){return{top:0,left:0,right:0,bottom:0}}var en;(function(e){function n(t,r=Mn.default.Writer.create()){return t.top!==0&&r.uint32(13).float(t.top),t.left!==0&&r.uint32(21).float(t.left),t.right!==0&&r.uint32(29).float(t.right),t.bottom!==0&&r.uint32(37).float(t.bottom),r}e.encode=n;function i(t,r){let o=t instanceof Mn.default.Reader?t:Mn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=bl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.top=o.float();continue;case 2:if(a!==21)break;c.left=o.float();continue;case 3:if(a!==29)break;c.right=o.float();continue;case 4:if(a!==37)break;c.bottom=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(en||(en={}));function El(){return{x:0,y:0,width:0,height:0}}var $s;(function(e){function n(t,r=Mn.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),t.width!==0&&r.uint32(29).float(t.width),t.height!==0&&r.uint32(37).float(t.height),r}e.encode=n;function i(t,r){let o=t instanceof Mn.default.Reader?t:Mn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=El();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue;case 3:if(a!==29)break;c.width=o.float();continue;case 4:if(a!==37)break;c.height=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})($s||($s={}));var Js;(function(e){e[e.NINE_SLICES=0]="NINE_SLICES",e[e.CENTER=1]="CENTER",e[e.STRETCH=2]="STRETCH"})(Js||(Js={}));function xl(){return{color:void 0,texture:void 0,textureMode:0,textureSlices:void 0,uvs:[]}}var uo;(function(e){function n(t,r=ei.default.Writer.create()){t.color!==void 0&&Me.encode(t.color,r.uint32(10).fork()).ldelim(),t.texture!==void 0&&ot.encode(t.texture,r.uint32(18).fork()).ldelim(),t.textureMode!==0&&r.uint32(24).int32(t.textureMode),t.textureSlices!==void 0&&en.encode(t.textureSlices,r.uint32(34).fork()).ldelim(),r.uint32(42).fork();for(let o of t.uvs)r.float(o);return r.ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof ei.default.Reader?t:ei.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=xl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.color=Me.decode(o,o.uint32());continue;case 2:if(a!==18)break;c.texture=ot.decode(o,o.uint32());continue;case 3:if(a!==24)break;c.textureMode=o.int32();continue;case 4:if(a!==34)break;c.textureSlices=en.decode(o,o.uint32());continue;case 5:if(a===45){c.uvs.push(o.float());continue}if(a===42){let d=o.uint32()+o.pos;for(;o.pos<d;)c.uvs.push(o.float());continue}break}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(uo||(uo={}));var Zs={COMPONENT_ID:1053,serialize(e,n){let i=uo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return uo.decode(e.buffer(),e.remainingBytes())},create(){return uo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiBackground"}};var ti=le(me());function gl(){return{devicePixelRatio:0,width:0,height:0,interactableArea:void 0}}var lo;(function(e){function n(t,r=ti.default.Writer.create()){return t.devicePixelRatio!==0&&r.uint32(13).float(t.devicePixelRatio),t.width!==0&&r.uint32(16).int32(t.width),t.height!==0&&r.uint32(24).int32(t.height),t.interactableArea!==void 0&&en.encode(t.interactableArea,r.uint32(34).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof ti.default.Reader?t:ti.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=gl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.devicePixelRatio=o.float();continue;case 2:if(a!==16)break;c.width=o.int32();continue;case 3:if(a!==24)break;c.height=o.int32();continue;case 4:if(a!==34)break;c.interactableArea=en.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(lo||(lo={}));var Xs={COMPONENT_ID:1054,serialize(e,n){let i=lo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return lo.decode(e.buffer(),e.remainingBytes())},create(){return lo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiCanvasInformation"}};var ni=le(me());function _l(){return{acceptEmpty:!1,emptyLabel:void 0,options:[],selectedIndex:void 0,disabled:!1,color:void 0,textAlign:void 0,font:void 0,fontSize:void 0}}var po;(function(e){function n(t,r=ni.default.Writer.create()){t.acceptEmpty===!0&&r.uint32(8).bool(t.acceptEmpty),t.emptyLabel!==void 0&&r.uint32(18).string(t.emptyLabel);for(let o of t.options)r.uint32(26).string(o);return t.selectedIndex!==void 0&&r.uint32(32).int32(t.selectedIndex),t.disabled===!0&&r.uint32(40).bool(t.disabled),t.color!==void 0&&Me.encode(t.color,r.uint32(50).fork()).ldelim(),t.textAlign!==void 0&&r.uint32(80).int32(t.textAlign),t.font!==void 0&&r.uint32(88).int32(t.font),t.fontSize!==void 0&&r.uint32(96).int32(t.fontSize),r}e.encode=n;function i(t,r){let o=t instanceof ni.default.Reader?t:ni.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=_l();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.acceptEmpty=o.bool();continue;case 2:if(a!==18)break;c.emptyLabel=o.string();continue;case 3:if(a!==26)break;c.options.push(o.string());continue;case 4:if(a!==32)break;c.selectedIndex=o.int32();continue;case 5:if(a!==40)break;c.disabled=o.bool();continue;case 6:if(a!==50)break;c.color=Me.decode(o,o.uint32());continue;case 10:if(a!==80)break;c.textAlign=o.int32();continue;case 11:if(a!==88)break;c.font=o.int32();continue;case 12:if(a!==96)break;c.fontSize=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(po||(po={}));var Ks={COMPONENT_ID:1094,serialize(e,n){let i=po.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return po.decode(e.buffer(),e.remainingBytes())},create(){return po.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiDropdown"}};var oi=le(me());function Tl(){return{value:0}}var mo;(function(e){function n(t,r=oi.default.Writer.create()){return t.value!==0&&r.uint32(8).int32(t.value),r}e.encode=n;function i(t,r){let o=t instanceof oi.default.Reader?t:oi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Tl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.value=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(mo||(mo={}));var Qs={COMPONENT_ID:1096,serialize(e,n){let i=mo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return mo.decode(e.buffer(),e.remainingBytes())},create(){return mo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiDropdownResult"}};var ri=le(me());function Sl(){return{placeholder:"",color:void 0,placeholderColor:void 0,disabled:!1,textAlign:void 0,font:void 0,fontSize:void 0,value:void 0}}var ho;(function(e){function n(t,r=ri.default.Writer.create()){return t.placeholder!==""&&r.uint32(10).string(t.placeholder),t.color!==void 0&&Me.encode(t.color,r.uint32(18).fork()).ldelim(),t.placeholderColor!==void 0&&Me.encode(t.placeholderColor,r.uint32(26).fork()).ldelim(),t.disabled===!0&&r.uint32(32).bool(t.disabled),t.textAlign!==void 0&&r.uint32(80).int32(t.textAlign),t.font!==void 0&&r.uint32(88).int32(t.font),t.fontSize!==void 0&&r.uint32(96).int32(t.fontSize),t.value!==void 0&&r.uint32(106).string(t.value),r}e.encode=n;function i(t,r){let o=t instanceof ri.default.Reader?t:ri.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Sl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.placeholder=o.string();continue;case 2:if(a!==18)break;c.color=Me.decode(o,o.uint32());continue;case 3:if(a!==26)break;c.placeholderColor=Me.decode(o,o.uint32());continue;case 4:if(a!==32)break;c.disabled=o.bool();continue;case 10:if(a!==80)break;c.textAlign=o.int32();continue;case 11:if(a!==88)break;c.font=o.int32();continue;case 12:if(a!==96)break;c.fontSize=o.int32();continue;case 13:if(a!==106)break;c.value=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ho||(ho={}));var ef={COMPONENT_ID:1093,serialize(e,n){let i=ho.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return ho.decode(e.buffer(),e.remainingBytes())},create(){return ho.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiInput"}};var ii=le(me());function Rl(){return{value:""}}var yo;(function(e){function n(t,r=ii.default.Writer.create()){return t.value!==""&&r.uint32(10).string(t.value),r}e.encode=n;function i(t,r){let o=t instanceof ii.default.Reader?t:ii.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Rl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.value=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(yo||(yo={}));var tf={COMPONENT_ID:1095,serialize(e,n){let i=yo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return yo.decode(e.buffer(),e.remainingBytes())},create(){return yo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiInputResult"}};var ai=le(me());function Al(){return{value:"",color:void 0,textAlign:void 0,font:void 0,fontSize:void 0}}var bo;(function(e){function n(t,r=ai.default.Writer.create()){return t.value!==""&&r.uint32(10).string(t.value),t.color!==void 0&&Me.encode(t.color,r.uint32(18).fork()).ldelim(),t.textAlign!==void 0&&r.uint32(24).int32(t.textAlign),t.font!==void 0&&r.uint32(32).int32(t.font),t.fontSize!==void 0&&r.uint32(40).int32(t.fontSize),r}e.encode=n;function i(t,r){let o=t instanceof ai.default.Reader?t:ai.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Al();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.value=o.string();continue;case 2:if(a!==18)break;c.color=Me.decode(o,o.uint32());continue;case 3:if(a!==24)break;c.textAlign=o.int32();continue;case 4:if(a!==32)break;c.font=o.int32();continue;case 5:if(a!==40)break;c.fontSize=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(bo||(bo={}));var nf={COMPONENT_ID:1052,serialize(e,n){let i=bo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return bo.decode(e.buffer(),e.remainingBytes())},create(){return bo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiText"}};var ci=le(me());var of;(function(e){e[e.YGPT_RELATIVE=0]="YGPT_RELATIVE",e[e.YGPT_ABSOLUTE=1]="YGPT_ABSOLUTE"})(of||(of={}));var rf;(function(e){e[e.YGA_AUTO=0]="YGA_AUTO",e[e.YGA_FLEX_START=1]="YGA_FLEX_START",e[e.YGA_CENTER=2]="YGA_CENTER",e[e.YGA_FLEX_END=3]="YGA_FLEX_END",e[e.YGA_STRETCH=4]="YGA_STRETCH",e[e.YGA_BASELINE=5]="YGA_BASELINE",e[e.YGA_SPACE_BETWEEN=6]="YGA_SPACE_BETWEEN",e[e.YGA_SPACE_AROUND=7]="YGA_SPACE_AROUND"})(rf||(rf={}));var af;(function(e){e[e.YGU_UNDEFINED=0]="YGU_UNDEFINED",e[e.YGU_POINT=1]="YGU_POINT",e[e.YGU_PERCENT=2]="YGU_PERCENT",e[e.YGU_AUTO=3]="YGU_AUTO"})(af||(af={}));var cf;(function(e){e[e.YGFD_ROW=0]="YGFD_ROW",e[e.YGFD_COLUMN=1]="YGFD_COLUMN",e[e.YGFD_COLUMN_REVERSE=2]="YGFD_COLUMN_REVERSE",e[e.YGFD_ROW_REVERSE=3]="YGFD_ROW_REVERSE"})(cf||(cf={}));var sf;(function(e){e[e.YGW_NO_WRAP=0]="YGW_NO_WRAP",e[e.YGW_WRAP=1]="YGW_WRAP",e[e.YGW_WRAP_REVERSE=2]="YGW_WRAP_REVERSE"})(sf||(sf={}));var ff;(function(e){e[e.YGJ_FLEX_START=0]="YGJ_FLEX_START",e[e.YGJ_CENTER=1]="YGJ_CENTER",e[e.YGJ_FLEX_END=2]="YGJ_FLEX_END",e[e.YGJ_SPACE_BETWEEN=3]="YGJ_SPACE_BETWEEN",e[e.YGJ_SPACE_AROUND=4]="YGJ_SPACE_AROUND",e[e.YGJ_SPACE_EVENLY=5]="YGJ_SPACE_EVENLY"})(ff||(ff={}));var uf;(function(e){e[e.YGO_VISIBLE=0]="YGO_VISIBLE",e[e.YGO_HIDDEN=1]="YGO_HIDDEN",e[e.YGO_SCROLL=2]="YGO_SCROLL"})(uf||(uf={}));var df;(function(e){e[e.YGD_FLEX=0]="YGD_FLEX",e[e.YGD_NONE=1]="YGD_NONE"})(df||(df={}));var lf;(function(e){e[e.YGE_LEFT=0]="YGE_LEFT",e[e.YGE_TOP=1]="YGE_TOP",e[e.YGE_RIGHT=2]="YGE_RIGHT",e[e.YGE_BOTTOM=3]="YGE_BOTTOM",e[e.YGE_START=4]="YGE_START",e[e.YGE_END=5]="YGE_END",e[e.YGE_HORIZONTAL=6]="YGE_HORIZONTAL",e[e.YGE_VERTICAL=7]="YGE_VERTICAL",e[e.YGE_ALL=8]="YGE_ALL"})(lf||(lf={}));function kl(){return{parent:0,rightOf:0,alignContent:void 0,alignItems:void 0,flexWrap:void 0,flexShrink:void 0,positionType:0,alignSelf:0,flexDirection:0,justifyContent:0,overflow:0,display:0,flexBasisUnit:0,flexBasis:0,flexGrow:0,widthUnit:0,width:0,heightUnit:0,height:0,minWidthUnit:0,minWidth:0,minHeightUnit:0,minHeight:0,maxWidthUnit:0,maxWidth:0,maxHeightUnit:0,maxHeight:0,positionLeftUnit:0,positionLeft:0,positionTopUnit:0,positionTop:0,positionRightUnit:0,positionRight:0,positionBottomUnit:0,positionBottom:0,marginLeftUnit:0,marginLeft:0,marginTopUnit:0,marginTop:0,marginRightUnit:0,marginRight:0,marginBottomUnit:0,marginBottom:0,paddingLeftUnit:0,paddingLeft:0,paddingTopUnit:0,paddingTop:0,paddingRightUnit:0,paddingRight:0,paddingBottomUnit:0,paddingBottom:0}}var Eo;(function(e){function n(t,r=ci.default.Writer.create()){return t.parent!==0&&r.uint32(8).int32(t.parent),t.rightOf!==0&&r.uint32(16).int32(t.rightOf),t.alignContent!==void 0&&r.uint32(24).int32(t.alignContent),t.alignItems!==void 0&&r.uint32(32).int32(t.alignItems),t.flexWrap!==void 0&&r.uint32(40).int32(t.flexWrap),t.flexShrink!==void 0&&r.uint32(53).float(t.flexShrink),t.positionType!==0&&r.uint32(56).int32(t.positionType),t.alignSelf!==0&&r.uint32(64).int32(t.alignSelf),t.flexDirection!==0&&r.uint32(72).int32(t.flexDirection),t.justifyContent!==0&&r.uint32(80).int32(t.justifyContent),t.overflow!==0&&r.uint32(88).int32(t.overflow),t.display!==0&&r.uint32(96).int32(t.display),t.flexBasisUnit!==0&&r.uint32(104).int32(t.flexBasisUnit),t.flexBasis!==0&&r.uint32(117).float(t.flexBasis),t.flexGrow!==0&&r.uint32(125).float(t.flexGrow),t.widthUnit!==0&&r.uint32(128).int32(t.widthUnit),t.width!==0&&r.uint32(141).float(t.width),t.heightUnit!==0&&r.uint32(144).int32(t.heightUnit),t.height!==0&&r.uint32(157).float(t.height),t.minWidthUnit!==0&&r.uint32(160).int32(t.minWidthUnit),t.minWidth!==0&&r.uint32(173).float(t.minWidth),t.minHeightUnit!==0&&r.uint32(176).int32(t.minHeightUnit),t.minHeight!==0&&r.uint32(189).float(t.minHeight),t.maxWidthUnit!==0&&r.uint32(192).int32(t.maxWidthUnit),t.maxWidth!==0&&r.uint32(205).float(t.maxWidth),t.maxHeightUnit!==0&&r.uint32(208).int32(t.maxHeightUnit),t.maxHeight!==0&&r.uint32(221).float(t.maxHeight),t.positionLeftUnit!==0&&r.uint32(224).int32(t.positionLeftUnit),t.positionLeft!==0&&r.uint32(237).float(t.positionLeft),t.positionTopUnit!==0&&r.uint32(240).int32(t.positionTopUnit),t.positionTop!==0&&r.uint32(253).float(t.positionTop),t.positionRightUnit!==0&&r.uint32(256).int32(t.positionRightUnit),t.positionRight!==0&&r.uint32(269).float(t.positionRight),t.positionBottomUnit!==0&&r.uint32(272).int32(t.positionBottomUnit),t.positionBottom!==0&&r.uint32(285).float(t.positionBottom),t.marginLeftUnit!==0&&r.uint32(288).int32(t.marginLeftUnit),t.marginLeft!==0&&r.uint32(301).float(t.marginLeft),t.marginTopUnit!==0&&r.uint32(304).int32(t.marginTopUnit),t.marginTop!==0&&r.uint32(317).float(t.marginTop),t.marginRightUnit!==0&&r.uint32(320).int32(t.marginRightUnit),t.marginRight!==0&&r.uint32(333).float(t.marginRight),t.marginBottomUnit!==0&&r.uint32(336).int32(t.marginBottomUnit),t.marginBottom!==0&&r.uint32(349).float(t.marginBottom),t.paddingLeftUnit!==0&&r.uint32(352).int32(t.paddingLeftUnit),t.paddingLeft!==0&&r.uint32(365).float(t.paddingLeft),t.paddingTopUnit!==0&&r.uint32(368).int32(t.paddingTopUnit),t.paddingTop!==0&&r.uint32(381).float(t.paddingTop),t.paddingRightUnit!==0&&r.uint32(384).int32(t.paddingRightUnit),t.paddingRight!==0&&r.uint32(397).float(t.paddingRight),t.paddingBottomUnit!==0&&r.uint32(400).int32(t.paddingBottomUnit),t.paddingBottom!==0&&r.uint32(413).float(t.paddingBottom),r}e.encode=n;function i(t,r){let o=t instanceof ci.default.Reader?t:ci.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=kl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.parent=o.int32();continue;case 2:if(a!==16)break;c.rightOf=o.int32();continue;case 3:if(a!==24)break;c.alignContent=o.int32();continue;case 4:if(a!==32)break;c.alignItems=o.int32();continue;case 5:if(a!==40)break;c.flexWrap=o.int32();continue;case 6:if(a!==53)break;c.flexShrink=o.float();continue;case 7:if(a!==56)break;c.positionType=o.int32();continue;case 8:if(a!==64)break;c.alignSelf=o.int32();continue;case 9:if(a!==72)break;c.flexDirection=o.int32();continue;case 10:if(a!==80)break;c.justifyContent=o.int32();continue;case 11:if(a!==88)break;c.overflow=o.int32();continue;case 12:if(a!==96)break;c.display=o.int32();continue;case 13:if(a!==104)break;c.flexBasisUnit=o.int32();continue;case 14:if(a!==117)break;c.flexBasis=o.float();continue;case 15:if(a!==125)break;c.flexGrow=o.float();continue;case 16:if(a!==128)break;c.widthUnit=o.int32();continue;case 17:if(a!==141)break;c.width=o.float();continue;case 18:if(a!==144)break;c.heightUnit=o.int32();continue;case 19:if(a!==157)break;c.height=o.float();continue;case 20:if(a!==160)break;c.minWidthUnit=o.int32();continue;case 21:if(a!==173)break;c.minWidth=o.float();continue;case 22:if(a!==176)break;c.minHeightUnit=o.int32();continue;case 23:if(a!==189)break;c.minHeight=o.float();continue;case 24:if(a!==192)break;c.maxWidthUnit=o.int32();continue;case 25:if(a!==205)break;c.maxWidth=o.float();continue;case 26:if(a!==208)break;c.maxHeightUnit=o.int32();continue;case 27:if(a!==221)break;c.maxHeight=o.float();continue;case 28:if(a!==224)break;c.positionLeftUnit=o.int32();continue;case 29:if(a!==237)break;c.positionLeft=o.float();continue;case 30:if(a!==240)break;c.positionTopUnit=o.int32();continue;case 31:if(a!==253)break;c.positionTop=o.float();continue;case 32:if(a!==256)break;c.positionRightUnit=o.int32();continue;case 33:if(a!==269)break;c.positionRight=o.float();continue;case 34:if(a!==272)break;c.positionBottomUnit=o.int32();continue;case 35:if(a!==285)break;c.positionBottom=o.float();continue;case 36:if(a!==288)break;c.marginLeftUnit=o.int32();continue;case 37:if(a!==301)break;c.marginLeft=o.float();continue;case 38:if(a!==304)break;c.marginTopUnit=o.int32();continue;case 39:if(a!==317)break;c.marginTop=o.float();continue;case 40:if(a!==320)break;c.marginRightUnit=o.int32();continue;case 41:if(a!==333)break;c.marginRight=o.float();continue;case 42:if(a!==336)break;c.marginBottomUnit=o.int32();continue;case 43:if(a!==349)break;c.marginBottom=o.float();continue;case 44:if(a!==352)break;c.paddingLeftUnit=o.int32();continue;case 45:if(a!==365)break;c.paddingLeft=o.float();continue;case 46:if(a!==368)break;c.paddingTopUnit=o.int32();continue;case 47:if(a!==381)break;c.paddingTop=o.float();continue;case 48:if(a!==384)break;c.paddingRightUnit=o.int32();continue;case 49:if(a!==397)break;c.paddingRight=o.float();continue;case 50:if(a!==400)break;c.paddingBottomUnit=o.int32();continue;case 51:if(a!==413)break;c.paddingBottom=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Eo||(Eo={}));var pf={COMPONENT_ID:1050,serialize(e,n){let i=Eo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Eo.decode(e.buffer(),e.remainingBytes())},create(){return Eo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiTransform"}};var si=le(me());var mf;(function(e){e[e.VS_NONE=0]="VS_NONE",e[e.VS_ERROR=1]="VS_ERROR",e[e.VS_LOADING=2]="VS_LOADING",e[e.VS_READY=3]="VS_READY",e[e.VS_PLAYING=4]="VS_PLAYING",e[e.VS_BUFFERING=5]="VS_BUFFERING",e[e.VS_SEEKING=6]="VS_SEEKING",e[e.VS_PAUSED=7]="VS_PAUSED"})(mf||(mf={}));function wl(){return{timestamp:0,tickNumber:0,currentOffset:0,videoLength:0,state:0}}var xo;(function(e){function n(t,r=si.default.Writer.create()){return t.timestamp!==0&&r.uint32(8).uint32(t.timestamp),t.tickNumber!==0&&r.uint32(16).uint32(t.tickNumber),t.currentOffset!==0&&r.uint32(29).float(t.currentOffset),t.videoLength!==0&&r.uint32(37).float(t.videoLength),t.state!==0&&r.uint32(40).int32(t.state),r}e.encode=n;function i(t,r){let o=t instanceof si.default.Reader?t:si.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=wl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.timestamp=o.uint32();continue;case 2:if(a!==16)break;c.tickNumber=o.uint32();continue;case 3:if(a!==29)break;c.currentOffset=o.float();continue;case 4:if(a!==37)break;c.videoLength=o.float();continue;case 5:if(a!==40)break;c.state=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(xo||(xo={}));var hf={COMPONENT_ID:1044,serialize(e,n){let i=xo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return xo.decode(e.buffer(),e.remainingBytes())},create(){return xo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBVideoEvent"}};var fi=le(me());function Nl(){return{src:"",playing:void 0,position:void 0,volume:void 0,playbackRate:void 0,loop:void 0}}var go;(function(e){function n(t,r=fi.default.Writer.create()){return t.src!==""&&r.uint32(10).string(t.src),t.playing!==void 0&&r.uint32(16).bool(t.playing),t.position!==void 0&&r.uint32(29).float(t.position),t.volume!==void 0&&r.uint32(37).float(t.volume),t.playbackRate!==void 0&&r.uint32(45).float(t.playbackRate),t.loop!==void 0&&r.uint32(48).bool(t.loop),r}e.encode=n;function i(t,r){let o=t instanceof fi.default.Reader?t:fi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Nl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.src=o.string();continue;case 2:if(a!==16)break;c.playing=o.bool();continue;case 3:if(a!==29)break;c.position=o.float();continue;case 4:if(a!==37)break;c.volume=o.float();continue;case 5:if(a!==45)break;c.playbackRate=o.float();continue;case 6:if(a!==48)break;c.loop=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(go||(go={}));var yf={COMPONENT_ID:1043,serialize(e,n){let i=go.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return go.decode(e.buffer(),e.remainingBytes())},create(){return go.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBVideoPlayer"}};var ui=le(me());function Il(){return{visible:void 0}}var _o;(function(e){function n(t,r=ui.default.Writer.create()){return t.visible!==void 0&&r.uint32(8).bool(t.visible),r}e.encode=n;function i(t,r){let o=t instanceof ui.default.Reader?t:ui.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Il();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.visible=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(_o||(_o={}));var bf={COMPONENT_ID:1081,serialize(e,n){let i=_o.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return _o.decode(e.buffer(),e.remainingBytes())},create(){return _o.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBVisibilityComponent"}};var ya=e=>e.defineComponentFromSchema("core::Animator",is),ba=e=>e.defineComponentFromSchema("core::AudioSource",as),Ef=e=>e.defineComponentFromSchema("core::AudioStream",cs),Ea=e=>e.defineComponentFromSchema("core::AvatarAttach",fs),xf=e=>e.defineComponentFromSchema("core::AvatarModifierArea",ms),gf=e=>e.defineComponentFromSchema("core::AvatarShape",As),_f=e=>e.defineComponentFromSchema("core::Billboard",ws),Tf=e=>e.defineComponentFromSchema("core::CameraMode",Ns),Sf=e=>e.defineComponentFromSchema("core::CameraModeArea",Is),Rf=e=>e.defineComponentFromSchema("core::EngineInfo",Os),xa=e=>e.defineComponentFromSchema("core::GltfContainer",Cs),Af=e=>e.defineComponentFromSchema("core::GltfContainerLoadingState",Ms),ga=e=>e.defineComponentFromSchema("core::Material",Ps),kf=e=>e.defineComponentFromSchema("core::MeshCollider",Us),_a=e=>e.defineComponentFromSchema("core::MeshRenderer",Ls),wf=e=>e.defineComponentFromSchema("core::NftShape",Ds),di=e=>e.defineComponentFromSchema("core::PointerEvents",Ws),li=e=>e.defineValueSetComponentFromSchema("core::PointerEventsResult",Vs,{timestampFunction:n=>n.timestamp,maxElements:100}),Nf=e=>e.defineComponentFromSchema("core::PointerLock",Hs),Ta=e=>e.defineComponentFromSchema("core::Raycast",js),Sa=e=>e.defineComponentFromSchema("core::RaycastResult",qs),If=e=>e.defineComponentFromSchema("core::TextShape",Ys),Of=e=>e.defineComponentFromSchema("core::UiBackground",Zs),Cf=e=>e.defineComponentFromSchema("core::UiCanvasInformation",Xs),Mf=e=>e.defineComponentFromSchema("core::UiDropdown",Ks),vf=e=>e.defineComponentFromSchema("core::UiDropdownResult",Qs),zf=e=>e.defineComponentFromSchema("core::UiInput",ef),Bf=e=>e.defineComponentFromSchema("core::UiInputResult",tf),Pf=e=>e.defineComponentFromSchema("core::UiText",nf),Uf=e=>e.defineComponentFromSchema("core::UiTransform",pf),Ra=e=>e.defineValueSetComponentFromSchema("core::VideoEvent",hf,{timestampFunction:n=>n.timestamp,maxElements:100}),Aa=e=>e.defineComponentFromSchema("core::VideoPlayer",yf),ka=e=>e.defineComponentFromSchema("core::VisibilityComponent",bf),wa={"core::Animator":ya,"core::AudioSource":ba,"core::AudioStream":Ef,"core::AvatarAttach":Ea,"core::AvatarModifierArea":xf,"core::AvatarShape":gf,"core::Billboard":_f,"core::CameraMode":Tf,"core::CameraModeArea":Sf,"core::EngineInfo":Rf,"core::GltfContainer":xa,"core::GltfContainerLoadingState":Af,"core::Material":ga,"core::MeshCollider":kf,"core::MeshRenderer":_a,"core::NftShape":wf,"core::PointerEvents":di,"core::PointerEventsResult":li,"core::PointerLock":Nf,"core::Raycast":Ta,"core::RaycastResult":Sa,"core::TextShape":If,"core::UiBackground":Of,"core::UiCanvasInformation":Cf,"core::UiDropdown":Mf,"core::UiDropdownResult":vf,"core::UiInput":zf,"core::UiInputResult":Bf,"core::UiText":Pf,"core::UiTransform":Uf,"core::VideoEvent":Ra,"core::VideoPlayer":Aa,"core::VisibilityComponent":ka};function Lf(e){let n=ya(e);function i(t,r){let o=n.getMutableOrNull(t);if(!o)return[null,null];let s=o.states.find(c=>c.clip===r);return s?[o,s]:[o,null]}return{...n,getClipOrNull(t,r){let[o,s]=i(t,r);return s},getClip(t,r){let[o,s]=i(t,r);if(!o)throw new Error(`There is no Animator found in the entity ${t}`);if(!s)throw new Error(`The Animator component of ${t} has no the state ${r}`);return s},playSingleAnimation(t,r,o=!0){let[s,c]=i(t,r);if(!s||!c)return!1;for(let a of s.states)a.playing=!1,a.shouldReset=!0;return c.playing=!0,c.shouldReset=o,!0},stopAllAnimations(t,r=!0){let o=n.getMutableOrNull(t);if(!o)return!1;for(let s of o.states)s.playing=!1,s.shouldReset=r;return!0}}}var Cl={Common(e){return{tex:{$case:"texture",texture:e}}},Avatar(e){return{tex:{$case:"avatarTexture",avatarTexture:e}}},Video(e){return{tex:{$case:"videoTexture",videoTexture:e}}}};function Ff(e){let n=ga(e);return{...n,Texture:Cl,setBasicMaterial(i,t){n.createOrReplace(i,{material:{$case:"unlit",unlit:t}})},setPbrMaterial(i,t){n.createOrReplace(i,{material:{$case:"pbr",pbr:t}})}}}function Df(e){let n=_a(e);return{...n,setBox(i,t){n.createOrReplace(i,{mesh:{$case:"box",box:{uvs:t||[]}}})},setPlane(i,t){n.createOrReplace(i,{mesh:{$case:"plane",plane:{uvs:t||[]}}})},setCylinder(i,t,r){n.createOrReplace(i,{mesh:{$case:"cylinder",cylinder:{radiusBottom:t,radiusTop:r}}})},setSphere(i){n.createOrReplace(i,{mesh:{$case:"sphere",sphere:{}}})}}}var pi=e=>({serialize(n,i){i.writeUint32(n.length);for(let t of n)e.serialize(t,i)},deserialize(n){let i=[],t=n.readUint32();for(let r=0;r<t;r++)i.push(e.deserialize(n));return i},create(){return[]},jsonSchema:{type:"array",items:e.jsonSchema,serializationType:"array"}});var Do={serialize(e,n){n.writeInt8(e?1:0)},deserialize(e){return e.readInt8()===1},create(){return!1},jsonSchema:{type:"boolean",serializationType:"boolean"}};var Wo={serialize(e,n){n.writeInt64(BigInt(e))},deserialize(e){return Number(e.readInt64())},create(){return 0},jsonSchema:{type:"integer",serializationType:"int64"}},tn={serialize(e,n){n.writeInt32(e)},deserialize(e){return e.readInt32()},create(){return 0},jsonSchema:{type:"integer",serializationType:"int32"}},Vo={serialize(e,n){n.writeInt16(e)},deserialize(e){return e.readInt16()},create(){return 0},jsonSchema:{type:"integer",serializationType:"int16"}},Ho={serialize(e,n){n.writeInt8(e)},deserialize(e){return e.readInt8()},create(){return 0},jsonSchema:{type:"integer",serializationType:"int8"}};var mi={serialize(e,n){n.writeUtf8String(e)},deserialize(e){return e.readUtf8String()},create(){return""},jsonSchema:{type:"string",serializationType:"utf8-string"}},Go=mi;function Ml(e){let t=0,r=0;for(let o in e){if(typeof e[o]=="number"){if(e[o]>2147483647||e[o]<-2147483648)throw new Error("Enum member values must be numbers within the range of -2147483648 to 2147483647.");t++}r++}if(r!==t*2)throw new Error("All enum member values must be of numeric type.")}function vl(e){for(let n in e)if(typeof e[n]!="string")throw new Error("All enum member values must be of string type.")}var zl="enum-int",hi=(e,n)=>(Ml(e),{serialize(i,t){tn.serialize(i,t)},deserialize(i){return tn.deserialize(i)},create(){return n},jsonSchema:{type:"integer",enum:Object.values(e).filter(i=>Number.isInteger(i)),default:n,serializationType:zl,enumObject:e}}),Bl="enum-string",yi=(e,n)=>(vl(e),{serialize(i,t){mi.serialize(i,t)},deserialize(i){return mi.deserialize(i)},create(){return n},jsonSchema:{type:"string",enum:Object.values(e),default:n,serializationType:Bl,enumObject:e}});var To={serialize(e,n){n.writeFloat32(e)},deserialize(e){return e.readFloat32()},create(){return 0},jsonSchema:{type:"number",serializationType:"float32"}},jo={serialize(e,n){n.writeFloat64(e)},deserialize(e){return e.readFloat64()},create(){return 0},jsonSchema:{type:"number",serializationType:"float64"}};var qo={serialize(e,n){n.writeFloat32(e.r),n.writeFloat32(e.g),n.writeFloat32(e.b)},deserialize(e){return{r:e.readFloat32(),g:e.readFloat32(),b:e.readFloat32()}},create(){return{r:0,g:0,b:0}},jsonSchema:{type:"object",properties:{r:{type:"number"},g:{type:"number"},b:{type:"number"}},serializationType:"color3"}};var Yo={serialize(e,n){n.writeFloat32(e.r),n.writeFloat32(e.g),n.writeFloat32(e.b),n.writeFloat32(e.a)},deserialize(e){return{r:e.readFloat32(),g:e.readFloat32(),b:e.readFloat32(),a:e.readFloat32()}},create(){return{r:0,g:0,b:0,a:0}},jsonSchema:{type:"object",properties:{r:{type:"number"},g:{type:"number"},b:{type:"number"},a:{type:"number"}},serializationType:"color4"}};var $o={serialize(e,n){n.writeInt32(e)},deserialize(e){return e.readInt32()},create(){return 0},jsonSchema:{type:"integer",serializationType:"entity"}};var Jo={serialize(e,n){n.writeFloat32(e.x),n.writeFloat32(e.y),n.writeFloat32(e.z),n.writeFloat32(e.w)},deserialize(e){return{x:e.readFloat32(),y:e.readFloat32(),z:e.readFloat32(),w:e.readFloat32()}},create(){return{x:0,y:0,z:0,w:0}},jsonSchema:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"},w:{type:"number"}},serializationType:"quaternion"}};var Zo={serialize(e,n){n.writeFloat32(e.x),n.writeFloat32(e.y),n.writeFloat32(e.z)},deserialize(e){return{x:e.readFloat32(),y:e.readFloat32(),z:e.readFloat32()}},create(){return{x:0,y:0,z:0}},jsonSchema:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"},w:{type:"number"}},serializationType:"vector3"}};var bi=(e,n)=>{let i=Object.keys(e).reduce((t,r)=>(t[r]=e[r].jsonSchema,t),{});return{serialize(t,r){for(let o in e)e[o].serialize(t[o],r)},deserialize(t){let r={};for(let o in e)r[o]=e[o].deserialize(t);return r},create(){let t={};for(let r in e)t[r]=e[r].create();return{...t,...n}},extend:t=>{let r={};for(let o in e)r[o]=e[o].create();return{...r,...n,...t}},jsonSchema:{type:"object",properties:i,serializationType:"map"}}};var Ei=e=>({serialize(n,i){n?(i.writeInt8(1),e.serialize(n,i)):i.writeInt8(0)},deserialize(n){if(n.readInt8())return e.deserialize(n)},create(){},jsonSchema:{type:e.jsonSchema.type,serializationType:"optional",optionalJsonSchema:e.jsonSchema}});var xi=e=>{let n=Object.keys(e),i=n.reduce((r,o,s)=>(r[o]=s,r),{}),t=n.reduce((r,o)=>(r[o]=e[o].jsonSchema,r),{});return{serialize({$case:r,value:o},s){let c=i[r.toString()]+1;s.writeUint8(c),e[r].serialize(o,s)},deserialize(r){let o=n[r.readInt8()-1],s=e[o].deserialize(r);return{$case:o,value:s}},create(){return{}},jsonSchema:{type:"object",properties:t,serializationType:"one-of"}}};var Wf=(e,n)=>n.includes(e.serializationType),Pl=e=>Wf(e,["one-of"]),Ul=()=>({type:{type:"object",serializationType:"unknown"},value:void 0}),gi=e=>Wf(e,["array","map"]),Na=(e,n,i)=>{let t=e[i],r=n[i];if(Pl(t)){let o=r;if(!o.$case)return Ul();let s=t.properties[o.$case];return gi(s)&&(n[i]={[o.$case]:o.value}),{type:s,value:o.value}}return{type:t,value:r}};var Vf={[Do.jsonSchema.serializationType]:Do,[Go.jsonSchema.serializationType]:Go,[To.jsonSchema.serializationType]:To,[jo.jsonSchema.serializationType]:jo,[Ho.jsonSchema.serializationType]:Ho,[Vo.jsonSchema.serializationType]:Vo,[tn.jsonSchema.serializationType]:tn,[Wo.jsonSchema.serializationType]:Wo,[Zo.jsonSchema.serializationType]:Zo,[Jo.jsonSchema.serializationType]:Jo,[qo.jsonSchema.serializationType]:qo,[Yo.jsonSchema.serializationType]:Yo,[$o.jsonSchema.serializationType]:$o};function So(e){if(Vf[e.serializationType])return Vf[e.serializationType];if(e.serializationType==="map"){let n=e,i={};for(let t in n.properties)i[t]=So(n.properties[t]);return bi(i)}if(e.serializationType==="optional")return Ei(So(e.optionalJsonSchema));if(e.serializationType==="array")return pi(So(e.items));if(e.serializationType==="enum-int"){let n=e;return hi(n.enumObject,n.default)}if(e.serializationType==="enum-string"){let n=e;return yi(n.enumObject,n.default)}if(e.serializationType==="one-of"){let n=e,i={};for(let t in n.properties)i[t]=So(n.properties[t]);return xi(i)}throw new Error(`${e.serializationType} is not supported as reverse schema generation.`)}function _i(e,n,i){if(e.serializationType==="map"){let{properties:t}=e,r=n;for(let o in t){let{type:s,value:c}=Na(t,r,o);if(s.serializationType!=="unknown")if(gi(s))_i(s,c,i);else{let a=i(c,s);a.changed&&(r[o]=a.value)}}}else if(e.serializationType==="array"){let{items:t}=e,r=n;for(let o=0,s=r.length;o<s;o++){let{type:c,value:a}=Na({items:t},{items:r[o]},"items");if(gi(c))_i(c,a,i);else{let d=i(a,c);d.changed&&(r[o]=d.value)}}}}var B;(function(e){e.Boolean=Do,e.String=Go,e.Float=To,e.Double=jo,e.Byte=Ho,e.Short=Vo,e.Int=tn,e.Int64=Wo,e.Number=To,e.Vector3=Zo,e.Quaternion=Jo,e.Color3=qo,e.Color4=Yo,e.Entity=$o,e.EnumNumber=hi,e.EnumString=yi,e.Array=pi,e.Map=bi,e.Optional=Ei,e.OneOf=xi,e.fromJson=So,e.mutateNestedValues=_i})(B||(B={}));function Ll(e){return e.defineComponent("core-schema::Name",{value:B.String})}var Hf=Ll;var Ia={serialize(e,n){let i=n.incrementWriteOffset(44);n.setFloat32(i,e.position.x),n.setFloat32(i+4,e.position.y),n.setFloat32(i+8,e.position.z),n.setFloat32(i+12,e.rotation.x),n.setFloat32(i+16,e.rotation.y),n.setFloat32(i+20,e.rotation.z),n.setFloat32(i+24,e.rotation.w),n.setFloat32(i+28,e.scale.x),n.setFloat32(i+32,e.scale.y),n.setFloat32(i+36,e.scale.z),n.setUint32(i+40,e.parent||0)},deserialize(e){let n=e.incrementReadOffset(44);return{position:{x:e.getFloat32(n),y:e.getFloat32(n+4),z:e.getFloat32(n+8)},rotation:{x:e.getFloat32(n+12),y:e.getFloat32(n+16),z:e.getFloat32(n+20),w:e.getFloat32(n+24)},scale:{x:e.getFloat32(n+28),y:e.getFloat32(n+32),z:e.getFloat32(n+36)},parent:e.getUint32(n+40)}},create(){return{position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0,w:1},parent:0}},extend(e){return{position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0,w:1},parent:0,...e}},jsonSchema:{type:"object",properties:{position:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}},scale:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}},rotation:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"},w:{type:"number"}}},parent:{type:"integer"}},serializationType:"transform"}};function Gf(e){let n=e.defineComponentFromSchema("core::Transform",Ia);return{...n,create(i,t){return n.create(i,Ia.extend(t))},createOrReplace(i,t){return n.createOrReplace(i,Ia.extend(t))}}}var vn=e=>Gf(e),jf=e=>Ff(e),qf=e=>Lf(e),Yf=e=>Df(e);var Ti=e=>Hf(e);var Oa={"core::Transform":1,"core::Animator":1042,"core::AudioSource":1020,"core::AudioStream":1021,"core::AvatarAttach":1073,"core::AvatarBase":1087,"core::AvatarEmoteCommand":1088,"core::AvatarEquippedData":1091,"core::AvatarModifierArea":1070,"core::AvatarShape":1080,"core::Billboard":1090,"core::CameraMode":1072,"core::CameraModeArea":1071,"core::EngineInfo":1048,"core::GltfContainer":1041,"core::GltfContainerLoadingState":1049,"core::Material":1017,"core::MeshCollider":1019,"core::MeshRenderer":1018,"core::NftShape":1040,"core::PlayerIdentityData":1089,"core::PointerEvents":1062,"core::PointerEventsResult":1063,"core::PointerLock":1074,"core::Raycast":1067,"core::RaycastResult":1068,"core::TextShape":1030,"core::UiBackground":1053,"core::UiCanvasInformation":1054,"core::UiDropdown":1094,"core::UiDropdownResult":1096,"core::UiInput":1093,"core::UiInputResult":1095,"core::UiText":1052,"core::UiTransform":1050,"core::VideoEvent":1044,"core::VideoPlayer":1043,"core::VisibilityComponent":1081};var Jf=le(yr());var Fl=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Dl(e,n){let i=~~n^-1;for(let t=0;t<e.length;t++)i=Fl[(i^e[t])&255]^i>>>8;return i^-1}function $f(e,n=0){return Dl(e,n)>>>0}var Ca=2048;function Vt(e){if(Oa[e])return Oa[e];let n=new Uint8Array(128);return Jf.write(e,n,0),($f(n)+Ca&4294967295)>>>0}var Ma=typeof process=="object"&&!1||!1;function Xo(e,n){if(Ma&&e&&typeof e=="object"&&typeof e.then=="function")throw new Error(n);return e}function Zf(){let e=new Map;return{addTo(n,i){if(i<0)return!1;let t=e.get(n);return t!==void 0&&t>=i||e.set(n,i),!0},has(n,i){let t=e.get(n);return t!==void 0&&t>=i},getMap(){return e}}}var zn=65535,Wl=4294901760,S1=zn+1,va=zn,Si=512,Vl=va,Bt;(function(e){function n(t){return[(t&zn)>>>0,((t&Wl)>>16&zn)>>>0]}e.fromEntityId=n;function i(t,r){return(t&zn|(r&zn)<<16)>>>0}e.toEntityId=i})(Bt||(Bt={}));var Ve;(function(e){e[e.Unknown=0]="Unknown",e[e.UsedEntity=1]="UsedEntity",e[e.Removed=2]="Removed",e[e.Reserved=3]="Reserved"})(Ve||(Ve={}));function Xf(){let e=Si,n,i,t=new Set,r=[],o=Zf(),s=Vl;function c(u,b){s=u,i=b,n=b[0]}function a(u){if(e>va-1)throw new Error(`It fails trying to generate an entity out of range ${va}.`);if(u&&n>i[1])throw new Error(`Max amount of network entities reached ${i[1]} `);if(!u&&e>=s)throw new Error(`Max amount of local entities reached ${s}`);let b=u?n++:e++,h=o.getMap().has(b)?o.getMap().get(b)+1:0,T=Bt.toEntityId(b,h);return t.has(T)?a():(t.add(T),T)}function d(u){if(u&&!i)throw new Error("Network entities ranged not initialized. Connect to a CRDT Server");let b=(i&&[...t.values()].filter(T=>{let[v]=Bt.fromEntityId(T);return v>=i[0]&&v<=i[1]}).length)??0,h=t.size-b;if(!u&&h+Si>=e||u&&b+i[0]>=n)return a(u);for(let[T,v]of o.getMap())if(v<zn){if(u&&(T<i[0]||T>i[1])||!u&&T>=s)continue;let j=Bt.toEntityId(T,v+1);if(!t.has(j)&&!r.includes(j))return t.add(j),j}return a(u)}function l(u){return u<Si?!1:(t.has(u)?(t.delete(u),r.push(u)):_(u),!0)}function w(){let u=r;if(u.length){r=[];for(let b of u){let[h,T]=Bt.fromEntityId(b);o.addTo(h,T)}}return u}function _(u){let[b,h]=Bt.fromEntityId(u);o.addTo(b,h);for(let T=0;T<=h;T++)t.delete(Bt.toEntityId(b,T));return!0}function O(u){let[b,h]=Bt.fromEntityId(u);if(o.has(b,h))return!1;if(h>0){for(let T=0;T<=h-1;T++)t.delete(Bt.toEntityId(b,T));o.addTo(b,h-1)}return t.add(u),!0}function x(u){let[b,h]=Bt.fromEntityId(u);if(b<Si)return Ve.Reserved;if(t.has(u))return Ve.UsedEntity;let T=o.getMap().get(b);return T!==void 0&&T>=h?Ve.Removed:Ve.Unknown}return{setNetworkEntitiesRange:c,generateEntity:d,removeEntity:l,getExistingEntities(){return new Set(t)},getEntityState:x,releaseRemovedEntities:w,updateRemovedEntity:_,updateUsedEntity:O}}var Ro=le(yr()),Re=function(e,n,i,t){if(i==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!t:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?t:i==="a"?t.call(e):t?t.value:n.get(e)},ge,dt,Xe;function Hl(e,n){let i=Math.max(e,n)+1024;return Math.ceil(i/1024)*1024}var Gl=10240,Ye=class{constructor(n,i,t){ge.add(this),this._buffer=n||new Uint8Array(Gl),this.view=new DataView(this._buffer.buffer,this._buffer.byteOffset),this.woffset=t??(n?this._buffer.length:null)??0,this.roffset=i??0}buffer(){return this._buffer}bufferLength(){return this._buffer.length}resetBuffer(){this.roffset=0,this.woffset=0}currentReadOffset(){return this.roffset}currentWriteOffset(){return this.woffset}incrementReadOffset(n){return Re(this,ge,"m",Xe).call(this,n)}remainingBytes(){return this.woffset-this.roffset}readFloat32(){return this.view.getFloat32(Re(this,ge,"m",Xe).call(this,4),!0)}readFloat64(){return this.view.getFloat64(Re(this,ge,"m",Xe).call(this,8),!0)}readInt8(){return this.view.getInt8(Re(this,ge,"m",Xe).call(this,1))}readInt16(){return this.view.getInt16(Re(this,ge,"m",Xe).call(this,2),!0)}readInt32(){return this.view.getInt32(Re(this,ge,"m",Xe).call(this,4),!0)}readInt64(){return this.view.getBigInt64(Re(this,ge,"m",Xe).call(this,8),!0)}readUint8(){return this.view.getUint8(Re(this,ge,"m",Xe).call(this,1))}readUint16(){return this.view.getUint16(Re(this,ge,"m",Xe).call(this,2),!0)}readUint32(){return this.view.getUint32(Re(this,ge,"m",Xe).call(this,4),!0)}readUint64(){return this.view.getBigUint64(Re(this,ge,"m",Xe).call(this,8),!0)}readBuffer(){let n=this.view.getUint32(Re(this,ge,"m",Xe).call(this,4),!0);return this._buffer.subarray(Re(this,ge,"m",Xe).call(this,n),Re(this,ge,"m",Xe).call(this,0))}readUtf8String(){let n=this.view.getUint32(Re(this,ge,"m",Xe).call(this,4),!0);return Ro.read(this._buffer,Re(this,ge,"m",Xe).call(this,n),Re(this,ge,"m",Xe).call(this,0))}incrementWriteOffset(n){return Re(this,ge,"m",dt).call(this,n)}toBinary(){return this._buffer.subarray(0,this.woffset)}toCopiedBinary(){return new Uint8Array(this.toBinary())}writeBuffer(n,i=!0){i&&this.writeUint32(n.byteLength);let t=Re(this,ge,"m",dt).call(this,n.byteLength);this._buffer.set(n,t)}writeUtf8String(n,i=!0){let t=Ro.length(n);i&&this.writeUint32(t);let r=Re(this,ge,"m",dt).call(this,t);Ro.write(n,this._buffer,r)}writeFloat32(n){let i=Re(this,ge,"m",dt).call(this,4);this.view.setFloat32(i,n,!0)}writeFloat64(n){let i=Re(this,ge,"m",dt).call(this,8);this.view.setFloat64(i,n,!0)}writeInt8(n){let i=Re(this,ge,"m",dt).call(this,1);this.view.setInt8(i,n)}writeInt16(n){let i=Re(this,ge,"m",dt).call(this,2);this.view.setInt16(i,n,!0)}writeInt32(n){let i=Re(this,ge,"m",dt).call(this,4);this.view.setInt32(i,n,!0)}writeInt64(n){let i=Re(this,ge,"m",dt).call(this,8);this.view.setBigInt64(i,n,!0)}writeUint8(n){let i=Re(this,ge,"m",dt).call(this,1);this.view.setUint8(i,n)}writeUint16(n){let i=Re(this,ge,"m",dt).call(this,2);this.view.setUint16(i,n,!0)}writeUint32(n){let i=Re(this,ge,"m",dt).call(this,4);this.view.setUint32(i,n,!0)}writeUint64(n){let i=Re(this,ge,"m",dt).call(this,8);this.view.setBigUint64(i,n,!0)}getFloat32(n){return this.view.getFloat32(n,!0)}getFloat64(n){return this.view.getFloat64(n,!0)}getInt8(n){return this.view.getInt8(n)}getInt16(n){return this.view.getInt16(n,!0)}getInt32(n){return this.view.getInt32(n,!0)}getInt64(n){return this.view.getBigInt64(n,!0)}getUint8(n){return this.view.getUint8(n)}getUint16(n){return this.view.getUint16(n,!0)}getUint32(n){return this.view.getUint32(n,!0)}getUint64(n){return this.view.getBigUint64(n,!0)}setFloat32(n,i){this.view.setFloat32(n,i,!0)}setFloat64(n,i){this.view.setFloat64(n,i,!0)}setInt8(n,i){this.view.setInt8(n,i)}setInt16(n,i){this.view.setInt16(n,i,!0)}setInt32(n,i){this.view.setInt32(n,i,!0)}setInt64(n,i){this.view.setBigInt64(n,i,!0)}setUint8(n,i){this.view.setUint8(n,i)}setUint16(n,i){this.view.setUint16(n,i,!0)}setUint32(n,i){this.view.setUint32(n,i,!0)}setUint64(n,i){this.view.setBigUint64(n,i,!0)}};ge=new WeakSet,dt=function(n){if(this.woffset+n>this._buffer.byteLength){let i=Hl(this._buffer.byteLength,this.woffset+n),t=new Uint8Array(i);t.set(this._buffer);let r=this._buffer.byteOffset;this._buffer=t,this.view=new DataView(this._buffer.buffer,r)}return this.woffset+=n,this.woffset-n},Xe=function(n){if(this.roffset+n>this.woffset)throw new Error("Outside of the bounds of writen data.");return this.roffset+=n,this.roffset-n};var de;(function(e){e[e.RESERVED=0]="RESERVED",e[e.PUT_COMPONENT=1]="PUT_COMPONENT",e[e.DELETE_COMPONENT=2]="DELETE_COMPONENT",e[e.DELETE_ENTITY=3]="DELETE_ENTITY",e[e.APPEND_VALUE=4]="APPEND_VALUE",e[e.MAX_MESSAGE_TYPE=5]="MAX_MESSAGE_TYPE"})(de||(de={}));var wt=8,yt;(function(e){e[e.StateUpdatedTimestamp=1]="StateUpdatedTimestamp",e[e.StateOutdatedTimestamp=2]="StateOutdatedTimestamp",e[e.NoChanges=3]="NoChanges",e[e.StateOutdatedData=4]="StateOutdatedData",e[e.StateUpdatedData=5]="StateUpdatedData",e[e.EntityWasDeleted=6]="EntityWasDeleted",e[e.EntityDeleted=7]="EntityDeleted"})(yt||(yt={}));var Nt;(function(e){function n(o){let s=o.remainingBytes();if(s<wt)return!1;let c=o.getUint32(o.currentReadOffset());return!(s<c)}e.validate=n;function i(o){return n(o)?{length:o.readUint32(),type:o.readUint32()}:null}e.readHeader=i;function t(o){if(!n(o))return null;let s=o.currentReadOffset();return{length:o.getUint32(s),type:o.getUint32(s+4)}}e.getHeader=t;function r(o){let s=t(o);return s?(o.incrementReadOffset(s.length),!0):!1}e.consumeMessage=r})(Nt||(Nt={}));var on;(function(e){e.MESSAGE_HEADER_LENGTH=12;function n(t,r,o,s){let c=wt+e.MESSAGE_HEADER_LENGTH,a=s.incrementWriteOffset(c);s.setUint32(a,c),s.setUint32(a+4,de.DELETE_COMPONENT),s.setUint32(a+8,t),s.setUint32(a+12,r),s.setUint32(a+16,o)}e.write=n;function i(t){let r=Nt.readHeader(t);if(!r)return null;if(r.type!==de.DELETE_COMPONENT)throw new Error("DeleteComponentOperation tried to read another message type.");return{...r,entityId:t.readUint32(),componentId:t.readUint32(),timestamp:t.readUint32()}}e.read=i})(on||(on={}));var Bn;(function(e){e.MESSAGE_HEADER_LENGTH=16;function n(t,r,o,s,c){let a=c.incrementWriteOffset(wt+e.MESSAGE_HEADER_LENGTH);c.writeBuffer(s,!1);let d=c.currentWriteOffset()-a;c.setUint32(a,d),c.setUint32(a+4,de.APPEND_VALUE),c.setUint32(a+8,t),c.setUint32(a+12,o),c.setUint32(a+16,r);let l=d-e.MESSAGE_HEADER_LENGTH-wt;c.setUint32(a+20,l)}e.write=n;function i(t){let r=Nt.readHeader(t);if(!r)return null;if(r.type!==de.APPEND_VALUE)throw new Error("AppendValueOperation tried to read another message type.");return{...r,entityId:t.readUint32(),componentId:t.readUint32(),timestamp:t.readUint32(),data:t.readBuffer()}}e.read=i})(Bn||(Bn={}));var Ko;(function(e){e.MESSAGE_HEADER_LENGTH=4;function n(t,r){r.writeUint32(wt+4),r.writeUint32(de.DELETE_ENTITY),r.writeUint32(t)}e.write=n;function i(t){let r=Nt.readHeader(t);if(!r)return null;if(r.type!==de.DELETE_ENTITY)throw new Error("DeleteEntity tried to read another message type.");return{...r,entityId:t.readUint32()}}e.read=i})(Ko||(Ko={}));var rn;(function(e){e.MESSAGE_HEADER_LENGTH=16;function n(t,r,o,s,c){let a=c.incrementWriteOffset(wt+e.MESSAGE_HEADER_LENGTH);c.writeBuffer(s,!1);let d=c.currentWriteOffset()-a;c.setUint32(a,d),c.setUint32(a+4,de.PUT_COMPONENT),c.setUint32(a+8,t),c.setUint32(a+12,o),c.setUint32(a+16,r);let l=d-e.MESSAGE_HEADER_LENGTH-wt;c.setUint32(a+20,l)}e.write=n;function i(t){let r=Nt.readHeader(t);if(!r)return null;if(r.type!==de.PUT_COMPONENT)throw new Error("PutComponentOperation tried to read another message type.");return{...r,entityId:t.readUint32(),componentId:t.readUint32(),timestamp:t.readUint32(),data:t.readBuffer()}}e.read=i})(rn||(rn={}));function Kf(e,n){let i=[],t=[],r=[],o=[];function s(w){return function(O){let x=new Ye(O),u;for(;u=Nt.getHeader(x);){let b=x.currentReadOffset();if(u.type===de.DELETE_COMPONENT){let h=on.read(x);t.push({...h,transportId:w,messageBuffer:x.buffer().subarray(b,x.currentReadOffset())})}else if(u.type===de.PUT_COMPONENT){let h=rn.read(x);t.push({...h,transportId:w,messageBuffer:x.buffer().subarray(b,x.currentReadOffset())})}else if(u.type===de.DELETE_ENTITY){let h=Ko.read(x);t.push({...h,transportId:w,messageBuffer:x.buffer().subarray(b,x.currentReadOffset())})}else if(u.type===de.APPEND_VALUE){let h=Bn.read(x);t.push({...h,transportId:w,messageBuffer:x.buffer().subarray(b,x.currentReadOffset())})}else x.incrementReadOffset(u.length)}}}function c(w){return w.splice(0,w.length)}async function a(){let w=c(t),_=new Ye,O=[];for(let x of w)if(x.type===de.DELETE_ENTITY)O.push(x.entityId),r.push(x);else{let u=e.entityContainer.getEntityState(x.entityId);if(u===Ve.Removed)continue;u===Ve.Unknown&&e.entityContainer.updateUsedEntity(x.entityId);let b=e.getComponentOrNull(x.componentId);if(b){let[h,T]=b.updateFromCrdt(x);if(h){let v=_.currentWriteOffset();h.type===de.PUT_COMPONENT?rn.write(x.entityId,h.timestamp,h.componentId,h.data,_):h.type===de.DELETE_COMPONENT&&on.write(x.entityId,b.componentId,h.timestamp,_),o.push({...x,messageBuffer:_.buffer().subarray(v,_.currentWriteOffset())})}else r.push(x),n&&n(x.entityId,x.type,b,T)}else r.push(x)}for(let x of O){for(let u=o.length-1;u>=0;u--)o[u].entityId===x&&o[u].type!==de.DELETE_ENTITY&&o.splice(u,1);for(let u of e.componentsIter())u.entityDeleted(x,!0);e.entityContainer.updateRemovedEntity(x),n&&n(x,de.DELETE_ENTITY)}}async function d(w){let _=c(r),O=c(o),x=new Ye;for(let b of e.componentsIter())for(let h of b.getCrdtUpdates()){let T=x.currentWriteOffset();if(i.some(v=>v.filter(h))&&(h.type===de.PUT_COMPONENT?rn.write(h.entityId,h.timestamp,h.componentId,h.data,x):h.type===de.DELETE_COMPONENT?on.write(h.entityId,b.componentId,h.timestamp,x):h.type===de.APPEND_VALUE&&Bn.write(h.entityId,h.timestamp,h.componentId,h.data,x),_.push({...h,messageBuffer:x.buffer().subarray(T,x.currentWriteOffset())}),n)){let v=h.type===de.PUT_COMPONENT||h.type===de.APPEND_VALUE?b.get(h.entityId):void 0;n(h.entityId,h.type,b,v)}}for(let b of w){let h=x.currentWriteOffset();Ko.write(b,x),_.push({type:de.DELETE_ENTITY,entityId:b,messageBuffer:x.buffer().subarray(h,x.currentWriteOffset())}),n&&n(b,de.DELETE_ENTITY)}let u=new Ye;for(let b in i){let h=Number(b),T=i[h];u.resetBuffer();for(let j of O)j.transportId===h&&!_.find(oe=>oe.entityId===j.entityId&&oe.componentId&&oe.componentId===j.componentId)&&u.writeBuffer(j.messageBuffer,!1);for(let j of _)j.transportId!==h&&T.filter(j)&&u.writeBuffer(j.messageBuffer,!1);let v=u.currentWriteOffset()?u.toBinary():new Uint8Array([]);await T.send(v)}}function l(w){let _=i.push(w)-1;w.onmessage=s(_)}return{sendMessages:d,receiveMessages:a,addTransport:l}}var Qf;(function(e){let n;(function(i){i[i.NETWORKED=0]="NETWORKED",i[i.RENDERER=1]="RENDERER"})(n=e.SynchronizedEntityType||(e.SynchronizedEntityType={}))})(Qf||(Qf={}));function za(e,n){if(e===n)return 0;if(e===null&&n!==null)return-1;if(e!==null&&n===null)return 1;if(e instanceof Uint8Array&&n instanceof Uint8Array){let i=e.byteLength-n.byteLength;if(i!==0)return i>0?1:-1;let t;for(let r=0,o=e.byteLength;r<o;r++)if(t=e[r]-n[r],t!==0)return t>0?1:-1;return 0}if(typeof e=="string"){let i=e.length-n.length;return i!==0?i>0?1:-1:e.localeCompare(n)}return e>n?1:-1}function Ba(e){return Object.freeze({...e})}function jl(e,n){let i=(n.get(e)||0)+1;return n.set(e,i),i}function ql(e,n,i,t){return function(o,s){for(let[c,a]of n)if(!(s&&!s(c)))if(t.has(c)){let d=t.get(c),l=new Ye;i.serialize(d,l),rn.write(c,a,e,l.toBinary(),o)}else on.write(c,e,a,o)}}function Yl(e,n,i,t){function r(o){let{entityId:s,timestamp:c}=o,a=n.get(s);if(a===void 0||a<c)return yt.StateUpdatedTimestamp;if(a>c)return yt.StateOutdatedTimestamp;if(o.type===de.DELETE_COMPONENT&&!t.has(s))return yt.NoChanges;let d=0;if(t.has(s)){let l=new Ye;i.serialize(t.get(s),l),d=za(l.toBinary(),o.data||null)}else d=za(null,o.data);return d===0?yt.NoChanges:d>0?yt.StateOutdatedData:yt.StateUpdatedData}return o=>{if(o.type!==de.PUT_COMPONENT&&o.type!==de.DELETE_COMPONENT)return[null,t.get(o.entityId)];let s=r(o),c=o.entityId;switch(s){case yt.StateUpdatedData:case yt.StateUpdatedTimestamp:{if(n.set(c,o.timestamp),o.type===de.PUT_COMPONENT){let a=new Ye(o.data);t.set(c,i.deserialize(a))}else t.delete(c);return[null,t.get(c)]}case yt.StateOutdatedTimestamp:case yt.StateOutdatedData:if(t.has(c)){let a=new Ye;return i.serialize(t.get(c),a),[{type:de.PUT_COMPONENT,componentId:e,data:a.toBinary(),entityId:c,timestamp:n.get(c)},t.get(c)]}else return[{type:de.DELETE_COMPONENT,componentId:e,entityId:c,timestamp:n.get(c)},void 0]}return[null,t.get(c)]}}function $l(e,n,i,t,r){return function*(){for(let o of i){let s=jl(o,n);if(r.has(o)){let c=new Ye;t.serialize(r.get(o),c),yield{type:de.PUT_COMPONENT,componentId:e,entityId:o,data:c.toBinary(),timestamp:s}}else yield{type:de.DELETE_COMPONENT,componentId:e,entityId:o,timestamp:s}}i.clear()}}function Pa(e,n,i){let t=new Map,r=new Set,o=new Map;return{get componentId(){return n},get componentName(){return e},get componentType(){return 0},schema:i,has(s){return t.has(s)},deleteFrom(s,c=!0){let a=t.get(s);return t.delete(s)&&c&&r.add(s),a||null},entityDeleted(s,c){t.delete(s)&&c&&r.add(s)},getOrNull(s){let c=t.get(s);return c?Ba(c):null},get(s){let c=t.get(s);if(!c)throw new Error(`[getFrom] Component ${e} for entity #${s} not found`);return Ba(c)},create(s,c){if(t.get(s))throw new Error(`[create] Component ${e} for ${s} already exists`);let d=c===void 0?i.create():i.extend?i.extend(c):c;return t.set(s,d),r.add(s),d},createOrReplace(s,c){let a=c===void 0?i.create():i.extend?i.extend(c):c;return t.set(s,a),r.add(s),a},getMutableOrNull(s){let c=t.get(s);return c?(r.add(s),c):null},getOrCreateMutable(s,c){let a=t.get(s);return a?(r.add(s),a):this.create(s,c)},getMutable(s){let c=this.getMutableOrNull(s);if(c===null)throw new Error(`[mutable] Component ${e} for ${s} not found`);return c},*iterator(){for(let[s,c]of t)yield[s,c]},*dirtyIterator(){for(let s of r)yield s},getCrdtUpdates:$l(n,o,r,i,t),updateFromCrdt:Yl(n,o,i,t),dumpCrdtStateToBuffer:ql(n,o,i,t)}}function eu(){let e=[];function n(){e.sort((r,o)=>o.priority-r.priority)}function i(r,o,s){let c=s??r.name;if(e.find(a=>a.fn===r))throw new Error(`System ${JSON.stringify(c)} already added to the engine`);e.push({fn:r,priority:o,name:c}),n()}function t(r){let o=-1;return typeof r=="string"?o=e.findIndex(s=>s.name===r):o=e.findIndex(s=>s.fn===r),o===-1?!1:(e.splice(o,1),n(),!0)}return{add:i,remove:t,getSystems(){return e}}}var Ua=nu(new Set);function tu(){throw new Error("The set is frozen")}function nu(e){return e.add=tu,e.clear=tu,e}function Jl(e,n){return e.timestamp>n.timestamp?1:-1}function ou(e,n,i,t){let r=new Map,o=new Set,s=[];function c(w){let _=w.raw.length;return _>1&&w.raw[_-1].timestamp<=w.raw[_-2].timestamp}function a(w){let _=r.get(w);if(_){for(c(_)&&_.raw.sort(Jl);_.raw.length>t.maxElements;)_.raw.shift();let O=nu(new Set(_?.raw.map(x=>x.value)));return _.frozenSet=O,O}else return Ua}function d(w,_){let O=r.get(w);O||(O={raw:[],frozenSet:Ua},r.set(w,O));let x=i.extend?i.extend(_):_,u=t.timestampFunction(x);return Ma&&Object.freeze(x),O.raw.push({value:x,timestamp:u}),{set:a(w),value:x}}return{get componentId(){return n},get componentName(){return e},get componentType(){return 1},schema:i,has(w){return r.has(w)},entityDeleted(w){r.delete(w)},get(w){let _=r.get(w);return _?_.frozenSet:Ua},addValue(w,_){let{set:O,value:x}=d(w,_);o.add(w);let u=new Ye;return i.serialize(x,u),s.push({componentId:n,data:u.toBinary(),entityId:w,timestamp:0,type:de.APPEND_VALUE}),O},*iterator(){for(let[w,_]of r)yield[w,_.frozenSet]},*dirtyIterator(){for(let w of o)yield w},getCrdtUpdates(){return o.clear(),s.splice(0,s.length)},updateFromCrdt(w){if(w.type===de.APPEND_VALUE){let _=new Ye(w.data);d(w.entityId,i.deserialize(_))}return[null,void 0]},dumpCrdtStateToBuffer:function(w,_){for(let[O,{raw:x}]of r)if(!(_&&!_(O)))for(let u of x){let b=new Ye;i.serialize(u.value,b),Bn.write(O,0,n,b.toBinary(),w)}}}}function*ru(e,n){if(n.has(e)){n.delete(e);for(let[i,t]of n)t.parent===e&&(yield*ru(i,n));yield e}}function Zl(e,n,i){let t=new Map(e.getEntitiesWith(i));return ru(n,t)}function iu(e,n){let i=vn(e);for(let t of Zl(e,n,i))e.removeEntity(t)}var au=[0,1,2,4,5,6,7,8,9,10,11,12,13],Xl=1<<20;function cu(e){let n=li(e),i={previousFrameMaxTimestamp:0,currentFrameMaxTimestamp:0,buttonState:new Map,thisFrameCommands:[]};function t(u,b,h){let T=n.get(h);for(let v of Array.from(T).reverse())if(v.button===b&&v.state===u)return v}function*r(u,b){let h=n.get(b);for(let T of Array.from(h).reverse())T.button===u&&(yield T)}function o(){let u=i.currentFrameMaxTimestamp;i.previousFrameMaxTimestamp=u,i.thisFrameCommands.length&&(i.thisFrameCommands=[]);for(let[,b]of e.getEntitiesWith(n)){let h=Array.from(b);for(let T=h.length-1;T>=0;T--){let v=h[T];if(v.timestamp>u&&(u=v.timestamp),v.timestamp>i.previousFrameMaxTimestamp&&i.thisFrameCommands.push(v),v.state===0||v.state===1){let j=i.buttonState.get(v.button);if(!j||v.timestamp>j.timestamp)i.buttonState.set(v.button,v);else break}}}i.currentFrameMaxTimestamp=u}e.addSystem(o,Xl,"@dcl/ecs#inputSystem");function s(u){return u>i.previousFrameMaxTimestamp&&u<=i.currentFrameMaxTimestamp}function c(u,b){if(u!==3)return a(u,b);for(let h of au){let T=a(h,b);if(T)return T}return null}function a(u,b){let h=null,T=null;for(let v of r(u,b))if(T){if(!h&&v.state===1){h=v;break}}else if(v.state===0){T=v;continue}return!T||!h?null:h.timestamp<T.timestamp&&s(T.timestamp)?{up:T,down:h}:null}function d(u,b,h){if(u!==3)return w(u,b,h);for(let T of au){let v=w(T,b,h);if(v)return v}return null}function l(u,b,h){if(h)return d(u,b,h);for(let T of i.thisFrameCommands)if((T.button===u||u===3)&&T.state===b)return T;return null}function w(u,b,h){let T=t(b,u,h);return T&&s(T.timestamp)?T:null}function _(u,b){return c(u,b)!==null}function O(u,b,h){if(h){let T=t(b,u,h);return T&&s(T.timestamp)||!1}else{for(let T of i.thisFrameCommands)if((T.button===u||u===3)&&T.state===b)return!0;return!1}}function x(u){return i.buttonState.get(u)?.state===1}return{isPressed:x,getClick:c,getInputCommand:l,isClicked:_,isTriggered:O}}var su;(function(e){e[e.LastWriteWinElementSet=0]="LastWriteWinElementSet",e[e.GrowOnlyValueSet=1]="GrowOnlyValueSet"})(su||(su={}));function Ql(){let e=Xf(),n=new Map,i=eu(),t,r=!1;function o(W,Y=1e5,g){i.add(W,Y,g)}function s(W){return i.remove(W)}function c(){if(!t)throw new Error("Network manager not initialized. Start CRDT Server");return t}function a(W,Y){return e.setNetworkEntitiesRange(W,Y),t={addEntity:()=>e.generateEntity(!0)},t}function d(){return e.generateEntity()}function l(W){for(let[,Y]of n)Y.entityDeleted(W,!0);return e.removeEntity(W)}function w(W){return iu({removeEntity:l,defineComponentFromSchema:O,getEntitiesWith:T},W)}function _(W,Y){if(r)throw new Error("Engine is already sealed. No components can be added at this stage");let g=Vt(W);if(n.get(g))throw new Error(`Component number ${g} was already registered.`);if(Y.componentName!==W)throw new Error(`Component name doesn't match componentDefinition.componentName ${W} != ${Y.componentName}`);if(Y.componentId!==g)throw new Error(`Component number doesn't match componentDefinition.componentId ${g} != ${Y.componentId}`);return n.set(g,Y),Y}function O(W,Y){let g=Vt(W),S=n.get(g);if(S)return S;if(r)throw new Error("Engine is already sealed. No components can be added at this stage");let M=Pa(W,g,Y);return n.set(g,M),M}function x(W,Y,g){let S=Vt(W),M=n.get(S);if(M)return M;if(r)throw new Error("Engine is already sealed. No components can be added at this stage");let P=ou(W,S,Y,g);return n.set(S,P),P}function u(W,Y,g){let S=Vt(W),M=n.get(S);if(M)return M;if(r)throw new Error("Engine is already sealed. No components can be added at this stage");let P=B.Map(Y,g),J=Pa(W,S,P),ne={...J,create(ie,K){return J.create(ie,K)},createOrReplace(ie,K){return J.createOrReplace(ie,K)}};return n.set(S,ne),ne}function b(W){let Y=typeof W=="number"?W:Vt(W),g=n.get(Y);if(!g)throw new Error(`Component ${Y} not found. You need to declare the components at the beginnig of the engine declaration`);return g}function h(W){let Y=typeof W=="number"?W:Vt(W);return n.get(Y)??null}function*T(...W){for(let[Y,...g]of j(...W))yield[Y,...g.map(S=>S.get(Y))]}function v(W){let Y=Ti({defineComponent:u});for(let[g,S]of T(Y))if(S.value===W)return g;return null}function*j(...W){let[Y,...g]=W;for(let[S]of Y.iterator()){let M=!0;for(let P of g)if(!P.has(S)){M=!1;break}M&&(yield[S,...W])}}function oe(){return i.getSystems()}function D(){return n.values()}function V(W){if(r)throw new Error("Engine is already sealed. No components can be removed at this stage");let Y=typeof W=="number"?W:Vt(W);n.delete(Y)}vn({defineComponentFromSchema:O});function $(){r||(r=!0)}return{addEntity:d,removeEntity:l,removeEntityWithChildren:w,addSystem:o,getSystems:oe,removeSystem:s,defineComponent:u,defineComponentFromSchema:O,defineValueSetComponentFromSchema:x,getEntitiesWith:T,getComponent:b,getComponentOrNull:h,getEntityOrNullByName:v,removeComponentDefinition:V,registerComponentDefinition:_,entityContainer:e,componentsIter:D,seal:$,addNetworkManager:a,getNetworkManager:c}}function fu(e){let n=Ql(),i=Kf(n,e?.onChangeFunction||null);async function t(r){await i.receiveMessages();for(let s of n.getSystems()){let c=s.fn(r);Xo(c,`A system (${s.name||"anonymous"}) returned a thenable. Systems cannot be async functions. Documentation: https://dcl.gg/sdk/sync-systems`)}let o=n.entityContainer.releaseRemovedEntities();await i.sendMessages(o)}return{addEntity:n.addEntity,removeEntity:n.removeEntity,removeEntityWithChildren:n.removeEntityWithChildren,addSystem:n.addSystem,removeSystem:n.removeSystem,defineComponent:n.defineComponent,defineComponentFromSchema:n.defineComponentFromSchema,defineValueSetComponentFromSchema:n.defineValueSetComponentFromSchema,registerComponentDefinition:n.registerComponentDefinition,getEntitiesWith:n.getEntitiesWith,getComponent:n.getComponent,getComponentOrNull:n.getComponentOrNull,removeComponentDefinition:n.removeComponentDefinition,componentsIter:n.componentsIter,seal:n.seal,getEntityOrNullByName:n.getEntityOrNullByName,update:t,RootEntity:0,PlayerEntity:1,CameraEntity:2,getEntityState:n.entityContainer.getEntityState,addTransport:i.addTransport,entityContainer:n.entityContainer,addNetworkManager:n.addNetworkManager,getNetworkManager:n.getNetworkManager}}function uu(e,n){let i=di(e),t;(function(O){O[O.Click=0]="Click",O[O.Down=1]="Down",O[O.Up=2]="Up"})(t||(t={}));let r=(O={})=>({button:3,...O}),o=new Map;function s(O){return o.get(O)||o.set(O,new Map).get(O)}function c(O,x,u){(u.hoverText||u.showFeedback)&&(i.getMutableOrNull(O)||i.create(O)).pointerEvents.push({eventType:x,eventInfo:{button:u.button,showFeedback:u.showFeedback,hoverText:u.hoverText,maxDistance:u.maxDistance}})}function a(O,x,u){let b=i.getMutableOrNull(O);b&&(b.pointerEvents=b.pointerEvents.filter(h=>!(h.eventInfo?.button===u&&h.eventType===x)))}function d(O){return O===t.Up?0:1}function l(O,x){let u=s(O),b=u.get(x);b?.opts.hoverText&&a(O,d(x),b.opts.button),u.delete(x)}e.addSystem(function(){for(let[x,u]of o){if(e.getEntityState(x)===Ve.Removed){o.delete(x);continue}for(let[b,{cb:h,opts:T}]of u){if(b===t.Click){let v=n.getClick(T.button,x);v&&Xo(h(v.up),"Click event returned a thenable. Only synchronous functions are allowed")}if(b===t.Down||b===t.Up){let v=n.getInputCommand(T.button,d(b),x);v&&Xo(h(v),"Event handler returned a thenable. Only synchronous functions are allowed")}}}});let w=(...O)=>{let[x,u,b]=O;if(typeof x=="number")return w({entity:x,opts:b??{}},u);let{entity:h,opts:T}=x,v=r(T);l(h,t.Down),s(h).set(t.Down,{cb:u,opts:v}),c(h,1,v)},_=(...O)=>{let[x,u,b]=O;if(typeof x=="number")return _({entity:x,opts:b??{}},u);let{entity:h,opts:T}=x,v=r(T);l(h,t.Up),s(h).set(t.Up,{cb:u,opts:v}),c(h,0,v)};return{removeOnClick(O){l(O,t.Click)},removeOnPointerDown(O){l(O,t.Down)},removeOnPointerUp(O){l(O,t.Up)},onClick(O,x){let{entity:u}=O,b=r(O.opts);l(u,t.Click),s(u).set(t.Click,{cb:x,opts:b}),c(u,1,b)},onPointerDown:w,onPointerUp:_}}var he=fu(),ep=cu(he),La=uu(he,ep);var Fa=ba(he);var du=Ea(he);var Ri=xa(he);var lu=ka(he);var pu;(function(e){e[e.CT_FIRST_PERSON=0]="CT_FIRST_PERSON",e[e.CT_THIRD_PERSON=1]="CT_THIRD_PERSON",e[e.CT_CINEMATIC=2]="CT_CINEMATIC"})(pu||(pu={}));var mu;(function(e){e[e.IA_POINTER=0]="IA_POINTER",e[e.IA_PRIMARY=1]="IA_PRIMARY",e[e.IA_SECONDARY=2]="IA_SECONDARY",e[e.IA_ANY=3]="IA_ANY",e[e.IA_FORWARD=4]="IA_FORWARD",e[e.IA_BACKWARD=5]="IA_BACKWARD",e[e.IA_RIGHT=6]="IA_RIGHT",e[e.IA_LEFT=7]="IA_LEFT",e[e.IA_JUMP=8]="IA_JUMP",e[e.IA_WALK=9]="IA_WALK",e[e.IA_ACTION_3=10]="IA_ACTION_3",e[e.IA_ACTION_4=11]="IA_ACTION_4",e[e.IA_ACTION_5=12]="IA_ACTION_5",e[e.IA_ACTION_6=13]="IA_ACTION_6"})(mu||(mu={}));var hu;(function(e){e[e.PET_UP=0]="PET_UP",e[e.PET_DOWN=1]="PET_DOWN",e[e.PET_HOVER_ENTER=2]="PET_HOVER_ENTER",e[e.PET_HOVER_LEAVE=3]="PET_HOVER_LEAVE"})(hu||(hu={}));var yu;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOADING=1]="LOADING",e[e.NOT_FOUND=2]="NOT_FOUND",e[e.FINISHED_WITH_ERROR=3]="FINISHED_WITH_ERROR",e[e.FINISHED=4]="FINISHED"})(yu||(yu={}));var bu;(function(e){e[e.TAM_TOP_LEFT=0]="TAM_TOP_LEFT",e[e.TAM_TOP_CENTER=1]="TAM_TOP_CENTER",e[e.TAM_TOP_RIGHT=2]="TAM_TOP_RIGHT",e[e.TAM_MIDDLE_LEFT=3]="TAM_MIDDLE_LEFT",e[e.TAM_MIDDLE_CENTER=4]="TAM_MIDDLE_CENTER",e[e.TAM_MIDDLE_RIGHT=5]="TAM_MIDDLE_RIGHT",e[e.TAM_BOTTOM_LEFT=6]="TAM_BOTTOM_LEFT",e[e.TAM_BOTTOM_CENTER=7]="TAM_BOTTOM_CENTER",e[e.TAM_BOTTOM_RIGHT=8]="TAM_BOTTOM_RIGHT"})(bu||(bu={}));var Eu;(function(e){e[e.F_SANS_SERIF=0]="F_SANS_SERIF",e[e.F_SERIF=1]="F_SERIF",e[e.F_MONOSPACE=2]="F_MONOSPACE"})(Eu||(Eu={}));function Da(e){let n=e.getComponentOrNull("composite::root");return n||e.defineComponent("composite::root",{src:B.String,entities:B.Array(B.Map({src:B.Entity,dest:B.Entity}))})}var tp="/";function np(e,n=!1){let i="",t=0,r=-1,o=0,s;for(let c=0;c<=e.length;++c){if(c<e.length)s=e.charCodeAt(c);else{if(s===47)break;s=47}if(s===47){if(!(r===c-1||o===1))if(r!==c-1&&o===2){if(i.length<2||t!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){let a=i.lastIndexOf("/");if(a!==i.length-1){a===-1?(i="",t=0):(i=i.slice(0,a),t=i.length-1-i.lastIndexOf("/")),r=c,o=0;continue}}else if(i.length===2||i.length===1){i="",t=0,r=c,o=0;continue}}n&&(i.length>0?i+="/..":i="..",t=2)}else i.length>0?i+="/"+e.slice(r+1,c):i=e.slice(r+1,c),t=c-r-1;r=c,o=0}else s===46&&o!==-1?++o:o=-1}return i}function Ai(...e){let n="",i=!1,t;for(let r=e.length-1;r>=-1&&!i;r--){let o;r>=0?o=e[r]:(t===void 0&&(t=tp),o=t),o.length!==0&&(n=o+"/"+n,i=o.charCodeAt(0)===47)}return n=np(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."}function xu(e){if(e.length===0)return".";let n=e.charCodeAt(0),i=n===47,t=-1,r=!0;for(let o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===47){if(!r){t=o;break}}else r=!1;return t===-1?i?"/":".":i&&t===1?"//":e.slice(0,t)}function ki(e,n){return(e.startsWith(".")?Ai(n,e):Ai(e)).substring(1)}var Ao;(function(e){e[e.EMM_NONE=0]="EMM_NONE",e[e.EMM_NEXT_AVAILABLE=1]="EMM_NEXT_AVAILABLE",e[e.EMM_DIRECT_MAPPING=2]="EMM_DIRECT_MAPPING"})(Ao||(Ao={}));function gu(e,n){return n.data?.$case==="json"?n.data.json:e.schema.deserialize(new Ye(n.data?.binary))}function rp(e,n){let i=e.getComponentOrNull(n.name);if(i)return i;if(n.name.startsWith("core::")){if(n.name in wa)return wa[n.name](e);throw new Error(`The core component ${n.name} was not found.`)}else{if(n.jsonSchema)return e.defineComponentFromSchema(n.name,B.fromJson(n.jsonSchema));throw new Error(`${n.name} is not defined and there is no schema to define it.`)}}function ip(e,n,i,{entityMapping:t}){let r=i.get(n);if(r)return r;if(t?.type===Ao.EMM_DIRECT_MAPPING){let s=t.getCompositeEntity(n);return i.set(n,s),s}let o=t?.type===Ao.EMM_NEXT_AVAILABLE?t.getNextAvailableEntity():e.addEntity();if(o===null)throw new Error("There is no more entities to allocate");return i.set(n,o),o}function Wa(e,n,i,t){let{rootEntity:r,alreadyRequestedSrc:o,entityMapping:s}=t,c=o||new Set,a=xu(Ai(n.src)),d=Vt("core::Transform"),l=Da(e),w=new Map,_=b=>ip(e,b,w,t),O=r??_(0);r&&w.set(0,r);let x=n.composite.components.find(b=>b.name===l.componentName);if(x)for(let[b,h]of x.data){let T=gu(l,h),v=ki(T.src,a),j=i.getCompositeOrNull(v),oe=_(b);if(j){if(c.has(j.src)||j.src===n.src)throw new Error(`Composite ${n.src} has a recursive instanciation while try to instance ${j.src}. Previous instances: ${c.toString()}`);Wa(e,j,i,{rootEntity:oe,alreadyRequestedSrc:new Set(c).add(j.src),entityMapping:s?.type===Ao.EMM_NEXT_AVAILABLE?s:void 0})}}for(let b of n.composite.components){if(b.name===l.componentName)continue;let h=rp(e,b);for(let[T,v]of b.data){let j=gu(h,v),oe=_(T),D=h.create(oe,j);if(h.componentId===d){let V=D;V.parent?V.parent=_(V.parent):V.parent=_(0)}else B.mutateNestedValues(h.schema.jsonSchema,D,(V,$)=>$.serializationType==="entity"?{changed:!0,value:_(V)}:{changed:!1})}}let u=l.getMutableOrNull(O)||l.create(O);for(let[b,h]of w)u.entities.push({src:b,dest:h});return u.src=n.src,O}var Et=le(me());var bt=le(me());var _u;(function(e){e[e.NULL_VALUE=0]="NULL_VALUE"})(_u||(_u={}));function ap(e){switch(e){case 0:case"NULL_VALUE":return 0;default:throw new Au.Error("Unrecognized enum value "+e+" for enum NullValue")}}function cp(e){switch(e){case 0:return"NULL_VALUE";default:throw new Au.Error("Unrecognized enum value "+e+" for enum NullValue")}}function Tu(){return{fields:new Map}}var ko;(function(e){function n(c,a=bt.default.Writer.create()){return c.fields.forEach((d,l)=>{d!==void 0&&wi.encode({key:l,value:d},a.uint32(10).fork()).ldelim()}),a}e.encode=n;function i(c,a){let d=c instanceof bt.default.Reader?c:bt.default.Reader.create(c),l=a===void 0?d.len:d.pos+a,w=Tu();for(;d.pos<l;){let _=d.uint32();switch(_>>>3){case 1:if(_!==10)break;let O=wi.decode(d,d.uint32());O.value!==void 0&&w.fields.set(O.key,O.value);continue}if((_&7)===4||_===0)break;d.skipType(_&7)}return w}e.decode=i;function t(c){return{fields:fp(c.fields)?Object.entries(c.fields).reduce((a,[d,l])=>(a.set(d,l),a),new Map):new Map}}e.fromJSON=t;function r(c){let a={};return a.fields={},c.fields&&c.fields.forEach((d,l)=>{a.fields[l]=d}),a}e.toJSON=r;function o(c){let a=Tu();return c!==void 0&&Object.keys(c).forEach(d=>{a.fields.set(d,c[d])}),a}e.wrap=o;function s(c){let a={};return[...c.fields.keys()].forEach(d=>{a[d]=c.fields.get(d)}),a}e.unwrap=s})(ko||(ko={}));function sp(){return{key:"",value:void 0}}var wi;(function(e){function n(o,s=bt.default.Writer.create()){return o.key!==""&&s.uint32(10).string(o.key),o.value!==void 0&&$e.encode($e.wrap(o.value),s.uint32(18).fork()).ldelim(),s}e.encode=n;function i(o,s){let c=o instanceof bt.default.Reader?o:bt.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,d=sp();for(;c.pos<a;){let l=c.uint32();switch(l>>>3){case 1:if(l!==10)break;d.key=c.string();continue;case 2:if(l!==18)break;d.value=$e.unwrap($e.decode(c,c.uint32()));continue}if((l&7)===4||l===0)break;c.skipType(l&7)}return d}e.decode=i;function t(o){return{key:an(o.key)?String(o.key):"",value:an(o?.value)?o.value:void 0}}e.fromJSON=t;function r(o){let s={};return o.key!==void 0&&(s.key=o.key),o.value!==void 0&&(s.value=o.value),s}e.toJSON=r})(wi||(wi={}));function Su(){return{kind:void 0}}var $e;(function(e){function n(c,a=bt.default.Writer.create()){switch(c.kind?.$case){case"nullValue":a.uint32(8).int32(c.kind.nullValue);break;case"numberValue":a.uint32(17).double(c.kind.numberValue);break;case"stringValue":a.uint32(26).string(c.kind.stringValue);break;case"boolValue":a.uint32(32).bool(c.kind.boolValue);break;case"structValue":ko.encode(ko.wrap(c.kind.structValue),a.uint32(42).fork()).ldelim();break;case"listValue":wo.encode(wo.wrap(c.kind.listValue),a.uint32(50).fork()).ldelim();break}return a}e.encode=n;function i(c,a){let d=c instanceof bt.default.Reader?c:bt.default.Reader.create(c),l=a===void 0?d.len:d.pos+a,w=Su();for(;d.pos<l;){let _=d.uint32();switch(_>>>3){case 1:if(_!==8)break;w.kind={$case:"nullValue",nullValue:d.int32()};continue;case 2:if(_!==17)break;w.kind={$case:"numberValue",numberValue:d.double()};continue;case 3:if(_!==26)break;w.kind={$case:"stringValue",stringValue:d.string()};continue;case 4:if(_!==32)break;w.kind={$case:"boolValue",boolValue:d.bool()};continue;case 5:if(_!==42)break;w.kind={$case:"structValue",structValue:ko.unwrap(ko.decode(d,d.uint32()))};continue;case 6:if(_!==50)break;w.kind={$case:"listValue",listValue:wo.unwrap(wo.decode(d,d.uint32()))};continue}if((_&7)===4||_===0)break;d.skipType(_&7)}return w}e.decode=i;function t(c){return{kind:an(c.nullValue)?{$case:"nullValue",nullValue:ap(c.nullValue)}:an(c.numberValue)?{$case:"numberValue",numberValue:Number(c.numberValue)}:an(c.stringValue)?{$case:"stringValue",stringValue:String(c.stringValue)}:an(c.boolValue)?{$case:"boolValue",boolValue:!!c.boolValue}:an(c.structValue)?{$case:"structValue",structValue:c.structValue}:an(c.listValue)?{$case:"listValue",listValue:[...c.listValue]}:void 0}}e.fromJSON=t;function r(c){let a={};return c.kind?.$case==="nullValue"&&(a.nullValue=c.kind?.nullValue!==void 0?cp(c.kind?.nullValue):void 0),c.kind?.$case==="numberValue"&&(a.numberValue=c.kind?.numberValue),c.kind?.$case==="stringValue"&&(a.stringValue=c.kind?.stringValue),c.kind?.$case==="boolValue"&&(a.boolValue=c.kind?.boolValue),c.kind?.$case==="structValue"&&(a.structValue=c.kind?.structValue),c.kind?.$case==="listValue"&&(a.listValue=c.kind?.listValue),a}e.toJSON=r;function o(c){let a=Su();if(c===null)a.kind={$case:"nullValue",nullValue:0};else if(typeof c=="boolean")a.kind={$case:"boolValue",boolValue:c};else if(typeof c=="number")a.kind={$case:"numberValue",numberValue:c};else if(typeof c=="string")a.kind={$case:"stringValue",stringValue:c};else if(Array.isArray(c))a.kind={$case:"listValue",listValue:c};else if(typeof c=="object")a.kind={$case:"structValue",structValue:c};else if(typeof c<"u")throw new Error("Unsupported any value type: "+typeof c);return a}e.wrap=o;function s(c){return c.kind?.$case==="nullValue"?null:c.kind?.$case==="numberValue"?c.kind?.numberValue:c.kind?.$case==="stringValue"?c.kind?.stringValue:c.kind?.$case==="boolValue"?c.kind?.boolValue:c.kind?.$case==="structValue"?c.kind?.structValue:c.kind?.$case==="listValue"?c.kind?.listValue:void 0}e.unwrap=s})($e||($e={}));function Ru(){return{values:[]}}var wo;(function(e){function n(c,a=bt.default.Writer.create()){for(let d of c.values)$e.encode($e.wrap(d),a.uint32(10).fork()).ldelim();return a}e.encode=n;function i(c,a){let d=c instanceof bt.default.Reader?c:bt.default.Reader.create(c),l=a===void 0?d.len:d.pos+a,w=Ru();for(;d.pos<l;){let _=d.uint32();switch(_>>>3){case 1:if(_!==10)break;w.values.push($e.unwrap($e.decode(d,d.uint32())));continue}if((_&7)===4||_===0)break;d.skipType(_&7)}return w}e.decode=i;function t(c){return{values:Array.isArray(c?.values)?[...c.values]:[]}}e.fromJSON=t;function r(c){let a={};return c.values?a.values=c.values.map(d=>d):a.values=[],a}e.toJSON=r;function o(c){let a=Ru();return a.values=c??[],a}e.wrap=o;function s(c){return c?.hasOwnProperty("values")&&Array.isArray(c.values)?c.values:c}e.unwrap=s})(wo||(wo={}));var Au=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global;throw"Unable to locate global object"})();function fp(e){return typeof e=="object"&&e!==null}function an(e){return e!=null}function up(){return{data:void 0}}var cn;(function(e){function n(o,s=Et.default.Writer.create()){switch(o.data?.$case){case"json":$e.encode($e.wrap(o.data.json),s.uint32(10).fork()).ldelim();break;case"binary":s.uint32(18).bytes(o.data.binary);break}return s}e.encode=n;function i(o,s){let c=o instanceof Et.default.Reader?o:Et.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,d=up();for(;c.pos<a;){let l=c.uint32();switch(l>>>3){case 1:if(l!==10)break;d.data={$case:"json",json:$e.unwrap($e.decode(c,c.uint32()))};continue;case 2:if(l!==18)break;d.data={$case:"binary",binary:c.bytes()};continue}if((l&7)===4||l===0)break;c.skipType(l&7)}return d}e.decode=i;function t(o){return{data:Un(o.json)?{$case:"json",json:o.json}:Un(o.binary)?{$case:"binary",binary:mp(o.binary)}:void 0}}e.fromJSON=t;function r(o){let s={};return o.data?.$case==="json"&&(s.json=o.data?.json),o.data?.$case==="binary"&&(s.binary=o.data?.binary!==void 0?hp(o.data?.binary):void 0),s}e.toJSON=r})(cn||(cn={}));function dp(){return{name:"",jsonSchema:void 0,data:new Map}}var No;(function(e){function n(o,s=Et.default.Writer.create()){return o.name!==""&&s.uint32(10).string(o.name),o.jsonSchema!==void 0&&$e.encode($e.wrap(o.jsonSchema),s.uint32(18).fork()).ldelim(),o.data.forEach((c,a)=>{Ni.encode({key:a,value:c},s.uint32(26).fork()).ldelim()}),s}e.encode=n;function i(o,s){let c=o instanceof Et.default.Reader?o:Et.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,d=dp();for(;c.pos<a;){let l=c.uint32();switch(l>>>3){case 1:if(l!==10)break;d.name=c.string();continue;case 2:if(l!==18)break;d.jsonSchema=$e.unwrap($e.decode(c,c.uint32()));continue;case 3:if(l!==26)break;let w=Ni.decode(c,c.uint32());w.value!==void 0&&d.data.set(w.key,w.value);continue}if((l&7)===4||l===0)break;c.skipType(l&7)}return d}e.decode=i;function t(o){return{name:Un(o.name)?String(o.name):"",jsonSchema:Un(o?.jsonSchema)?o.jsonSchema:void 0,data:yp(o.data)?Object.entries(o.data).reduce((s,[c,a])=>(s.set(Number(c),cn.fromJSON(a)),s),new Map):new Map}}e.fromJSON=t;function r(o){let s={};return o.name!==void 0&&(s.name=o.name),o.jsonSchema!==void 0&&(s.jsonSchema=o.jsonSchema),s.data={},o.data&&o.data.forEach((c,a)=>{s.data[a]=cn.toJSON(c)}),s}e.toJSON=r})(No||(No={}));function lp(){return{key:0,value:void 0}}var Ni;(function(e){function n(o,s=Et.default.Writer.create()){return o.key!==0&&s.uint32(8).int32(o.key),o.value!==void 0&&cn.encode(o.value,s.uint32(18).fork()).ldelim(),s}e.encode=n;function i(o,s){let c=o instanceof Et.default.Reader?o:Et.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,d=lp();for(;c.pos<a;){let l=c.uint32();switch(l>>>3){case 1:if(l!==8)break;d.key=c.int32();continue;case 2:if(l!==18)break;d.value=cn.decode(c,c.uint32());continue}if((l&7)===4||l===0)break;c.skipType(l&7)}return d}e.decode=i;function t(o){return{key:Un(o.key)?Number(o.key):0,value:Un(o.value)?cn.fromJSON(o.value):void 0}}e.fromJSON=t;function r(o){let s={};return o.key!==void 0&&(s.key=Math.round(o.key)),o.value!==void 0&&(s.value=o.value?cn.toJSON(o.value):void 0),s}e.toJSON=r})(Ni||(Ni={}));function pp(){return{version:0,components:[]}}var Pn;(function(e){function n(o,s=Et.default.Writer.create()){o.version!==0&&s.uint32(8).int32(o.version);for(let c of o.components)No.encode(c,s.uint32(18).fork()).ldelim();return s}e.encode=n;function i(o,s){let c=o instanceof Et.default.Reader?o:Et.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,d=pp();for(;c.pos<a;){let l=c.uint32();switch(l>>>3){case 1:if(l!==8)break;d.version=c.int32();continue;case 2:if(l!==18)break;d.components.push(No.decode(c,c.uint32()));continue}if((l&7)===4||l===0)break;c.skipType(l&7)}return d}e.decode=i;function t(o){return{version:Un(o.version)?Number(o.version):0,components:Array.isArray(o?.components)?o.components.map(s=>No.fromJSON(s)):[]}}e.fromJSON=t;function r(o){let s={};return o.version!==void 0&&(s.version=Math.round(o.version)),o.components?s.components=o.components.map(c=>c?No.toJSON(c):void 0):s.components=[],s}e.toJSON=r})(Pn||(Pn={}));var Io=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global;throw"Unable to locate global object"})();function mp(e){if(Io.Buffer)return Uint8Array.from(Io.Buffer.from(e,"base64"));{let n=Io.atob(e),i=new Uint8Array(n.length);for(let t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i}}function hp(e){if(Io.Buffer)return Io.Buffer.from(e).toString("base64");{let n=[];return e.forEach(i=>{n.push(String.fromCharCode(i))}),Io.btoa(n.join(""))}}function yp(e){return typeof e=="object"&&e!==null}function Un(e){return e!=null}var sn;(function(e){function n(c){return Pn.fromJSON(c)}e.fromJson=n;function i(c){return Pn.decode(c)}e.fromBinary=i;function t(c){return Pn.toJSON(c)}e.toJson=t;function r(c){return Pn.encode(c).finish()}e.toBinary=r;function o(c,a,d,l={}){Wa(c,a,d,l)}e.instance=o;function s(c,a="/"){return ki(c,a)}e.resolveAndNormalizePath=s})(sn||(sn={}));var He=vn(he),ku=qf(he),Va=jf(he),Ii=Yf(he);var F3=Ti(he);function wu(e,n,i){let r=Oo(je.ACTION_TYPES,e).getOrCreateMutable(e.RootEntity),o={type:n,jsonSchema:JSON.stringify(i?.jsonSchema||B.Map({}).jsonSchema)};r.value=[...r.value.filter(s=>s.type!==o.type),o]}function at(e){return JSON.parse(e.jsonPayload)}function Ha(e){return{all:e=e||new Map,on:function(n,i){var t=e.get(n);t?t.push(i):e.set(n,[i])},off:function(n,i){var t=e.get(n);t&&(i?t.splice(t.indexOf(i)>>>0,1):e.set(n,[]))},emit:function(n,i){var t=e.get(n);t&&t.slice().map(function(r){r(i)}),(t=e.get("*"))&&t.slice().map(function(r){r(n,i)})}}}var Ga=new Map,ja=new Map;function Pt(e){return Ga.has(e)||Ga.set(e,Ha()),Ga.get(e)}function Oi(e){return ja.has(e)||ja.set(e,Ha()),ja.get(e)}function Ci(e,n){return!!n&&e.value.includes(n)}function qa(e){return Ci(e,e.currentValue)?e.currentValue:Ya(e)}function Ya(e){if(Ci(e,e.defaultValue))return e.defaultValue;if(e.value.length>0)return e.value[0]}var je;(function(e){e.ACTION_TYPES="asset-packs::ActionTypes",e.ACTIONS="asset-packs::Actions",e.COUNTER="asset-packs::Counter",e.TRIGGERS="asset-packs::Triggers",e.STATES="asset-packs::States"})(je||(je={}));var fn;(function(e){e.MOVE_ITEM="move_item",e.ROTATE_ITEM="rotate_item",e.SCALE_ITEM="scale_item"})(fn||(fn={}));var Mi;(function(e){e.LINEAR="linear",e.EASEINQUAD="easeinquad",e.EASEOUTQUAD="easeoutquad",e.EASEQUAD="easequad",e.EASEINSINE="easeinsine",e.EASEOUTSINE="easeoutsine",e.EASESINE="easeinoutsine",e.EASEINEXPO="easeinexpo",e.EASEOUTEXPO="easeoutexpo",e.EASEEXPO="easeinoutexpo",e.EASEINELASTIC="easeinelastic",e.EASEOUTELASTIC="easeoutelastic",e.EASEELASTIC="easeinoutelastic",e.EASEINBOUNCE="easeinbounce",e.EASEOUTEBOUNCE="easeoutbounce",e.EASEBOUNCE="easeinoutbounce"})(Mi||(Mi={}));var Ne;(function(e){e.PLAY_ANIMATION="play_animation",e.STOP_ANIMATION="stop_animation",e.SET_STATE="set_state",e.START_TWEEN="start_tween",e.SET_COUNTER="set_counter",e.INCREMENT_COUNTER="increment_counter",e.DECREASE_COUNTER="decrease_counter",e.PLAY_SOUND="play_sound",e.STOP_SOUND="stop_sound",e.SET_VISIBILITY="set_visibility",e.ATTACH_TO_PLAYER="attach_to_player",e.DETACH_FROM_PLAYER="detach_from_player"})(Ne||(Ne={}));var bp={[Ne.PLAY_ANIMATION]:B.Map({animation:B.String,loop:B.Optional(B.Boolean)}),[Ne.STOP_ANIMATION]:B.Map({}),[Ne.SET_STATE]:B.Map({state:B.String}),[Ne.START_TWEEN]:B.Map({type:B.EnumString(fn,fn.MOVE_ITEM),end:B.Vector3,interpolationType:B.EnumString(Mi,Mi.LINEAR),duration:B.Float,relative:B.Boolean}),[Ne.SET_COUNTER]:B.Map({counter:B.Int}),[Ne.INCREMENT_COUNTER]:B.Map({}),[Ne.DECREASE_COUNTER]:B.Map({}),[Ne.PLAY_SOUND]:B.Map({src:B.String,loop:B.Optional(B.Boolean),volume:B.Optional(B.Float)}),[Ne.STOP_SOUND]:B.Map({}),[Ne.SET_VISIBILITY]:B.Map({visible:B.Boolean,physicsCollider:B.Optional(B.Boolean)}),[Ne.ATTACH_TO_PLAYER]:B.Map({anchorPointId:B.Int}),[Ne.DETACH_FROM_PLAYER]:B.Map({})},Ke;(function(e){e.ON_CLICK="on_click",e.ON_STATE_CHANGE="on_state_change",e.ON_SPAWN="on_spawn",e.ON_TWEEN_END="on_tween_end",e.ON_COUNTER_CHANGE="on_counter_change",e.ON_PLAYER_ENTERS_AREA="on_player_enters_area",e.ON_PLAYER_LEAVES_AREA="on_player_leaves_area"})(Ke||(Ke={}));var ct;(function(e){e.WHEN_STATE_IS="when_state_is",e.WHEN_STATE_IS_NOT="when_state_is_not",e.WHEN_COUNTER_EQUALS="when_counter_equals",e.WHEN_COUNTER_IS_GREATER_THAN="when_counter_is_greater_than",e.WHEN_COUNTER_IS_LESS_THAN="when_counter_is_less_than"})(ct||(ct={}));var un;(function(e){e.AND="and",e.OR="or"})(un||(un={}));function Oo(e,n){try{return n.getComponent(e)}catch(i){throw console.error(`Error using getComponent with componentName="${e}"`),i}}function vi(e){return{Actions:Oo(je.ACTIONS,e),States:Oo(je.STATES,e),Counter:Oo(je.COUNTER,e),Triggers:Oo(je.TRIGGERS,e)}}function Nu(e){let n=e.defineComponent(je.ACTION_TYPES,{value:B.Array(B.Map({type:B.String,jsonSchema:B.String}))}),i=e.defineComponent(je.ACTIONS,{id:B.Int,value:B.Array(B.Map({name:B.String,type:B.String,jsonPayload:B.String}))}),t=e.defineComponent(je.COUNTER,{id:B.Number,value:B.Int}),r=e.defineComponent(je.TRIGGERS,{value:B.Array(B.Map({type:B.EnumString(Ke,Ke.ON_CLICK),conditions:B.Optional(B.Array(B.Map({id:B.Optional(B.Int),type:B.EnumString(ct,ct.WHEN_STATE_IS),value:B.String}))),operation:B.Optional(B.EnumString(un,un.AND)),actions:B.Array(B.Map({id:B.Optional(B.Int),name:B.Optional(B.String)}))}))}),o=e.defineComponent(je.STATES,{id:B.Number,value:B.Array(B.String),defaultValue:B.Optional(B.String),currentValue:B.Optional(B.String)});return{ActionTypes:n,Actions:i,Counter:t,Triggers:r,States:o}}function Iu(e){let n=Object.values(Ne);for(let r of n){let o=r;wu(e,o,bp[o])}let t=e.getComponent(je.COUNTER).getOrCreateMutable(e.RootEntity);t.value=t.value||0}function Ou(e){switch(e){case je.STATES:return[ct.WHEN_STATE_IS,ct.WHEN_STATE_IS_NOT];case je.COUNTER:return[ct.WHEN_COUNTER_EQUALS,ct.WHEN_COUNTER_IS_GREATER_THAN,ct.WHEN_COUNTER_IS_LESS_THAN];default:return[]}}var dn=.45454545454545453,ln=2.2,Cu=1e-6,Qo=Math.PI/180,er=360/(Math.PI*2);var Ae;(function(e){e.TwoPi=Math.PI*2;function n(D,V,$=1401298e-51){let W=D-V;return-$<=W&&W<=$}e.withinEpsilon=n;function i(D){let V=D.toString(16);return D<=15?("0"+V).toUpperCase():V.toUpperCase()}e.toHex=i;function t(D){let V=+D;return V===0||isNaN(V)?V:V>0?1:-1}e.sign=t;function r(D,V=0,$=1){return Math.min($,Math.max(V,D))}e.clamp=r;function o(D){return Math.log(D)*Math.LOG2E}e.log2=o;function s(D,V){return D-Math.floor(D/V)*V}e.repeat=s;function c(D,V,$){return(D-V)/($-V)}e.normalize=c;function a(D,V,$){return D*($-V)+V}e.denormalize=a;function d(D,V){let $=s(V-D,360);return $>180&&($-=360),$}e.deltaAngle=d;function l(D,V){let $=s(D,V*2);return V-Math.abs($-V)}e.pingPong=l;function w(D,V,$){let W=r($);return W=-2*W*W*W+3*W*W,V*W+D*(1-W)}e.smoothStep=w;function _(D,V,$){let W=0;return Math.abs(V-D)<=$?W=V:W=D+t(V-D)*$,W}e.moveTowards=_;function O(D,V,$){let W=d(D,V),Y=0;return-$<W&&W<$?Y=V:Y=_(D,D+W,$),Y}e.moveTowardsAngle=O;function x(D,V,$){return D+(V-D)*$}e.lerp=x;function u(D,V,$){let W=s(V-D,360);return W>180&&(W-=360),D+W*r($)}e.lerpAngle=u;function b(D,V,$){let W=0;return D!==V?W=r(($-D)/(V-D)):W=0,W}e.inverseLerp=b;function h(D,V,$,W,Y){let g=Y*Y,S=Y*g,M=2*S-3*g+1,P=-2*S+3*g,J=S-2*g+Y,ne=S-g;return D*M+$*P+V*J+W*ne}e.hermite=h;function T(D,V){return D===V?D:Math.random()*(V-D)+D}e.randomRange=T;function v(D,V,$){return(D-V)/($-V)}e.rangeToPercent=v;function j(D,V,$){return($-V)*D+V}e.percentToRange=j;function oe(D){return D-e.TwoPi*Math.floor((D+Math.PI)/e.TwoPi)}e.normalizeRadians=oe})(Ae||(Ae={}));var L;(function(e){function n(m){let R=Math.abs(m.x),I=Math.abs(m.y);if(R!==I)return!0;let X=Math.abs(m.z);return R!==X}e.isNonUniform=n;function i(m=0,R=0,I=0){return{x:m,y:R,z:I}}e.create=i;function t(m,R){return{x:m.x+R.x,y:m.y+R.y,z:m.z+R.z}}e.add=t;function r(m,R,I){I.x=m.x+R.x,I.y=m.y+R.y,I.z=m.z+R.z}e.addToRef=r;function o(m,R){return{x:m.x-R.x,y:m.y-R.y,z:m.z-R.z}}e.subtract=o;function s(m,R,I){I.x=m.x-R.x,I.y=m.y-R.y,I.z=m.z-R.z}e.subtractToRef=s;function c(m,R,I,X,q){q.x=m.x-R,q.y=m.y-I,q.z=m.z-X}e.subtractFromFloatsToRef=c;function a(m){return{x:-m.x,y:-m.y,z:-m.z}}e.negate=a;function d(m,R){R.x=m.x,R.y=m.y,R.z=m.z}e.copyFrom=d;function l(m,R,I,X){X.x=m,X.y=R,X.z=I}e.copyFromFloats=l;function w(m){return i(m.x,m.y,m.z)}e.clone=w;function _(m,R,I,X){let q=Y(m,I)-X,Q=Y(R,I)-X;return q/(q-Q)}e.getClipFactor=_;function O(m,R,I){let X=$(m),q=$(R),Q=Y(X,q),se=i();return K(X,q,se),Y(se,I)>0?Math.acos(Q):-Math.acos(Q)}e.getAngleBetweenVectors=O;function x(m,R=0){return i(m[R],m[R+1],m[R+2])}e.fromArray=x;function u(m,R){return x(m,R)}e.fromFloatArray=u;function b(m,R,I){I.x=m[R],I.y=m[R+1],I.z=m[R+2]}e.fromArrayToRef=b;function h(m,R,I){return b(m,R,I)}e.fromFloatArrayToRef=h;function T(m){return Math.sqrt(m.x*m.x+m.y*m.y+m.z*m.z)}e.length=T;function v(m){return m.x*m.x+m.y*m.y+m.z*m.z}e.lengthSquared=v;function j(m,R,I){I.x=m.x*R,I.y=m.y*R,I.z=m.z*R}e.scaleToRef=j;function oe(m,R){return i(m.x*R,m.y*R,m.z*R)}e.scale=oe;function D(m,R){let I=i(0,0,0);return V(m,R,I),I}e.normalizeFromLength=D;function V(m,R,I){if(R===0||R===1){d(m,I);return}j(m,1/R,I)}e.normalizeFromLengthToRef=V;function $(m){return D(m,T(m))}e.normalize=$;function W(m,R){V(m,T(m),R)}e.normalizeToRef=W;function Y(m,R){return m.x*R.x+m.y*R.y+m.z*R.z}e.dot=Y;function g(m,R){let I=w(m);return S(m,R,I),I}e.applyMatrix4=g;function S(m,R,I){let{x:X,y:q,z:Q}=m,se=R._m,Ge=1/(se[3]*X+se[7]*q+se[11]*Q+se[15]);I.x=(se[0]*X+se[4]*q+se[8]*Q+se[12])*Ge,I.y=(se[1]*X+se[5]*q+se[9]*Q+se[13])*Ge,I.z=(se[2]*X+se[6]*q+se[10]*Q+se[14])*Ge}e.applyMatrix4ToRef=S;function M(m,R){let I=i();return P(m,R,I),I}e.rotate=M;function P(m,R,I){let{x:X,y:q,z:Q}=m,{x:se,y:Ge,z:tt,w:Ue}=R,Ht=Ue*X+Ge*Q-tt*q,hn=Ue*q+tt*X-se*Q,Jt=Ue*Q+se*q-Ge*X,yn=-se*X-Ge*q-tt*Q;I.x=Ht*Ue+yn*-se+hn*-tt-Jt*-Ge,I.y=hn*Ue+yn*-Ge+Jt*-se-Ht*-tt,I.z=Jt*Ue+yn*-tt+Ht*-Ge-hn*-se}e.rotateToRef=P;function J(m,R,I){let X=i(0,0,0);return ne(m,R,I,X),X}e.lerp=J;function ne(m,R,I,X){X.x=m.x+(R.x-m.x)*I,X.y=m.y+(R.y-m.y)*I,X.z=m.z+(R.z-m.z)*I}e.lerpToRef=ne;function ie(m,R){let I=mn();return K(m,R,I),I}e.cross=ie;function K(m,R,I){I.x=m.y*R.z-m.z*R.y,I.y=m.z*R.x-m.x*R.z,I.z=m.x*R.y-m.y*R.x}e.crossToRef=K;function pe(m,R){let I=mn();return be(m,R,I),I}e.transformCoordinates=pe;function be(m,R,I){return ke(m.x,m.y,m.z,R,I)}e.transformCoordinatesToRef=be;function ke(m,R,I,X,q){let Q=X._m,se=m*Q[0]+R*Q[4]+I*Q[8]+Q[12],Ge=m*Q[1]+R*Q[5]+I*Q[9]+Q[13],tt=m*Q[2]+R*Q[6]+I*Q[10]+Q[14],Ue=1/(m*Q[3]+R*Q[7]+I*Q[11]+Q[15]);q.x=se*Ue,q.y=Ge*Ue,q.z=tt*Ue}e.transformCoordinatesFromFloatsToRef=ke;function we(m,R){let I=mn();return ve(m,R,I),I}e.transformNormal=we;function ve(m,R,I){ye(m.x,m.y,m.z,R,I)}e.transformNormalToRef=ve;function ye(m,R,I,X,q){let Q=X._m;q.x=m*Q[0]+R*Q[4]+I*Q[8],q.y=m*Q[1]+R*Q[5]+I*Q[9],q.z=m*Q[2]+R*Q[6]+I*Q[10]}e.transformNormalFromFloatsToRef=ye;function pt(m,R,I,X,q){let Q=q*q,se=q*Q,Ge=.5*(2*R.x+(-m.x+I.x)*q+(2*m.x-5*R.x+4*I.x-X.x)*Q+(-m.x+3*R.x-3*I.x+X.x)*se),tt=.5*(2*R.y+(-m.y+I.y)*q+(2*m.y-5*R.y+4*I.y-X.y)*Q+(-m.y+3*R.y-3*I.y+X.y)*se),Ue=.5*(2*R.z+(-m.z+I.z)*q+(2*m.z-5*R.z+4*I.z-X.z)*Q+(-m.z+3*R.z-3*I.z+X.z)*se);return i(Ge,tt,Ue)}e.catmullRom=pt;function N(m,R,I){let X=i();return U(m,R,I,X),X}e.clamp=N;function U(m,R,I,X){let q=m.x;q=q>I.x?I.x:q,q=q<R.x?R.x:q;let Q=m.y;Q=Q>I.y?I.y:Q,Q=Q<R.y?R.y:Q;let se=m.z;se=se>I.z?I.z:se,se=se<R.z?R.z:se,l(q,Q,se,X)}e.clampToRef=U;function Z(m,R,I,X,q){let Q=q*q,se=q*Q,Ge=2*se-3*Q+1,tt=-2*se+3*Q,Ue=se-2*Q+q,Ht=se-Q,hn=m.x*Ge+I.x*tt+R.x*Ue+X.x*Ht,Jt=m.y*Ge+I.y*tt+R.y*Ue+X.y*Ht,yn=m.z*Ge+I.z*tt+R.z*Ue+X.z*Ht;return i(hn,Jt,yn)}e.hermite=Z;function k(m,R){let I=i();return fr(R,m.x,m.y,m.z,I),I}e.minimize=k;function C(m,R){let I=i();return sr(m,R.x,R.y,R.z,I),I}e.maximize=C;function re(m,R){return Math.sqrt(Ie(m,R))}e.distance=re;function Ie(m,R){let I=m.x-R.x,X=m.y-R.y,q=m.z-R.z;return I*I+X*X+q*q}e.distanceSquared=Ie;function Wi(m,R){let I=t(m,R);return j(I,.5,I),I}e.center=Wi;function Vi(m,R,I){let X=mn();return rr(m,R,I,X),X}e.rotationFromAxis=Vi;function rr(m,R,I,X){let q=Se.create();Se.fromAxisToRotationQuaternionToRef(m,R,I,q),d(Se.toEulerAngles(q),X)}e.rotationFromAxisToRef=rr;function Hi(m){return`(${m.x}, ${m.y}, ${m.z})`}e.toString=Hi;function zo(m){let R=m.x||0;return R=R*397^(m.y||0),R=R*397^(m.z||0),R}e.getHashCode=zo;function Gi(m,R){return m.x===R.x&&m.y===R.y&&m.z===R.z}e.equals=Gi;function ir(m,R,I=Cu){return Ae.withinEpsilon(m.x,R.x,I)&&Ae.withinEpsilon(m.y,R.y,I)&&Ae.withinEpsilon(m.z,R.z,I)}e.equalsWithEpsilon=ir;function ji(m,R,I,X){return m.x===R&&m.y===I&&m.z===X}e.equalsToFloats=ji;function Bo(m,R){let I=i();return ze(m,R,I),I}e.multiply=Bo;function ze(m,R,I){I.x=m.x*R.x,I.y=m.y*R.y,I.z=m.z*R.z}e.multiplyToRef=ze;function ar(m,R,I,X,q){q.x=m.x*R,q.y=m.y*I,q.z=m.z*X}e.multiplyByFloatsToRef=ar;function qi(m,R,I,X){let q=i();return ar(m,R,I,X,q),q}e.multiplyByFloats=qi;function cr(m,R){return{x:m.x/R.x,y:m.y/R.y,z:m.z/R.z}}e.divide=cr;function Yi(m,R,I){I.x=m.x/R.x,I.y=m.y/R.y,I.z=m.z/R.z}e.divideToRef=Yi;function sr(m,R,I,X,q){R>m.x?q.x=R:q.x=m.x,I>m.y?q.y=I:q.y=m.y,X>m.z?q.z=X:q.z=m.z}e.maximizeInPlaceFromFloatsToRef=sr;function fr(m,R,I,X,q){R<m.x?q.x=R:q.x=m.x,I<m.y?q.y=I:q.y=m.y,X<m.z?q.z=X:q.z=m.z}e.minimizeInPlaceFromFloatsToRef=fr;function $i(m){return i(Math.floor(m.x),Math.floor(m.y),Math.floor(m.z))}e.floor=$i;function ur(m){return i(m.x-Math.floor(m.x),m.y-Math.floor(m.y),m.z-Math.floor(m.z))}e.fract=ur;function mn(){return i(0,0,0)}e.Zero=mn;function Ji(){return i(1,1,1)}e.One=Ji;function Po(){return i(0,1,0)}e.Up=Po;function Zi(){return i(0,-1,0)}e.Down=Zi;function Xi(){return i(0,0,1)}e.Forward=Xi;function dr(){return i(0,0,-1)}e.Backward=dr;function lr(){return i(1,0,0)}e.Right=lr;function Ki(){return i(-1,0,0)}e.Left=Ki;function Qi(){return i(Math.random(),Math.random(),Math.random())}e.Random=Qi})(L||(L={}));var zi;(function(e){function n(u,b,h,T){return{normal:L.create(u,b,h),d:T}}e.create=n;function i(u){return n(u[0],u[1],u[2],u[3])}e.fromArray=i;function t(u,b,h){return n(0,0,0,0)}e.fromPoints=t;function r(u,b){let h=n(0,0,0,0);return h.normal=L.normalize(b),h.d=-(b.x*u.x+b.y*u.y+b.z*u.z),h}e.romPositionAndNormal=r;function o(u,b,h){let T=-(b.x*u.x+b.y*u.y+b.z*u.z);return L.dot(h,b)+T}e.signedDistanceToPlaneFromPositionAndNormal=o;function s(u){return[u.normal.x,u.normal.y,u.normal.z,u.d]}e.asArray=s;function c(u){return n(u.normal.x,u.normal.y,u.normal.z,u.d)}e.clone=c;function a(u){return 0}e.getHashCode=a;function d(u){let b=n(0,0,0,0),h=Math.sqrt(u.normal.x*u.normal.x+u.normal.y*u.normal.y+u.normal.z*u.normal.z),T=0;return h!==0&&(T=1/h),b.normal.x=u.normal.x*T,b.normal.y=u.normal.y*T,b.normal.z=u.normal.z*T,b.d*=T,u}e.normalize=d;function l(u,b){let h=Ut.create();Ut.transposeToRef(b,h);let T=h._m,v=u.normal.x,j=u.normal.y,oe=u.normal.z,D=u.d,V=v*T[0]+j*T[1]+oe*T[2]+D*T[3],$=v*T[4]+j*T[5]+oe*T[6]+D*T[7],W=v*T[8]+j*T[9]+oe*T[10]+D*T[11],Y=v*T[12]+j*T[13]+oe*T[14]+D*T[15];return n(V,$,W,Y)}e.transform=l;function w(u,b){return u.normal.x*b.x+u.normal.y*b.y+u.normal.z*b.z+u.d}e.dotCoordinate=w;function _(u,b,h){let T=b.x-u.x,v=b.y-u.y,j=b.z-u.z,oe=h.x-u.x,D=h.y-u.y,V=h.z-u.z,$=v*V-j*D,W=j*oe-T*V,Y=T*D-v*oe,g=Math.sqrt($*$+W*W+Y*Y),S;g!==0?S=1/g:S=0;let M=L.create($*S,W*S,Y*S);return{normal:M,d:-(M.x*u.x+M.y*u.y+M.z*u.z)}}e.copyFromPoints=_;function O(u,b,h){return L.dot(u.normal,b)<=h}e.isFrontFacingTo=O;function x(u,b){return L.dot(b,u.normal)+u.d}e.signedDistanceTo=x})(zi||(zi={}));var Ut;(function(e){function n(f){return f._m}e.m=n;let i=0,t={};function r(){return t}e.IdentityReadonly=r;function o(){let f={updateFlag:0,isIdentity:!1,isIdentity3x2:!0,_isIdentityDirty:!0,_isIdentity3x2Dirty:!0,_m:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};return Qe(f,!1),f}e.create=o;function s(f,p=0){let y=o();return c(f,p,y),y}e.fromArray=s;function c(f,p,y){for(let E=0;E<16;E++)y._m[E]=f[E+p];ze(y)}e.fromArrayToRef=c;function a(f,p,y,E){for(let A=0;A<16;A++)E._m[A]=f[A+p]*y;ze(E)}e.fromFloatArrayToRefScaled=a;function d(f,p,y,E,A,F,z,G,ee,ae,fe,_e,ue,Le,Fe,qe,Be){let ce=Be._m;ce[0]=f,ce[1]=p,ce[2]=y,ce[3]=E,ce[4]=A,ce[5]=F,ce[6]=z,ce[7]=G,ce[8]=ee,ce[9]=ae,ce[10]=fe,ce[11]=_e,ce[12]=ue,ce[13]=Le,ce[14]=Fe,ce[15]=qe,ze(Be)}e.fromValuesToRef=d;function l(f,p,y,E,A,F,z,G,ee,ae,fe,_e,ue,Le,Fe,qe){let Be=o(),ce=Be._m;return ce[0]=f,ce[1]=p,ce[2]=y,ce[3]=E,ce[4]=A,ce[5]=F,ce[6]=z,ce[7]=G,ce[8]=ee,ce[9]=ae,ce[10]=fe,ce[11]=_e,ce[12]=ue,ce[13]=Le,ce[14]=Fe,ce[15]=qe,ze(Be),Be}e.fromValues=l;function w(f,p,y){let E=o();return _(f,p,y,E),E}e.compose=w;function _(f,p,y,E){let A=[o(),o(),o()];g(f.x,f.y,f.z,A[1]),Bo(p,A[0]),q(A[1],A[0],E),lr(E,y)}e.composeToRef=_;function O(){let f=l(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return Qe(f,!0),f}e.Identity=O;function x(f){d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,f),Qe(f,!0)}e.IdentityToRef=x;function u(){let f=l(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return Qe(f,!1),f}e.Zero=u;function b(f){let p=o();return h(f,p),p}e.RotationX=b;function h(f,p){let y=Math.sin(f),E=Math.cos(f);d(1,0,0,0,0,E,y,0,0,-y,E,0,0,0,0,1,p),Qe(p,E===1&&y===0)}e.rotationXToRef=h;function T(f){let p=o();return v(f,p),p}e.rotationY=T;function v(f,p){let y=Math.sin(f),E=Math.cos(f);d(E,0,-y,0,0,1,0,0,y,0,E,0,0,0,0,1,p),Qe(p,E===1&&y===0)}e.rotationYToRef=v;function j(f){let p=o();return oe(f,p),p}e.rotationZ=j;function oe(f,p){let y=Math.sin(f),E=Math.cos(f);d(E,y,0,0,-y,E,0,0,0,0,1,0,0,0,0,1,p),Qe(p,E===1&&y===0)}e.rotationZToRef=oe;function D(f,p){let y=o();return V(f,p,y),y}e.rotationAxis=D;function V(f,p,y){let E=Math.sin(-p),A=Math.cos(-p),F=1-A,z=L.normalize(f),G=y._m;G[0]=z.x*z.x*F+A,G[1]=z.x*z.y*F-z.z*E,G[2]=z.x*z.z*F+z.y*E,G[3]=0,G[4]=z.y*z.x*F+z.z*E,G[5]=z.y*z.y*F+A,G[6]=z.y*z.z*F-z.x*E,G[7]=0,G[8]=z.z*z.x*F-z.y*E,G[9]=z.z*z.y*F+z.x*E,G[10]=z.z*z.z*F+A,G[11]=0,G[12]=0,G[13]=0,G[14]=0,G[15]=1,ze(y)}e.rotationAxisToRef=V;function $(f,p,y){let E=o();return W(f,p,y,E),E}e.rotationYawPitchRoll=$;function W(f,p,y,E){let A=Se.Zero();Se.fromRotationYawPitchRollToRef(f,p,y,A),Bo(A,E)}e.rotationYawPitchRollToRef=W;function Y(f,p,y){let E=o();return g(f,p,y,E),E}e.scaling=Y;function g(f,p,y,E){d(f,0,0,0,0,p,0,0,0,0,y,0,0,0,0,1,E),Qe(E,f===1&&p===1&&y===1)}e.scalingToRef=g;function S(f,p,y){let E=o();return M(f,p,y,E),E}e.translation=S;function M(f,p,y,E){d(1,0,0,0,0,1,0,0,0,0,1,0,f,p,y,1,E),Qe(E,f===0&&p===0&&y===0)}e.translationToRef=M;function P(f,p,y){let E=o();return J(f,p,y,E),E}e.lerp=P;function J(f,p,y,E){for(let A=0;A<16;A++)E._m[A]=f._m[A]*(1-y)+p._m[A]*y;ze(E)}e.lerpToRef=J;function ne(f,p,y){let E=o();return ie(f,p,y,E),E}e.decomposeLerp=ne;function ie(f,p,y,E){let A=L.Zero(),F=Se.Zero(),z=L.Zero();Ue(f,A,F,z);let G=L.Zero(),ee=Se.Zero(),ae=L.Zero();Ue(p,G,ee,ae);let fe=L.Zero();L.lerpToRef(A,G,y,fe);let _e=Se.Zero();Se.slerpToRef(F,ee,y,_e);let ue=L.Zero();L.lerpToRef(z,ae,y,ue),_(fe,_e,ue,E)}e.decomposeLerpToRef=ie;function K(f,p,y){let E=o();return pe(f,p,y,E),E}e.LookAtLH=K;function pe(f,p,y,E){let A=L.Zero(),F=L.Zero(),z=L.Zero();L.subtractToRef(p,f,z),L.normalizeToRef(z,z),L.crossToRef(y,z,A);let G=L.lengthSquared(A);G===0?A.x=1:L.normalizeFromLengthToRef(A,Math.sqrt(G),A),L.crossToRef(z,A,F),L.normalizeToRef(F,F);let ee=-L.dot(A,f),ae=-L.dot(F,f),fe=-L.dot(z,f);d(A.x,F.x,z.x,0,A.y,F.y,z.y,0,A.z,F.z,z.z,0,ee,ae,fe,1,E)}e.lookAtLHToRef=pe;function be(f,p,y){let E=o();return ke(f,p,y,E),E}e.lookAtRH=be;function ke(f,p,y,E){let A=L.Zero(),F=L.Zero(),z=L.Zero();L.subtractToRef(f,p,z),L.normalizeToRef(z,z),L.crossToRef(y,z,A);let G=L.lengthSquared(A);G===0?A.x=1:L.normalizeFromLengthToRef(A,Math.sqrt(G),A),L.crossToRef(z,A,F),L.normalizeToRef(F,F);let ee=-L.dot(A,f),ae=-L.dot(F,f),fe=-L.dot(z,f);d(A.x,F.x,z.x,0,A.y,F.y,z.y,0,A.z,F.z,z.z,0,ee,ae,fe,1,E)}e.lookAtRHToRef=ke;function we(f,p,y,E){let A=o();return ve(f,p,y,E,A),A}e.orthoLH=we;function ve(f,p,y,E,A){let F=y,z=E,G=2/f,ee=2/p,ae=2/(z-F),fe=-(z+F)/(z-F);d(G,0,0,0,0,ee,0,0,0,0,ae,0,0,0,fe,1,A),Qe(A,G===1&&ee===1&&ae===1&&fe===0)}e.orthoLHToRef=ve;function ye(f,p,y,E,A,F){let z=o();return pt(f,p,y,E,A,F,z),z}e.OrthoOffCenterLH=ye;function pt(f,p,y,E,A,F,z){let G=A,ee=F,ae=2/(p-f),fe=2/(E-y),_e=2/(ee-G),ue=-(ee+G)/(ee-G),Le=(f+p)/(f-p),Fe=(E+y)/(y-E);d(ae,0,0,0,0,fe,0,0,0,0,_e,0,Le,Fe,ue,1,z),ze(z)}e.orthoOffCenterLHToRef=pt;function N(f,p,y,E,A,F){let z=o();return U(f,p,y,E,A,F,z),z}e.orthoOffCenterRH=N;function U(f,p,y,E,A,F,z){pt(f,p,y,E,A,F,z),z._m[10]*=-1}e.orthoOffCenterRHToRef=U;function Z(f,p,y,E){let A=o(),F=y,z=E,G=2*F/f,ee=2*F/p,ae=(z+F)/(z-F),fe=-2*z*F/(z-F);return d(G,0,0,0,0,ee,0,0,0,0,ae,1,0,0,fe,0,A),Qe(A,!1),A}e.perspectiveLH=Z;function k(f,p,y,E){let A=o();return C(f,p,y,E,A),A}e.perspectiveFovLH=k;function C(f,p,y,E,A,F=!0){let z=y,G=E,ee=1/Math.tan(f*.5),ae=F?ee/p:ee,fe=F?ee:ee*p,_e=(G+z)/(G-z),ue=-2*G*z/(G-z);d(ae,0,0,0,0,fe,0,0,0,0,_e,1,0,0,ue,0,A),Qe(A,!1)}e.perspectiveFovLHToRef=C;function re(f,p,y,E){let A=o();return Ie(f,p,y,E,A),A}e.PerspectiveFovRH=re;function Ie(f,p,y,E,A,F=!0){let z=y,G=E,ee=1/Math.tan(f*.5),ae=F?ee/p:ee,fe=F?ee:ee*p,_e=-(G+z)/(G-z),ue=-2*G*z/(G-z);d(ae,0,0,0,0,fe,0,0,0,0,_e,-1,0,0,ue,0,A),Qe(A,!1)}e.perspectiveFovRHToRef=Ie;function Wi(f,p,y,E,A=!1){let F=A?-1:1,z=Math.tan(f.upDegrees*Math.PI/180),G=Math.tan(f.downDegrees*Math.PI/180),ee=Math.tan(f.leftDegrees*Math.PI/180),ae=Math.tan(f.rightDegrees*Math.PI/180),fe=2/(ee+ae),_e=2/(z+G),ue=E._m;ue[0]=fe,ue[1]=ue[2]=ue[3]=ue[4]=0,ue[5]=_e,ue[6]=ue[7]=0,ue[8]=(ee-ae)*fe*.5,ue[9]=-((z-G)*_e*.5),ue[10]=-y/(p-y),ue[11]=1*F,ue[12]=ue[13]=ue[15]=0,ue[14]=-(2*y*p)/(y-p),ze(E)}e.perspectiveFovWebVRToRef=Wi;function Vi(f){return[f._m[0],f._m[1],f._m[4],f._m[5]]}e.GetAsMatrix2x2=Vi;function rr(f){return[f._m[0],f._m[1],f._m[2],f._m[4],f._m[5],f._m[6],f._m[8],f._m[9],f._m[10]]}e.GetAsMatrix3x3=rr;function Hi(f){let p=o();return zo(f,p),p}e.transpose=Hi;function zo(f,p){let y=p._m,E=f._m;y[0]=E[0],y[1]=E[4],y[2]=E[8],y[3]=E[12],y[4]=E[1],y[5]=E[5],y[6]=E[9],y[7]=E[13],y[8]=E[2],y[9]=E[6],y[10]=E[10],y[11]=E[14],y[12]=E[3],y[13]=E[7],y[14]=E[11],y[15]=E[15],Qe(p,f.isIdentity,f._isIdentityDirty)}e.transposeToRef=zo;function Gi(f){let p=o();return ir(f,p),p}e.reflection=Gi;function ir(f,p){let y=zi.normalize(f),E=y.normal.x,A=y.normal.y,F=y.normal.z,z=-2*E,G=-2*A,ee=-2*F;d(z*E+1,G*E,ee*E,0,z*A,G*A+1,ee*A,0,z*F,G*F,ee*F+1,0,z*y.d,G*y.d,ee*y.d,1,p)}e.reflectionToRef=ir;function ji(f,p,y,E){d(f.x,f.y,f.z,0,p.x,p.y,p.z,0,y.x,y.y,y.z,0,0,0,0,1,E)}e.fromXYZAxesToRef=ji;function Bo(f,p){let y=f.x*f.x,E=f.y*f.y,A=f.z*f.z,F=f.x*f.y,z=f.z*f.w,G=f.z*f.x,ee=f.y*f.w,ae=f.y*f.z,fe=f.x*f.w;p._m[0]=1-2*(E+A),p._m[1]=2*(F+z),p._m[2]=2*(G-ee),p._m[3]=0,p._m[4]=2*(F-z),p._m[5]=1-2*(A+y),p._m[6]=2*(ae+fe),p._m[7]=0,p._m[8]=2*(G+ee),p._m[9]=2*(ae-fe),p._m[10]=1-2*(E+y),p._m[11]=0,p._m[12]=0,p._m[13]=0,p._m[14]=0,p._m[15]=1,ze(p)}e.fromQuaternionToRef=Bo;function ze(f){f.updateFlag=i++,f.isIdentity=!1,f.isIdentity3x2=!1,f._isIdentityDirty=!0,f._isIdentity3x2Dirty=!0}function ar(f){if(f._isIdentityDirty){f._isIdentityDirty=!1;let p=f._m;f.isIdentity=p[0]===1&&p[1]===0&&p[2]===0&&p[3]===0&&p[4]===0&&p[5]===1&&p[6]===0&&p[7]===0&&p[8]===0&&p[9]===0&&p[10]===1&&p[11]===0&&p[12]===0&&p[13]===0&&p[14]===0&&p[15]===1}return f.isIdentity}e.isIdentityUpdate=ar;function qi(f){return f._isIdentity3x2Dirty&&(f._isIdentity3x2Dirty=!1,f._m[0]!==1||f._m[5]!==1||f._m[15]!==1||f._m[1]!==0||f._m[2]!==0||f._m[3]!==0||f._m[4]!==0||f._m[6]!==0||f._m[7]!==0||f._m[8]!==0||f._m[9]!==0||f._m[10]!==0||f._m[11]!==0||f._m[12]!==0||f._m[13]!==0||f._m[14]!==0?f.isIdentity3x2=!1:f.isIdentity3x2=!0),f.isIdentity3x2}e.isIdentityAs3x2Update=qi;function cr(f){if(f.isIdentity===!0)return 1;let p=f._m,y=p[0],E=p[1],A=p[2],F=p[3],z=p[4],G=p[5],ee=p[6],ae=p[7],fe=p[8],_e=p[9],ue=p[10],Le=p[11],Fe=p[12],qe=p[13],Be=p[14],ce=p[15],st=ue*ce-Be*Le,xt=_e*ce-qe*Le,gt=_e*Be-qe*ue,_t=fe*ce-Fe*Le,Tt=fe*Be-ue*Fe,St=fe*qe-Fe*_e,It=+(G*st-ee*xt+ae*gt),Gt=-(z*st-ee*_t+ae*Tt),jt=+(z*xt-G*_t+ae*St),qt=-(z*gt-G*Tt+ee*St);return y*It+E*Gt+A*jt+F*qt}e.determinant=cr;function Yi(f){return f._m}e.toArray=Yi;function sr(f){return f._m}e.asArray=sr;function fr(f){d(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f),Qe(f,!1)}e.reset=fr;function $i(f,p){let y=o();return ur(f,p,y),y}e.add=$i;function ur(f,p,y){for(let E=0;E<16;E++)y._m[E]=f._m[E]+p._m[E];ze(y)}e.addToRef=ur;function mn(f,p){for(let y=0;y<16;y++)f._m[y]+=p._m[y];ze(f)}e.addToSelf=mn;function Ji(f){let p=o();return Po(f,p),p}e.invert=Ji;function Po(f,p){if(f.isIdentity===!0){I(f,p);return}let y=f._m,E=y[0],A=y[1],F=y[2],z=y[3],G=y[4],ee=y[5],ae=y[6],fe=y[7],_e=y[8],ue=y[9],Le=y[10],Fe=y[11],qe=y[12],Be=y[13],ce=y[14],st=y[15],xt=Le*st-ce*Fe,gt=ue*st-Be*Fe,_t=ue*ce-Be*Le,Tt=_e*st-qe*Fe,St=_e*ce-Le*qe,It=_e*Be-qe*ue,Gt=+(ee*xt-ae*gt+fe*_t),jt=-(G*xt-ae*Tt+fe*St),qt=+(G*gt-ee*Tt+fe*It),bn=-(G*_t-ee*St+ae*It),En=E*Gt+A*jt+F*qt+z*bn;if(En===0){I(f,p);return}let De=1/En,xn=ae*st-ce*fe,gn=ee*st-Be*fe,_n=ee*ce-Be*ae,Tn=G*st-qe*fe,Sn=G*ce-qe*ae,Rn=G*Be-qe*ee,An=ae*Fe-Le*fe,rc=ee*Fe-ue*fe,ic=ee*Le-ue*ae,ac=G*Fe-_e*fe,cc=G*Le-_e*ae,sc=G*ue-_e*ee,$u=-(A*xt-F*gt+z*_t),Ju=+(E*xt-F*Tt+z*St),Zu=-(E*gt-A*Tt+z*It),Xu=+(E*_t-A*St+F*It),Ku=+(A*xn-F*gn+z*_n),Qu=-(E*xn-F*Tn+z*Sn),ed=+(E*gn-A*Tn+z*Rn),td=-(E*_n-A*Sn+F*Rn),nd=-(A*An-F*rc+z*ic),od=+(E*An-F*ac+z*cc),rd=-(E*rc-A*ac+z*sc),id=+(E*ic-A*cc+F*sc);d(Gt*De,$u*De,Ku*De,nd*De,jt*De,Ju*De,Qu*De,od*De,qt*De,Zu*De,ed*De,rd*De,bn*De,Xu*De,td*De,id*De,p)}e.invertToRef=Po;function Zi(f,p,y){f._m[p]+=y,ze(f)}e.addAtIndex=Zi;function Xi(f,p,y){return f._m[p]*=y,ze(f),f}e.multiplyAtIndex=Xi;function dr(f,p,y,E){f._m[12]=p,f._m[13]=y,f._m[14]=E,ze(f)}e.setTranslationFromFloats=dr;function lr(f,p){dr(f,p.x,p.y,p.z)}e.setTranslation=lr;function Ki(f){return L.create(f._m[12],f._m[13],f._m[14])}e.getTranslation=Ki;function Qi(f,p){p.x=f._m[12],p.y=f._m[13],p.z=f._m[14]}e.getTranslationToRef=Qi;function m(f){let p=f._m;return d(1,0,0,0,0,1,0,0,0,0,1,0,p[12],p[13],p[14],p[15],f),Qe(f,p[12]===0&&p[13]===0&&p[14]===0&&p[15]===1),f}e.removeRotationAndScaling=m;function R(f,p){let y=o();return q(f,p,y),y}e.multiply=R;function I(f,p){X(f,p._m),Qe(p,f.isIdentity,f._isIdentityDirty,f.isIdentity3x2,f._isIdentity3x2Dirty)}e.copy=I;function X(f,p,y=0){for(let E=0;E<16;E++)p[y+E]=f._m[E]}e.copyToArray=X;function q(f,p,y){if(f.isIdentity){I(p,y);return}if(p.isIdentity){I(f,y);return}Q(f,p,y._m,0),ze(y)}e.multiplyToRef=q;function Q(f,p,y,E){let A=f._m,F=p._m,z=A[0],G=A[1],ee=A[2],ae=A[3],fe=A[4],_e=A[5],ue=A[6],Le=A[7],Fe=A[8],qe=A[9],Be=A[10],ce=A[11],st=A[12],xt=A[13],gt=A[14],_t=A[15],Tt=F[0],St=F[1],It=F[2],Gt=F[3],jt=F[4],qt=F[5],bn=F[6],En=F[7],De=F[8],xn=F[9],gn=F[10],_n=F[11],Tn=F[12],Sn=F[13],Rn=F[14],An=F[15];y[E]=z*Tt+G*jt+ee*De+ae*Tn,y[E+1]=z*St+G*qt+ee*xn+ae*Sn,y[E+2]=z*It+G*bn+ee*gn+ae*Rn,y[E+3]=z*Gt+G*En+ee*_n+ae*An,y[E+4]=fe*Tt+_e*jt+ue*De+Le*Tn,y[E+5]=fe*St+_e*qt+ue*xn+Le*Sn,y[E+6]=fe*It+_e*bn+ue*gn+Le*Rn,y[E+7]=fe*Gt+_e*En+ue*_n+Le*An,y[E+8]=Fe*Tt+qe*jt+Be*De+ce*Tn,y[E+9]=Fe*St+qe*qt+Be*xn+ce*Sn,y[E+10]=Fe*It+qe*bn+Be*gn+ce*Rn,y[E+11]=Fe*Gt+qe*En+Be*_n+ce*An,y[E+12]=st*Tt+xt*jt+gt*De+_t*Tn,y[E+13]=st*St+xt*qt+gt*xn+_t*Sn,y[E+14]=st*It+xt*bn+gt*gn+_t*Rn,y[E+15]=st*Gt+xt*En+gt*_n+_t*An}e.multiplyToArray=Q;function se(f,p){let y=p;if(!y)return!1;if((f.isIdentity||y.isIdentity)&&!f._isIdentityDirty&&!y._isIdentityDirty)return f.isIdentity&&y.isIdentity;let E=f._m,A=y._m;return E[0]===A[0]&&E[1]===A[1]&&E[2]===A[2]&&E[3]===A[3]&&E[4]===A[4]&&E[5]===A[5]&&E[6]===A[6]&&E[7]===A[7]&&E[8]===A[8]&&E[9]===A[9]&&E[10]===A[10]&&E[11]===A[11]&&E[12]===A[12]&&E[13]===A[13]&&E[14]===A[14]&&E[15]===A[15]}e.equals=se;function Ge(f){let p=o();return I(f,p),p}e.clone=Ge;function tt(f){let p=f._m[0]||0;for(let y=1;y<16;y++)p=p*397^(f._m[y]||0);return p}e.getHashCode=tt;function Ue(f,p,y,E){if(f.isIdentity)return E&&(E.x=0,E.y=0,E.z=0),p&&(p.x=1,p.y=1,p.z=1),y&&(y.w=1,y.x=0,y.y=0,y.z=0),!0;let A=f._m;E&&(E.x=A[12],E.y=A[13],E.z=A[14]);let F=p||L.Zero();if(F.x=Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]),F.y=Math.sqrt(A[4]*A[4]+A[5]*A[5]+A[6]*A[6]),F.z=Math.sqrt(A[8]*A[8]+A[9]*A[9]+A[10]*A[10]),cr(f)<=0&&(F.y*=-1),F.x===0||F.y===0||F.z===0)return y&&(y.w=1,y.x=0,y.y=0,y.z=0),!1;if(y){let z=1/F.x,G=1/F.y,ee=1/F.z,ae=o();d(A[0]*z,A[1]*z,A[2]*z,0,A[4]*G,A[5]*G,A[6]*G,0,A[8]*ee,A[9]*ee,A[10]*ee,0,0,0,0,1,ae),Se.fromRotationMatrixToRef(ae,y)}return!0}e.decompose=Ue;function Ht(f,p,y,E,A,F){if(p<0||p>3)return;let z=p*4;f._m[z+0]=y,f._m[z+1]=E,f._m[z+2]=A,f._m[z+3]=F,ze(f)}e.setRowFromFloats=Ht;function hn(f,p){let y=o();return Jt(f,p,y),y}e.scale=hn;function Jt(f,p,y){for(let E=0;E<16;E++)y._m[E]=f._m[E]*p;ze(y)}e.scaleToRef=Jt;function yn(f,p,y){for(let E=0;E<16;E++)y._m[E]+=f._m[E]*p;ze(y)}e.scaleAndAddToRef=yn;function Gu(f,p){let y=o();Po(f,y),zo(y,p);let E=p._m;d(E[0],E[1],E[2],0,E[4],E[5],E[6],0,E[8],E[9],E[10],0,0,0,0,1,p)}e.normalMatrixToRef=Gu;function ju(f){let p=o();return oc(f,p),p}e.getRotationMatrix=ju;function oc(f,p){let y=L.Zero();if(!Ue(f,y)){p=O();return}let E=f._m,A=1/y.x,F=1/y.y,z=1/y.z;d(E[0]*A,E[1]*A,E[2]*A,0,E[4]*F,E[5]*F,E[6]*F,0,E[8]*z,E[9]*z,E[10]*z,0,0,0,0,1,p)}e.getRotationMatrixToRef=oc;function qu(f){f._m[2]*=-1,f._m[6]*=-1,f._m[8]*=-1,f._m[9]*=-1,f._m[14]*=-1,ze(f)}e.toggleModelMatrixHandInPlace=qu;function Yu(f){f._m[8]*=-1,f._m[9]*=-1,f._m[10]*=-1,f._m[11]*=-1,ze(f)}e.toggleProjectionMatrixHandInPlace=Yu;function Qe(f,p,y=!1,E=!1,A=!0){f.updateFlag=i++,f.isIdentity=p,f.isIdentity3x2=p||E,f._isIdentityDirty=f.isIdentity?!1:y,f._isIdentity3x2Dirty=f.isIdentity3x2?!1:A}})(Ut||(Ut={}));var Se;(function(e){function n(g=0,S=0,M=0,P=1){return{x:g,y:S,z:M,w:P}}e.create=n;function i(g,S){return{x:g.x+S.x,y:g.y+S.y,z:g.z+S.z,w:g.w+S.w}}e.add=i;function t(g,S,M){let P=S*.5,J=g*.5,ne=M*.5,ie=Math.cos(P),K=Math.cos(J),pe=Math.cos(ne),be=Math.sin(P),ke=Math.sin(J),we=Math.sin(ne);return n(K*be*pe+ke*ie*we,ke*ie*pe-K*be*we,K*ie*we-ke*be*pe,K*ie*pe+ke*be*we)}e.fromRotationYawPitchRoll=t;function r(g,S,M){return t(S*Qo,g*Qo,M*Qo)}e.fromEulerDegrees=r;function o(g){return Math.sqrt(s(g))}e.length=o;function s(g){return g.x*g.x+g.y*g.y+g.z*g.z+g.w*g.w}e.lengthSquared=s;function c(g,S){return g.x*S.x+g.y*S.y+g.z*S.z+g.w*S.w}e.dot=c;function a(g,S){let M=c(g,S);return Math.acos(Math.min(Math.abs(M),1))*2*er}e.angle=a;function d(g,S,M){let P=a(g,S);if(P===0)return S;let J=Math.min(1,M/P);return h(g,S,J)}e.rotateTowards=d;function l(g,S={x:0,y:1,z:0}){let M=L.normalize(g),P=L.normalize(L.cross(S,M)),J=L.cross(M,P),ne=P.x,ie=P.y,K=P.z,pe=J.x,be=J.y,ke=J.z,we=M.x,ve=M.y,ye=M.z,pt=ne+be+ye,N=n();if(pt>0){let k=Math.sqrt(pt+1);return N.w=k*.5,k=.5/k,N.x=(ke-ve)*k,N.y=(we-K)*k,N.z=(ie-pe)*k,N}if(ne>=be&&ne>=ye){let k=Math.sqrt(1+ne-be-ye),C=.5/k;return N.x=.5*k,N.y=(ie+pe)*C,N.z=(K+we)*C,N.w=(ke-ve)*C,N}if(be>ye){let k=Math.sqrt(1+be-ne-ye),C=.5/k;return N.x=(pe+ie)*C,N.y=.5*k,N.z=(ve+ke)*C,N.w=(we-K)*C,N}let U=Math.sqrt(1+ye-ne-be),Z=.5/U;return N.x=(we+K)*Z,N.y=(ve+ke)*Z,N.z=.5*U,N.w=(ie-pe)*Z,N}e.lookRotation=l;function w(g){let S=1/o(g);return n(g.x*S,g.y*S,g.z*S,g.w*S)}e.normalize=w;function _(g,S,M=L.Up()){let P=L.normalize(g),J=L.normalize(S),ne=L.cross(P,J),ie=Math.sqrt(L.lengthSquared(P)*L.lengthSquared(J))+L.dot(P,J);return L.lengthSquared(ne)<1e-4?Math.abs(ie)<1e-4?w(n(M.x,M.y,M.z,0)):O():w(n(ne.x,ne.y,ne.z,ie))}e.fromToRotation=_;function O(){return n(0,0,0,1)}e.Identity=O;function x(g){let S=L.create(),M=g.x*g.x+g.y*g.y+g.z*g.z+g.w*g.w,P=g.x*g.w-g.y*g.z;return P>.4995*M?(S.x=Math.PI/2,S.y=2*Math.atan2(g.y,g.x),S.z=0):P<-.4995*M?(S.x=-Math.PI/2,S.y=-2*Math.atan2(g.y,g.x),S.z=0):(S.x=Math.asin(2*(g.w*g.x-g.y*g.z)),S.y=Math.atan2(2*g.w*g.y+2*g.z*g.x,1-2*(g.x*g.x+g.y*g.y)),S.z=Math.atan2(2*g.w*g.z+2*g.x*g.y,1-2*(g.z*g.z+g.x*g.x))),S.x*=er,S.y*=er,S.z*=er,S.x=Ae.repeat(S.x,360),S.y=Ae.repeat(S.y,360),S.z=Ae.repeat(S.z,360),S}e.toEulerAngles=x;function u(g,S,M,P){let J=S*.5,ne=g*.5,ie=M*.5,K=Math.cos(J),pe=Math.cos(ne),be=Math.cos(ie),ke=Math.sin(J),we=Math.sin(ne),ve=Math.sin(ie);P.x=pe*ke*be+we*K*ve,P.y=we*K*be-pe*ke*ve,P.z=pe*K*ve-we*ke*be,P.w=pe*K*be+we*ke*ve}e.fromRotationYawPitchRollToRef=u;function b(g,S){let M=g._m,P=M[0],J=M[4],ne=M[8],ie=M[1],K=M[5],pe=M[9],be=M[2],ke=M[6],we=M[10],ve=P+K+we,ye;ve>0?(ye=.5/Math.sqrt(ve+1),S.w=.25/ye,S.x=(ke-pe)*ye,S.y=(ne-be)*ye,S.z=(ie-J)*ye):P>K&&P>we?(ye=2*Math.sqrt(1+P-K-we),S.w=(ke-pe)/ye,S.x=.25*ye,S.y=(J+ie)/ye,S.z=(ne+be)/ye):K>we?(ye=2*Math.sqrt(1+K-P-we),S.w=(ne-be)/ye,S.x=(J+ie)/ye,S.y=.25*ye,S.z=(pe+ke)/ye):(ye=2*Math.sqrt(1+we-P-K),S.w=(ie-J)/ye,S.x=(ne+be)/ye,S.y=(pe+ke)/ye,S.z=.25*ye)}e.fromRotationMatrixToRef=b;function h(g,S,M){let P=e.Identity();return e.slerpToRef(g,S,M,P),P}e.slerp=h;function T(g,S,M,P){let J,ne,ie=g.x*S.x+g.y*S.y+g.z*S.z+g.w*S.w,K=!1;if(ie<0&&(K=!0,ie=-ie),ie>.999999)ne=1-M,J=K?-M:M;else{let pe=Math.acos(ie),be=1/Math.sin(pe);ne=Math.sin((1-M)*pe)*be,J=K?-Math.sin(M*pe)*be:Math.sin(M*pe)*be}P.x=ne*g.x+J*S.x,P.y=ne*g.y+J*S.y,P.z=ne*g.z+J*S.z,P.w=ne*g.w+J*S.w}e.slerpToRef=T;function v(g,S){let M=n(0,0,0,1);return j(g,S,M),M}e.multiply=v;function j(g,S,M){M.x=g.x*S.w+g.y*S.z-g.z*S.y+g.w*S.x,M.y=-g.x*S.z+g.y*S.w+g.z*S.x+g.w*S.y,M.z=g.x*S.y-g.y*S.x+g.z*S.w+g.w*S.z,M.w=-g.x*S.x-g.y*S.y-g.z*S.z+g.w*S.w}e.multiplyToRef=j;function oe(g,S){if(L.lengthSquared(S)===0)return e.Identity();let M=O(),P=g*Qo;P*=.5;let J=L.normalize(S);return L.scaleToRef(J,Math.sin(P),J),M.x=J.x,M.y=J.y,M.z=J.z,M.w=Math.cos(P),w(M)}e.fromAngleAxis=oe;function D(g,S,M){let P=e.create(0,0,0,0);return V(g,S,M,P),P}e.fromAxisToRotationQuaternion=D;function V(g,S,M,P){let J=Ut.create();Ut.fromXYZAxesToRef(L.normalize(g),L.normalize(S),L.normalize(M),J),e.fromRotationMatrixToRef(J,P)}e.fromAxisToRotationQuaternionToRef=V;function $(){return n(0,0,0,0)}e.Zero=$;function W(g,S,M=L.Up()){let P=e.Identity();return Y(g,S,M,P),P}e.fromLookAt=W;function Y(g,S,M=L.Up(),P){let J=Ut.Identity();Ut.lookAtLHToRef(g,S,M,J),Ut.invertToRef(J,J),e.fromRotationMatrixToRef(J,P)}e.fromLookAtToRef=Y})(Se||(Se={}));var Ln;(function(e){function n(N=0,U=0,Z=0,k=1){return{r:N,g:U,b:Z,a:k}}e.create=n;function i(N){if(N.substring(0,1)!=="#"||N.length!==7&&N.length!==9)return n(0,0,0,1);let U=parseInt(N.substring(1,3),16),Z=parseInt(N.substring(3,5),16),k=parseInt(N.substring(5,7),16),C=N.substring(7,9),re=C?parseInt(C,16):255;return e.fromInts(U,Z,k,re)}e.fromHexString=i;function t(N,U,Z){let k=n(0,0,0,0);return e.lerpToRef(N,U,Z,k),k}e.lerp=t;function r(N,U,Z,k){k.r=N.r+(U.r-N.r)*Z,k.g=N.g+(U.g-N.g)*Z,k.b=N.b+(U.b-N.b)*Z,k.a=N.a+(U.a-N.a)*Z}e.lerpToRef=r;function o(){return n(1,0,0,1)}e.Red=o;function s(){return n(0,1,0,1)}e.Green=s;function c(){return n(0,0,1,1)}e.Blue=c;function a(){return n(0,0,0,1)}e.Black=a;function d(){return n(1,1,1,1)}e.White=d;function l(){return n(.5,0,.5,1)}e.Purple=l;function w(){return n(1,0,1,1)}e.Magenta=w;function _(){return n(1,1,0,1)}e.Yellow=_;function O(){return n(.5,.5,.5,1)}e.Gray=O;function x(){return n(0,1,1,1)}e.Teal=x;function u(){return n(0,0,0,0)}e.Clear=u;function b(N,U=1){return n(N.r,N.g,N.b,U)}e.fromColor3=b;function h(N,U=0){return n(N[U],N[U+1],N[U+2],N[U+3])}e.fromArray=h;function T(N,U,Z,k){return n(N/255,U/255,Z/255,k/255)}e.fromInts=T;function v(N,U){if(N.length===U*3){let Z=[];for(let k=0;k<N.length;k+=3){let C=k/3*4;Z[C]=N[k],Z[C+1]=N[k+1],Z[C+2]=N[k+2],Z[C+3]=1}return Z}return N}e.checkColors4=v;function j(N,U,Z){Z.r=N.r+U.r,Z.g=N.g+U.g,Z.b=N.b+U.b,Z.a=N.a+U.a}e.addToRef=j;function oe(N,U,Z=0){U[Z]=N.r,U[Z+1]=N.g,U[Z+2]=N.b,U[Z+3]=N.a}e.toArray=oe;function D(N,U){let Z=u();return j(N,U,Z),Z}e.add=D;function V(N,U){let Z=u();return $(N,U,Z),Z}e.subtract=V;function $(N,U,Z){Z.r=N.r-U.r,Z.g=N.g-U.g,Z.b=N.b-U.b,Z.a=N.a-U.a}e.subtractToRef=$;function W(N,U){return n(N.r*U,N.g*U,N.b*U,N.a*U)}e.scale=W;function Y(N,U,Z){Z.r=N.r*U,Z.g=N.g*U,Z.b=N.b*U,Z.a=N.a*U}e.scaleToRef=Y;function g(N,U,Z){Z.r+=N.r*U,Z.g+=N.g*U,Z.b+=N.b*U,Z.a+=N.a*U}e.scaleAndAddToRef=g;function S(N,U=0,Z=1,k){k.r=Ae.clamp(N.r,U,Z),k.g=Ae.clamp(N.g,U,Z),k.b=Ae.clamp(N.b,U,Z),k.a=Ae.clamp(N.a,U,Z)}e.clampToRef=S;function M(N,U){return n(N.r*U.r,N.g*U.g,N.b*U.b,N.a*U.a)}e.multiply=M;function P(N,U,Z){Z.r=N.r*U.r,Z.g=N.g*U.g,Z.b=N.b*U.b,Z.a=N.a*U.a}e.multiplyToRef=P;function J(N){return"{R: "+N.r+" G:"+N.g+" B:"+N.b+" A:"+N.a+"}"}e.toString=J;function ne(N){let U=N.r||0;return U=U*397^(N.g||0),U=U*397^(N.b||0),U=U*397^(N.a||0),U}e.getHashCode=ne;function ie(N){return n(N.r,N.g,N.b,N.a)}e.clone=ie;function K(N,U){U.r=N.r,U.g=N.g,U.b=N.b,U.a=N.a}e.copyFrom=K;function pe(N,U,Z,k,C){C.r=N,C.g=U,C.b=Z,C.a=k}e.copyFromFloats=pe;function be(N,U,Z,k,C){C.r=N,C.g=U,C.b=Z,C.a=k}e.set=be;function ke(N){let U=N.r*255|0,Z=N.g*255|0,k=N.b*255|0,C=N.a*255|0;return"#"+Ae.toHex(U)+Ae.toHex(Z)+Ae.toHex(k)+Ae.toHex(C)}e.toHexString=ke;function we(N){let U=n();return ve(N,U),U}e.toLinearSpace=we;function ve(N,U){U.r=Math.pow(N.r,ln),U.g=Math.pow(N.g,ln),U.b=Math.pow(N.b,ln),U.a=N.a}e.toLinearSpaceToRef=ve;function ye(N){let U=n();return pt(N,U),U}e.toGammaSpace=ye;function pt(N,U){U.r=Math.pow(N.r,dn),U.g=Math.pow(N.g,dn),U.b=Math.pow(N.b,dn),U.a=N.a}e.toGammaSpaceToRef=pt})(Ln||(Ln={}));var Co;(function(e){function n(k=0,C=0,re=0){return{r:k,g:C,b:re}}e.create=n;function i(k){if(k.substring(0,1)!=="#"||k.length!==7)return n(0,0,0);let C=parseInt(k.substring(1,3),16),re=parseInt(k.substring(3,5),16),Ie=parseInt(k.substring(5,7),16);return r(C,re,Ie)}e.fromHexString=i;function t(k,C=0){return n(k[C],k[C+1],k[C+2])}e.fromArray=t;function r(k,C,re){return n(k/255,C/255,re/255)}e.fromInts=r;function o(k,C,re){let Ie=n(0,0,0);return e.lerpToRef(k,C,re,Ie),Ie}e.lerp=o;function s(k,C,re,Ie){Ie.r=k.r+(C.r-k.r)*re,Ie.g=k.g+(C.g-k.g)*re,Ie.b=k.b+(C.b-k.b)*re}e.lerpToRef=s;function c(){return n(1,0,0)}e.Red=c;function a(){return n(0,1,0)}e.Green=a;function d(){return n(0,0,1)}e.Blue=d;function l(){return n(0,0,0)}e.Black=l;function w(){return n(1,1,1)}e.White=w;function _(){return n(.5,0,.5)}e.Purple=_;function O(){return n(1,0,1)}e.Magenta=O;function x(){return n(1,1,0)}e.Yellow=x;function u(){return n(.5,.5,.5)}e.Gray=u;function b(){return n(0,1,1)}e.Teal=b;function h(){return n(Math.random(),Math.random(),Math.random())}e.Random=h;function T(k){return"{R: "+k.r+" G:"+k.g+" B:"+k.b+"}"}e.toString=T;function v(k){let C=k.r||0;return C=C*397^(k.g||0),C=C*397^(k.b||0),C}e.getHashCode=v;function j(k,C,re=0){C[re]=k.r,C[re+1]=k.g,C[re+2]=k.b}e.toArray=j;function oe(k,C=1){return Ln.create(k.r,k.g,k.b,C)}e.toColor4=oe;function D(k){let C=new Array;return j(k,C,0),C}e.asArray=D;function V(k){return k.r*.3+k.g*.59+k.b*.11}e.toLuminance=V;function $(k,C){return n(k.r*C.r,k.g*C.g,k.b*C.b)}e.multiply=$;function W(k,C,re){re.r=k.r*C.r,re.g=k.g*C.g,re.b=k.b*C.b}e.multiplyToRef=W;function Y(k,C){return C&&k.r===C.r&&k.g===C.g&&k.b===C.b}e.equals=Y;function g(k,C,re,Ie){return k.r===C&&k.g===re&&k.b===Ie}e.equalsFloats=g;function S(k,C){return n(k.r*C,k.g*C,k.b*C)}e.scale=S;function M(k,C,re){re.r=k.r*C,re.g=k.g*C,re.b=k.b*C}e.scaleToRef=M;function P(k,C,re){re.r+=k.r*C,re.g+=k.g*C,re.b+=k.b*C}e.scaleAndAddToRef=P;function J(k,C=0,re=1,Ie){Ie.r=Ae.clamp(k.r,C,re),Ie.g=Ae.clamp(k.g,C,re),Ie.b=Ae.clamp(k.b,C,re)}e.clampToRef=J;function ne(k,C=0,re=1){let Ie=e.Black();return J(k,C,re,Ie),Ie}e.clamp=ne;function ie(k,C){return n(k.r+C.r,k.g+C.g,k.b+C.b)}e.add=ie;function K(k,C,re){re.r=k.r+C.r,re.g=k.g+C.g,re.b=k.b+C.b}e.addToRef=K;function pe(k,C){return n(k.r-C.r,k.g-C.g,k.b-C.b)}e.subtract=pe;function be(k,C,re){re.r=k.r-C.r,re.g=k.g-C.g,re.b=k.b-C.b}e.subtractToRef=be;function ke(k){return n(k.r,k.g,k.b)}e.clone=ke;function we(k,C){C.r=k.r,C.g=k.g,C.b=k.b}e.copyFrom=we;function ve(k,C,re,Ie){k.r=C,k.g=re,k.b=Ie}e.set=ve;function ye(k){let C=k.r*255|0,re=k.g*255|0,Ie=k.b*255|0;return"#"+Ae.toHex(C)+Ae.toHex(re)+Ae.toHex(Ie)}e.toHexString=ye;function pt(k){let C=n();return N(k,C),C}e.toLinearSpace=pt;function N(k,C){C.r=Math.pow(k.r,ln),C.g=Math.pow(k.g,ln),C.b=Math.pow(k.b,ln)}e.toLinearSpaceToRef=N;function U(k){let C=n();return Z(k,C),C}e.toGammaSpace=U;function Z(k,C){C.r=Math.pow(k.r,dn),C.g=Math.pow(k.g,dn),C.b=Math.pow(k.b,dn)}e.toGammaSpaceToRef=Z})(Co||(Co={}));function tr(e){let n=He.getOrNull(e);if(!n)return L.Zero();let i=n.parent;if(i){let t=He.get(i).rotation;return L.add(tr(i),L.rotate(n.position,t))}else return n.position}function nr(e){let n=He.getOrNull(e);if(!n)return Se.Identity();let i=n.parent;return i?Se.multiply(n.rotation,nr(i)):n.rotation}var Ce;(function(e){e.LINEAR="linear",e.EASEINQUAD="easeinquad",e.EASEOUTQUAD="easeoutquad",e.EASEQUAD="easequad",e.EASEINSINE="easeinsine",e.EASEOUTSINE="easeoutsine",e.EASESINE="easeinoutsine",e.EASEINEXPO="easeinexpo",e.EASEOUTEXPO="easeoutexpo",e.EASEEXPO="easeinoutexpo",e.EASEINELASTIC="easeinelastic",e.EASEOUTELASTIC="easeoutelastic",e.EASEELASTIC="easeinoutelastic",e.EASEINBOUNCE="easeinbounce",e.EASEOUTEBOUNCE="easeoutbounce",e.EASEBOUNCE="easeinoutbounce"})(Ce||(Ce={}));function $a(e,n){switch(e){case Ce.LINEAR:return n;case Ce.EASEINQUAD:return Ep(n);case Ce.EASEOUTQUAD:return xp(n);case Ce.EASEQUAD:return gp(n);case Ce.EASEINSINE:return _p(n);case Ce.EASEOUTSINE:return Tp(n);case Ce.EASESINE:return Sp(n);case Ce.EASEINEXPO:return Rp(n);case Ce.EASEOUTEXPO:return Ap(n);case Ce.EASEEXPO:return kp(n);case Ce.EASEINELASTIC:return wp(n);case Ce.EASEOUTELASTIC:return Np(n);case Ce.EASEELASTIC:return Ip(n);case Ce.EASEINBOUNCE:return Op(n);case Ce.EASEOUTEBOUNCE:return Cp(n);case Ce.EASEBOUNCE:return Mp(n);default:return n}}function Ep(e){return e*e}function xp(e){return e*(2-e)}function gp(e){return e*e/(2*(e*e-e)+1)}function _p(e){return 1-Math.cos(e*Math.PI/2)}function Tp(e){return Math.sin(e*Math.PI/2)}function Sp(e){return-(Math.cos(Math.PI*e)-1)/2}function Rp(e){return e===0?0:Math.pow(2,10*e-10)}function Ap(e){return e===1?1:1-Math.pow(2,-10*e)}function kp(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}function wp(e){let n=2*Math.PI/3;return e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*n)}function Np(e){let n=2*Math.PI/3;return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*n)+1}function Ip(e){let n=2*Math.PI/4.5;return e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*n))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*n)/2+1}function Op(e){return 1-Bi(1-e)}function Cp(e){return Bi(e)}function Mp(e){return e<.5?(1-Bi(1-2*e))/2:(1+Bi(2*e-1))/2}function Bi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Mu(e,n,i){let t=new Array,r=1/n,o=0;if(i){let s=e.length;for(let c=0;c<s;c++){o=0;for(let a=0;a<n;a++)t.push(L.catmullRom(e[c%s],e[(c+1)%s],e[(c+2)%s],e[(c+3)%s],o)),o+=r}t.push(t[0])}else{let s=new Array;s.push(L.clone(e[0])),Array.prototype.push.apply(s,e),s.push(L.clone(e[e.length-1]));let c=0;for(;c<s.length-3;c++){o=0;for(let a=0;a<n;a++)t.push(L.catmullRom(s[c],s[c+1],s[c+2],s[c+3],o)),o+=r}c--,t.push(L.catmullRom(s[c],s[c+1],s[c+2],s[c+3],o))}return t}function vu(e,n,i,t){return e.x<=t.x&&n.x>=i.x&&e.y<=t.y&&n.y>=i.y&&e.z<=t.z&&n.z>=i.z}function zu(e,n,i,t){let r=L.distanceSquared(e,i),o=n+t;return r<o*o}function Ja(e,n,i,t){let r=0;return i.x<e.x&&(r+=(e.x-i.x)*(e.x-i.x)),i.x>n.x&&(r+=(i.x-n.x)*(i.x-n.x)),i.y<e.y&&(r+=(e.y-i.y)*(e.y-i.y)),i.y>n.y&&(r+=(i.y-n.y)*(i.y-n.y)),i.z<e.z&&(r+=(e.z-i.z)*(e.z-i.z)),i.z>n.z&&(r+=(i.z-n.z)*(i.z-n.z)),r<t*t}var et;(function(e){e.TimerSystemPriority=1e5+256,e.TweenSystemPriority=1e5+192,e.PerpetualMotionSystemPriority=1e5+192,e.PathSystemPriority=1e5+192,e.TriggerSystemPriority=1e5+128,e.ActionSystemPriority=1e5+64})(et||(et={}));function vp(e){let n={start:B.Vector3,end:B.Vector3,interpolationType:B.EnumString(Ce,Ce.LINEAR),speed:B.Float,normalizedTime:B.Float},i=e.defineComponent("dcl.utils.PositionTween",n),t=e.defineComponent("dcl.utils.ScaleTween",n),r=e.defineComponent("dcl.utils.RotationTween",{start:B.Quaternion,end:B.Quaternion,interpolationType:B.EnumString(Ce,Ce.LINEAR),speed:B.Float,normalizedTime:B.Float}),o=new Map,s=new Map,c=new Map;function a(_,O,x){return function(b){let h=[];for(let T of O.keys()){if(e.getEntityState(T)==Ve.Removed||!_.has(T)){O.delete(T);continue}let v=_.getMutable(T);v.normalizedTime=Ae.clamp(v.normalizedTime+b*v.speed,0,1);let j=$a(v.interpolationType,v.normalizedTime);x(He.getMutable(T),v.start,v.end,j),v.normalizedTime>=1&&h.push(T)}for(let T of h){let v=O.get(T);_.deleteFrom(T),O.delete(T),v&&v()}}}function d(_,O){return function(x){_.deleteFrom(x),O.delete(x)}}function l(_,O){return function(x,u,b,h,T=Ce.LINEAR,v){O.set(x,v),_.createOrReplace(x,{start:u,end:b,speed:h==0?0:1/h,interpolationType:T,normalizedTime:h==0?1:0})}}function w(_){return function(O){if(!_.has(O))throw new Error(`Entity ${O} is not registered with tweens system`);return _.get(O)}}return e.addSystem(a(i,o,function(_,O,x,u){_.position=L.lerp(O,x,u)}),et.TweenSystemPriority),e.addSystem(a(r,s,function(_,O,x,u){_.rotation=Se.slerp(O,x,u)}),et.TweenSystemPriority),e.addSystem(a(t,c,function(_,O,x,u){_.scale=L.lerp(O,x,u)}),et.TweenSystemPriority),{startTranslation:l(i,o),stopTranslation:d(i,o),startRotation:l(r,s),stopRotation:d(r,s),startScaling:l(t,c),stopScaling:d(t,c),getTranslationOnFinishCallback:w(o),getRotationOnFinishCallback:w(s),getScalingOnFinishCallback:w(c)}}var or=vp(he);var Bu=new Set;function Pu(e,n){let{Animator:i,Transform:t,AudioSource:r,AvatarAttach:o,VisibilityComponent:s,GltfContainer:c}=n,{Actions:a,States:d,Counter:l}=vi(e);return function(S){let M=e.getEntitiesWith(a);for(let[P,J]of M){if(Bu.has(P))continue;let ne=J.value.reduce((K,pe)=>K.add(pe.type),new Set);for(let K of ne)switch(K){case Ne.PLAY_ANIMATION:{w(P);break}default:break}let ie=Oi(P);for(let K of J.value)ie.on(K.name,()=>{switch(K.type){case Ne.PLAY_ANIMATION:{_(P,at(K));break}case Ne.STOP_ANIMATION:{O(P,at(K));break}case Ne.SET_STATE:{x(P,at(K));break}case Ne.START_TWEEN:{u(P,at(K));break}case Ne.SET_COUNTER:{v(P,at(K));break}case Ne.INCREMENT_COUNTER:{j(P,at(K));break}case Ne.DECREASE_COUNTER:{oe(P,at(K));break}case Ne.PLAY_SOUND:{D(P,at(K));break}case Ne.STOP_SOUND:{V(P,at(K));break}case Ne.SET_VISIBILITY:{$(P,at(K));break}case Ne.ATTACH_TO_PLAYER:{W(P,at(K));break}case Ne.DETACH_FROM_PLAYER:{Y(P,at(K));break}default:break}});Bu.add(P)}};function w(g){i.create(g,{states:[]}),i.stopAllAnimations(g)}function _(g,S){let{animation:M,loop:P}=S,J=i.getMutable(g);J.states.some(ie=>ie.clip===M)||(J.states=[...J.states,{clip:M}]),i.stopAllAnimations(g);let ne=i.getClip(g,M);ne.playing=!0,ne.loop=P??!1}function O(g,S){i.has(g)&&i.stopAllAnimations(g)}function x(g,S){let M=d.getMutableOrNull(g);if(M){let P=S.state;P=Ci(M,P)?P:Ya(M),M.currentValue=P,Pt(g).emit(Ke.ON_STATE_CHANGE)}}function u(g,S){if(S){let M=Pt(g),P=()=>M.emit(Ke.ON_TWEEN_END);switch(S.type){case fn.MOVE_ITEM:{b(g,S,P);break}case fn.ROTATE_ITEM:{h(g,S,P);break}case fn.SCALE_ITEM:{T(g,S,P);break}default:throw new Error(`Unknown tween type: ${S.type}`)}}}function b(g,S,M){let P=t.get(g),{duration:J,interpolationType:ne,relative:ie}=S,K=L.create(S.end.x,S.end.y,S.end.z),pe=ie?L.add(P.position,K):K;or.startTranslation(g,P.position,pe,J,ne,M)}function h(g,S,M){let P=t.get(g),{duration:J,interpolationType:ne,relative:ie}=S,K=Se.fromEulerDegrees(S.end.x,S.end.y,S.end.z),pe=ie?Se.multiply(P.rotation,K):K;or.startRotation(g,P.rotation,pe,J,ne,M)}function T(g,S,M){let P=t.get(g),{duration:J,interpolationType:ne,relative:ie}=S,K=L.create(S.end.x,S.end.y,S.end.z),pe=ie?L.add(P.scale,K):K;or.startScaling(g,P.scale,pe,J,ne,M)}function v(g,S){let M=l.getMutableOrNull(g);M&&(M.value=S.counter,Pt(g).emit(Ke.ON_COUNTER_CHANGE))}function j(g,S){let M=l.getMutableOrNull(g);M&&(M.value+=1,Pt(g).emit(Ke.ON_COUNTER_CHANGE))}function oe(g,S){let M=l.getMutableOrNull(g);M&&(M.value-=1,Pt(g).emit(Ke.ON_COUNTER_CHANGE))}function D(g,S){let{src:M,loop:P,volume:J}=S;r.createOrReplace(g,{audioClipUrl:M,loop:P,playing:!0,volume:J??1})}function V(g,S){let M=r.getMutableOrNull(g);M&&(M.playing=!1)}function $(g,S){let{visible:M,physicsCollider:P}=S;s.createOrReplace(g,{visible:M});let J=c.getMutableOrNull(g);J&&P!==void 0&&(J.invisibleMeshesCollisionMask=P?2:0)}function W(g,S){let{anchorPointId:M}=S;o.createOrReplace(g,{anchorPointId:M})}function Y(g,S){o.has(g)&&o.deleteFrom(g)}}function zp(e){let n=new Map,i=0;function t(r){let o=[],s=[];for(let[c,a]of n)a.accumulatedTime+=1e3*r,!(a.accumulatedTime<a.interval)&&(s.push(a.callback),a.recurrent?a.accumulatedTime-=Math.floor(a.accumulatedTime/a.interval)*a.interval:o.push(c));for(let c of o)n.delete(c);for(let c of s)c()}return e.addSystem(t,et.TimerSystemPriority),{setTimeout(r,o){let s=i++;return n.set(s,{callback:r,interval:o,recurrent:!1,accumulatedTime:0}),s},clearTimeout(r){n.delete(r)},setInterval(r,o){let s=i++;return n.set(s,{callback:r,interval:o,recurrent:!0,accumulatedTime:0}),s},clearInterval(r){n.delete(r)}}}var Za=zp(he);var Mo;(function(e){e[e.Off=0]="Off",e[e.On=1]="On"})(Mo||(Mo={}));function Bp(e,n){let i=e.defineComponent("dcl.utils.Toggle",{state:B.EnumNumber(Mo,Mo.Off)}),t=new Map;return n.setInterval(function(){for(let r of t.keys())(e.getEntityState(r)==Ve.Removed||!i.has(r))&&t.delete(r)},5e3),{addToggle(r,o,s){t.set(r,s),i.createOrReplace(r,{state:o})},removeToggle(r){t.delete(r),i.deleteFrom(r)},setCallback(r,o){t.set(r,o)},set(r,o){if(i.get(r).state!=o){i.getMutable(r).state=o;let c=t.get(r);c&&c(o)}},flip(r){this.set(r,1-i.get(r).state)},isOn(r){return i.get(r).state==Mo.On}}}var Pp=Bp(he,Za);function Up(e){let n=e.defineComponent("dcl.utils.PerpetualRotation",{velocity:B.Quaternion});function i(t){for(let[r,o]of e.getEntitiesWith(n,He)){let s=Se.slerp(Se.Identity(),o.velocity,t),c=He.getMutable(r);c.rotation=Se.normalize(Se.multiply(c.rotation,s))}}return e.addSystem(i,et.PerpetualMotionSystemPriority),{startRotation(t,r){n.createOrReplace(t,{velocity:r})},stopRotation(t){n.deleteFrom(t)}}}var Lp=Up(he);function Fp(e){let n=e.defineComponent("dcl.utils.FollowPath",{points:B.Array(B.Vector3),faceDirection:B.Boolean,speed:B.Number,normalizedTime:B.Number,currentIndex:B.Number,segmentTimes:B.Array(B.Number),curveSegmentCount:B.Number}),i=new Map,t=new Map;function r(c){i.delete(c),t.delete(c),n.deleteFrom(c)}function o(c){let a=[],d=[];for(let l of i.keys()){if(e.getEntityState(l)==Ve.Removed||!n.has(l)){r(l);continue}let w=He.getMutable(l),_=n.getMutable(l);for(_.normalizedTime=Ae.clamp(_.normalizedTime+c*_.speed,0,1),_.normalizedTime>=1&&a.push(l);_.normalizedTime>=_.segmentTimes[_.currentIndex]&&_.currentIndex<_.points.length-1;){if(_.faceDirection){let u=L.subtract(_.points[_.currentIndex+1],_.points[_.currentIndex]);w.rotation=Se.lookRotation(u)}if(_.currentIndex>0&&_.currentIndex%_.curveSegmentCount==0){let u=_.currentIndex/_.curveSegmentCount,b=_.points[_.currentIndex],h=_.points[_.currentIndex+_.curveSegmentCount];d.push({entity:l,index:u,coords:b,nextCoords:h})}_.currentIndex+=1}let O=_.segmentTimes[_.currentIndex]-_.segmentTimes[_.currentIndex-1],x=(_.segmentTimes[_.currentIndex]-_.normalizedTime)/O;w.position=L.lerp(_.points[_.currentIndex],_.points[_.currentIndex-1],x)}for(let l of d){let w=t.get(l.entity);w&&w(l.index,l.coords,l.nextCoords)}for(let l of a){let w=i.get(l);r(l),w&&w()}}e.addSystem(o,et.PathSystemPriority);function s(c,a,d,l,w,_,O){if(a.length<2)throw new Error("At least 2 points are required to form a path.");if(d==0)throw new Error("Path duration must not be zero");if(w){let h=L.equals(a[0],a[a.length-1]);h&&(a.pop(),a.unshift(a.pop())),a=Mu(a,w,h)}else w=1;i.set(c,_),t.set(c,O);let x=0,u=[];for(let h=0;h<a.length-1;h++){let T=L.distance(a[h],a[h+1]);x+=T,u.push(T)}let b=[0];for(let h=0;h<u.length;h++)b.push(u[h]/x+b[h]);n.createOrReplace(c,{points:a,segmentTimes:b,curveSegmentCount:w,speed:1/d,normalizedTime:0,currentIndex:0,faceDirection:l})}return{startStraightPath(c,a,d,l,w,_){return s(c,a,d,l,0,w,_)},startSmoothPath(c,a,d,l,w,_,O){if(l<2||!Number.isInteger(l))throw new Error(`segmentCount must be an integer that is greater than 2, got: ${l}`);return s(c,a,d,w,l,_,O)},stopPath(c){r(c)},getOnFinishCallback(c){if(!i.has(c))throw new Error(`Entity ${c} is not registered in triggers system`);return i.get(c)}}}var Dp=Fp(he);var Pi=1;var $t=255,pn=0;function Wp(e){let n=he.defineComponent("dcl.utils.Trigger",{active:B.Boolean,layerMask:B.Int,triggeredByMask:B.Int,areas:B.Array(B.OneOf({box:B.Map({position:B.Vector3,scale:B.Vector3}),sphere:B.Map({position:B.Vector3,radius:B.Number})})),debugColor:B.Color3}),i=new Map,t=new Map,r=!1,o=new Map,s=new Map;function c(x){if(x)for(let[u,b]of e.getEntitiesWith(n,He)){let h=s.get(u),T=b.areas.length;for(;h.length>T;)e.removeEntity(h.pop());for(;h.length<T;)h.push(e.addEntity());let v=tr(u),j=nr(u);for(let oe=0;oe<T;++oe){let D=b.areas[oe],V=h[oe],$;if(D.$case=="box")$=D.value.scale,Ii.setBox(V);else{let Y=D.value.radius;$={x:Y,y:Y,z:Y},Ii.setSphere(V)}He.createOrReplace(V,{position:L.add(v,L.rotate(D.value.position,j)),scale:$});let W=b.active?b.debugColor:Co.Black();Va.setPbrMaterial(V,{albedoColor:Ln.fromInts(255*W.r,255*W.g,255*W.b,75)})}}}function a(x,u,b,h){for(let T=0;T<u.areas.length;++T){let v=x[T],j=u.areas[T];if(j.$case=="box"){let oe=j.value,D=L.subtract(v,L.scale(oe.scale,.5)),V=L.add(D,oe.scale);for(let $=0;$<h.areas.length;++$){let W=b[$],Y=h.areas[$];if(Y.$case=="box"){let g=Y.value,S=L.subtract(W,L.scale(g.scale,.5)),M=L.add(S,g.scale);if(vu(D,V,S,M))return!0}else if(Ja(D,V,W,Y.value.radius))return!0}}else{let oe=j.value.radius;for(let D=0;D<h.areas.length;++D){let V=b[D],$=h.areas[D];if($.$case=="box"){let W=$.value,Y=L.subtract(V,L.scale(W.scale,.5)),g=L.add(Y,W.scale);if(Ja(Y,g,v,oe))return!0}else if(zu(v,oe,V,$.value.radius))return!0}}}return!1}function d(x,u){let b=new Set,h=n.get(x);if(!h.active)return b;for(let[T,v]of e.getEntitiesWith(n,He)){if(T==x||!v.active||!(h.triggeredByMask&v.layerMask))continue;a(u.get(x),h,u.get(T),v)&&b.add(T)}return b}function l(){let x=[],u=[],b=new Map;for(let h of o.keys()){if(e.getEntityState(h)==Ve.Removed||!n.has(h)){for(let D of s.get(h))e.removeEntity(D);for(let D of o.values())D.has(h)&&D.delete(h);s.delete(h),o.delete(h),i.delete(h),t.delete(h);continue}let T=[],v=tr(h),j=nr(h),oe=n.get(h);for(let D of oe.areas)T.push(L.add(v,L.rotate(D.value.position,j)));b.set(h,T)}for(let h of o.keys()){let T=d(h,b),v=o.get(h);for(let j of v)T.has(j)||u.push([h,j]);for(let j of T)v.has(j)||x.push([h,j]);o.set(h,T)}for(let[h,T]of x){let v=i.get(h);v&&v(T)}for(let[h,T]of u){let v=t.get(h);v&&v(T)}}function w(x){l(),c(r)}e.addSystem(w,et.TriggerSystemPriority);function _(x){x||(x=[{type:"box"}]);let u=[];for(let b of x)b.type=="box"?u.push({$case:"box",value:{position:b.position?b.position:L.Zero(),scale:b.scale?b.scale:L.One()}}):u.push({$case:"sphere",value:{position:b.position?b.position:L.Zero(),radius:b.radius?b.radius:1}});return u}let O={addTrigger(x,u=pn,b=pn,h,T,v,j){if(u<0||u>$t||!Number.isInteger(u))throw new Error(`Bad layerMask: ${u}. Expected a non-negative integer no greater than ${$t}`);if(b<0||b>$t||!Number.isInteger(b))throw new Error(`Bad triggeredByMask: ${b}. Expected a non-negative integer no greater than ${$t}`);s.set(x,[]),o.set(x,new Set),i.set(x,T),t.set(x,v),n.createOrReplace(x,{active:!0,layerMask:u,triggeredByMask:b,areas:_(h),debugColor:j||Co.Red()})},removeTrigger(x){let u=o.get(x),b=t.get(x);for(let T of s.get(x))e.removeEntity(T);s.delete(x),o.delete(x),i.delete(x),t.delete(x),n.deleteFrom(x);let h=[];for(let[T,v]of o)v.has(x)&&(v.delete(x),h.push(T));if(b)for(let T of u)b(T);for(let T of h){let v=t.get(T);v&&v(x)}},oneTimeTrigger(x,u=pn,b=pn,h,T,v){this.addTrigger(x,u,b,h,function(j){Ui.removeTrigger(x),T&&T(j)},void 0,v)},enableTrigger(x,u){n.getMutable(x).active=u},isTriggerEnabled(x){return n.get(x).active},getLayerMask(x){return n.get(x).layerMask},setLayerMask(x,u){if(u<0||u>$t||!Number.isInteger(u))throw new Error(`Bad layerMask: ${u}. Expected a non-negative integer no greater than ${$t}`);n.getMutable(x).layerMask=u},getTriggeredByMask(x){return n.get(x).triggeredByMask},setTriggeredByMask(x,u){if(u<0||u>$t||!Number.isInteger(u))throw new Error(`Bad layerMask: ${u}. Expected a non-negative integer no greater than ${$t}`);n.getMutable(x).triggeredByMask=u},getAreas(x){return n.get(x).areas},setAreas(x,u){n.getMutable(x).areas=_(u)},setOnEnterCallback(x,u){i.set(x,u)},setOnExitCallback(x,u){t.set(x,u)},enableDebugDraw(x){if(r=x,!x)for(let u of s.values()){for(let b of u)e.removeEntity(b);u.length=0}},isDebugDrawEnabled(){return r}};return O.addTrigger(e.PlayerEntity,Pi,pn,[{type:"box",scale:{x:.65,y:1.92,z:.65},position:{x:0,y:.15,z:0}}],void 0,void 0,Co.Green()),O}var Ui=Wp(he);var Xa;(function(e){class n{constructor(l,w,_){this.beginSequenceNode=null,this.currentSequenceNode=null,this.running=!1,this.started=!1,this.engine=l,this.systemFn=O=>{this.update(O)},this.engine.addSystem(this.systemFn,et.ActionSystemPriority),w&&this.startSequence(w),_&&this.setOnFinishCallback(_)}startSequence(l){this.beginSequenceNode=l.beginSequenceNode,this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1}destroy(){this.engine.removeSystem(this.systemFn)}setOnFinishCallback(l){this.onFinishCallback=l}isRunning(){return this.running}stop(){this.running=!1}resume(){this.beginSequenceNode!=null&&(this.running=!0)}reset(){this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1}getRunningAction(){let l=this.currentSequenceNode;if(this.currentSequenceNode instanceof r)do l=l.currentInnerSequence;while(l instanceof r);return l.action}update(l){if(this.running){if(!this.started){this.currentSequenceNode.onStart(),this.started=!0;return}if(!this.currentSequenceNode.hasFinish()){this.currentSequenceNode.update(l);return}this.currentSequenceNode.onFinish(),this.currentSequenceNode=this.currentSequenceNode.next,this.currentSequenceNode?this.currentSequenceNode.onStart():(this.running=!1,this.onFinishCallback&&this.onFinishCallback())}}}e.SequenceRunner=n;class i{constructor(){this.currentSequenceNode=null,this.beginSequenceNode=null,this.whileNodeStack=[]}then(l){if(this.currentSequenceNode==null)this.currentSequenceNode=new t,this.currentSequenceNode.action=l,this.beginSequenceNode=this.currentSequenceNode;else{let w=new t;w.action=l,this.currentSequenceNode=this.currentSequenceNode.then(w)}return this}if(l){let w=new o(l);return this.currentSequenceNode==null?(this.currentSequenceNode=w,this.beginSequenceNode=w):this.currentSequenceNode=this.currentSequenceNode.then(w),this}else(){let l=this.currentSequenceNode.getSequence();if(l instanceof o){l.closed=!0;let w=new s(l);this.currentSequenceNode=this.currentSequenceNode.then(w)}else throw new Error("IF statement is needed to be called before ELSE statement.");return this}endIf(){let l=this.currentSequenceNode.getSequence();if(l instanceof o||l instanceof s)l.closed=!0;else throw new Error("IF statement is needed to be called before ENDIF statement.");return this}while(l){let w=new c(l);return this.currentSequenceNode==null?(this.currentSequenceNode=w,this.beginSequenceNode=w):this.currentSequenceNode=this.currentSequenceNode.then(w),this.whileNodeStack.push(w),this}endWhile(){let l=this.currentSequenceNode.getSequence();if(l instanceof c)l.closed=!0,this.whileNodeStack.length>0&&this.whileNodeStack.splice(this.whileNodeStack.length-1,1);else throw new Error("WHILE statement is needed to be called before ENDWHILE statement.");return this}breakWhile(){if(this.whileNodeStack.length>0)this.currentSequenceNode=this.currentSequenceNode.then(new a(this.whileNodeStack[this.whileNodeStack.length-1]));else throw new Error("WHILE statement is needed to be called before BREAKWHILE statement.");return this}}e.SequenceBuilder=i;class t{constructor(){this.action=null,this.next=null}then(l){return this.next=l,l}onStart(){this.action&&this.action.onStart()}update(l){this.action&&this.action.update(l)}onFinish(){this.action&&this.action.onFinish()}hasFinish(){return this.action?this.action.hasFinished:!0}getSequence(){return this}}e.SequenceNode=t;class r extends t{constructor(){super(...arguments),this.currentInnerSequence=null,this.startingInnerSequence=null,this.closed=!1}then(l){if(this.currentInnerSequence==null)this.currentInnerSequence=l,this.startingInnerSequence=l;else{if(this.closed)return this.next=l,l;this.currentInnerSequence=this.currentInnerSequence.then(l)}return this}onStart(){this.currentInnerSequence=this.startingInnerSequence,this.currentInnerSequence&&this.currentInnerSequence.onStart()}update(l){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(l))}onFinish(){this.currentInnerSequence&&this.currentInnerSequence.onFinish()}hasFinish(){return this.currentInnerSequence==null}getSequence(){if(this.currentInnerSequence){let l=this.currentInnerSequence.getSequence();if(l instanceof r&&!l.closed)return l}return this}}class o extends r{constructor(l){super(),this.result=!1,this.condition=l}onStart(){this.result=this.condition(),this.result?super.onStart():this.currentInnerSequence=null}}class s extends r{constructor(l){super(),this.ifSequence=null,this.ifSequence=l}onStart(){this.ifSequence&&!this.ifSequence.result?super.onStart():this.currentInnerSequence=null}}class c extends r{constructor(l){super(),this.breakWhile=!1,this.condition=l}onStart(){this.breakWhile=!1,this.condition()?super.onStart():this.currentInnerSequence=null}update(l){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,this.currentInnerSequence==null&&(this.currentInnerSequence=this.startingInnerSequence),this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(l))}hasFinish(){return this.breakWhile||!this.condition()}}class a extends t{constructor(l){super(),this.whileNode=l}onStart(){this.whileNode.breakWhile=!0}}})(Xa||(Xa={}));var Uu=new Set,Ka=[];function Lu(e,n){let{Actions:i,States:t,Counter:r,Triggers:o}=vi(e);return function(u){for(;Ka.length>0;){let{entity:h,action:T}=Ka.shift();Oi(h).emit(T.name,at(T))}let b=e.getEntitiesWith(o);for(let[h,T]of b){if(Uu.has(h))continue;let v=T.value.reduce((oe,D)=>oe.add(D.type),new Set);for(let oe of v)switch(oe){case Ke.ON_CLICK:{_(h);break}case Ke.ON_PLAYER_ENTERS_AREA:case Ke.ON_PLAYER_LEAVES_AREA:{O(h);break}}let j=Pt(h);for(let oe of T.value)j.on(oe.type,()=>{if(c(oe)){for(let D of oe.actions)if(s(D)){let V=l(D);if(V){let $=i.getOrNull(V);if($){let W=$.value.find(Y=>Y.name===D.name);W&&Ka.push({entity:V,action:W})}}}}});j.emit(Ke.ON_SPAWN),Uu.add(h)}};function s(x){let{id:u,name:b}=x;return!!u&&!!b}function c(x){if(x.conditions&&x.conditions.length>0){let u=x.conditions.map(a),b=T=>!!T;switch(x.operation||un.AND){case un.AND:return u.every(b);case un.OR:return u.some(b)}}return!0}function a(x){let u=w(x);if(u)try{switch(x.type){case ct.WHEN_STATE_IS:{let b=t.getOrNull(u);if(b!==null)return qa(b)===x.value;break}case ct.WHEN_STATE_IS_NOT:{let b=t.getOrNull(u);if(b!==null)return qa(b)!==x.value;break}case ct.WHEN_COUNTER_EQUALS:{let b=r.getOrNull(u);if(b!==null){let h=Number(x.value);if(!isNaN(h))return b.value===h}break}case ct.WHEN_COUNTER_IS_GREATER_THAN:{let b=r.getOrNull(u);if(b!==null){let h=Number(x.value);if(!isNaN(h))return b.value>h}break}case ct.WHEN_COUNTER_IS_LESS_THAN:{let b=r.getOrNull(u);if(b!==null){let h=Number(x.value);if(!isNaN(h))return b.value<h}break}}}catch{console.error("Error in condition",x)}return!1}function d(x,u){let b=e.getComponent(x),T=Array.from(e.getEntitiesWith(b)).find(([v,j])=>j.id===u);return Array.isArray(T)&&T.length>0?T[0]:null}function l(x){if(x.id){let u=d(je.ACTIONS,x.id);if(u)return u}return null}function w(x){let u=Object.values(je).map(b=>({componentName:b,conditionTypes:Ou(b)})).reduce((b,{componentName:h,conditionTypes:T})=>T.includes(x.type)?h:b,null);if(u&&x.id){let b=d(u,x.id);if(b)return b}return null}function _(x){n.onPointerDown({entity:x,opts:{button:0,hoverText:"Click"}},()=>{Pt(x).emit(Ke.ON_CLICK)})}function O(x){Ui.addTrigger(x,pn,Pi,[{type:"box"}],()=>{Pt(x).emit(Ke.ON_PLAYER_ENTERS_AREA)},()=>{Pt(x).emit(Ke.ON_PLAYER_LEAVES_AREA)})}}function Fu(e,n,i){let t=e,r=n;try{Nu(t),t.addSystem(Pu(t,i)),t.addSystem(Lu(t,r)),Iu(t)}catch(o){console.error(`Error initializing Asset Packs: ${o.message}`)}}function Du(){let e=he.addEntity();Ri.create(e,{src:"models/NewAntrom2x2.glb",invisibleMeshesCollisionMask:Pr.CL_PHYSICS}),He.create(e,{position:L.create(16,-1,16),rotation:Se.create(0,1,0,0),scale:L.create(1,1,1)})}Fu(he,La,{Animator:ku,AudioSource:Fa,AvatarAttach:du,Transform:He,VisibilityComponent:lu,GltfContainer:Ri});function Li(){Du()}var vo=require("~system/EngineApi");function Wu(e){async function n(t){let r=await e.crdtSendToRenderer({data:new Uint8Array(t)});if(r&&r.data&&r.data.length&&i.onmessage)for(let o of r.data)i.onmessage(o)}let i={async send(t){try{await n(t)}catch(r){console.error(r);debugger}},filter(t){return t.componentId>Ca?!1:!!t}};return i}var Qa=class{constructor(n,i=!1,t,r){this.initalize(n,i,t,r)}initalize(n,i=!1,t,r){return this.mask=n,this.skipNextObservers=i,this.target=t,this.currentTarget=r,this}},ec=class{constructor(n,i,t=null){this.callback=n,this.mask=i,this.scope=t,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1}},lt=class e{constructor(n){this._observers=new Array,this._onObserverAdded=null,this._eventState=new Qa(0),n&&(this._onObserverAdded=n)}add(n,i=-1,t=!1,r=null,o=!1){if(!n)return null;let s=new ec(n,i,r);return s.unregisterOnNextCall=o,t?this._observers.unshift(s):this._observers.push(s),this._onObserverAdded&&this._onObserverAdded(s),s}addOnce(n){return this.add(n,void 0,void 0,void 0,!0)}remove(n){return n&&this._observers.indexOf(n)!==-1?(this._deferUnregister(n),!0):!1}removeCallback(n,i){for(let t=0;t<this._observers.length;t++)if(this._observers[t].callback===n&&(!i||i===this._observers[t].scope))return this._deferUnregister(this._observers[t]),!0;return!1}notifyObservers(n,i=-1,t,r){if(!this._observers.length)return!0;let o=this._eventState;o.mask=i,o.target=t,o.currentTarget=r,o.skipNextObservers=!1,o.lastReturnValue=n;for(let s of this._observers)if(!s._willBeUnregistered&&(s.mask&i&&(s.scope?o.lastReturnValue=s.callback.apply(s.scope,[n,o]):o.lastReturnValue=s.callback(n,o),s.unregisterOnNextCall&&this._deferUnregister(s)),o.skipNextObservers))return!1;return!0}notifyObserversWithPromise(n,i=-1,t,r){let o=Promise.resolve(n);if(!this._observers.length)return o;let s=this._eventState;return s.mask=i,s.target=t,s.currentTarget=r,s.skipNextObservers=!1,this._observers.forEach(c=>{s.skipNextObservers||c._willBeUnregistered||c.mask&i&&(c.scope?o=o.then(a=>(s.lastReturnValue=a,c.callback.apply(c.scope,[n,s]))):o=o.then(a=>(s.lastReturnValue=a,c.callback(n,s))),c.unregisterOnNextCall&&this._deferUnregister(c))}),o.then(()=>n)}notifyObserver(n,i,t=-1){let r=this._eventState;r.mask=t,r.skipNextObservers=!1,n.callback(i,r)}hasObservers(){return this._observers.length>0}clear(){this._observers=new Array,this._onObserverAdded=null}clone(){let n=new e;return n._observers=this._observers.slice(0),n}hasSpecificMask(n=-1){for(let i of this._observers)if(i.mask&n||i.mask===n)return!0;return!1}_deferUnregister(n){n.unregisterOnNextCall=!1,n._willBeUnregistered=!0,Promise.resolve().then.bind(Promise.resolve())(async()=>this._remove(n)).catch(console.error)}_remove(n){if(!n)return!1;let i=this._observers.indexOf(n);return i!==-1?(this._observers.splice(i,1),!0):!1}};var Vu=require("~system/EngineApi"),Hp=Vu.subscribe;function Lt(e){return()=>{Hp({eventId:e}).catch(console.error)}}var Gp=new lt(Lt("onEnterScene"));var jp=new lt(Lt("onLeaveScene"));var qp=new lt(Lt("sceneStart")),Yp=new lt(Lt("playerExpression")),$p=new lt(Lt("videoEvent")),Jp=new lt(Lt("profileChanged")),Zp=new lt(Lt("playerConnected")),Xp=new lt(Lt("playerDisconnected")),Kp=new lt(Lt("onRealmChanged")),Qp=new lt(Lt("playerClicked")),em=new lt(Lt("comms"));async function Hu(e){let{events:n}=await e({actions:[]});for(let i of n)if(i.generic){let t=JSON.parse(i.generic.eventData);switch(i.generic.eventId){case"onEnterScene":{Gp.notifyObservers(t);break}case"onLeaveScene":{jp.notifyObservers(t);break}case"sceneStart":{qp.notifyObservers(t);break}case"playerExpression":{Yp.notifyObservers(t);break}case"videoEvent":{let r=t;$p.notifyObservers(r);break}case"profileChanged":{Jp.notifyObservers(t);break}case"playerConnected":{Zp.notifyObservers(t);break}case"playerDisconnected":{Xp.notifyObservers(t);break}case"onRealmChanged":{Kp.notifyObservers(t);break}case"playerClicked":{Qp.notifyObservers(t);break}case"comms":{em.notifyObservers(t);break}}}}var tc={"assetsscenemain.composite":{version:1,components:[{name:"core::Transform",jsonSchema:{type:"object",properties:{position:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}},scale:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}},rotation:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"},w:{type:"number"}}},parent:{type:"integer"}},serializationType:"transform"},data:{512:{json:{position:{x:8,y:1,z:8},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0,w:1},parent:0}}}},{name:"core::MeshRenderer",jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBMeshRenderer"},data:{512:{json:{mesh:{$case:"box",box:{uvs:[]}}}}}},{name:"core-schema::Name",jsonSchema:{type:"object",properties:{value:{type:"string",serializationType:"utf8-string"}},serializationType:"map"},data:{512:{json:{value:"Magic Cube"}}}},{name:"inspector::Scene",jsonSchema:{type:"object",properties:{layout:{type:"object",properties:{base:{type:"object",properties:{x:{type:"integer",serializationType:"int32"},y:{type:"integer",serializationType:"int32"}},serializationType:"map"},parcels:{type:"array",items:{type:"object",properties:{x:{type:"integer",serializationType:"int32"},y:{type:"integer",serializationType:"int32"}},serializationType:"map"},serializationType:"array"}},serializationType:"map"}},serializationType:"map"},data:{0:{json:{layout:{base:{x:0,y:0},parcels:[{x:0,y:0}]}}}}},{name:"inspector::Nodes",jsonSchema:{type:"object",properties:{value:{type:"array",items:{type:"object",properties:{entity:{type:"integer",serializationType:"entity"},open:{type:"boolean",serializationType:"optional",optionalJsonSchema:{type:"boolean",serializationType:"boolean"}},children:{type:"array",items:{type:"integer",serializationType:"entity"},serializationType:"array"}},serializationType:"map"},serializationType:"array"}},serializationType:"map"},data:{0:{json:{value:[{entity:512,children:[513],open:!0},{entity:513,children:[]}]}}}},{name:"cube-id",jsonSchema:{type:"object",properties:{},serializationType:"map"},data:{512:{json:{}}}}]}};var Fi=[],nc={getCompositeOrNull(e,n){let i=tc[e];if(i){try{if(i instanceof Uint8Array){let t=sn.fromBinary(i);Fi.push({src:e,composite:t})}else if(typeof i=="string"){let t=sn.fromJson(JSON.parse(i));Fi.push({src:e,composite:t})}else if(typeof i=="object"){let t=sn.fromJson(i);Fi.push({src:e,composite:t})}}catch(t){console.error(t)}delete tc[e]}return Fi.find(t=>t.src===e)||null}};var Di=Wu({crdtSendToRenderer:vo.crdtSendToRenderer});he.addTransport(Di);async function tm(e){he.seal(),await he.update(e),await Hu(vo.sendBatch)}async function nm(){let e=await(0,vo.crdtGetState)({data:new Uint8Array});if(!e.hasEntities){let n=nc.getCompositeOrNull("main.composite");if(n)try{sn.instance(he,n,nc)}catch(i){console.log("Warning: main.composite couldn't be instanced."),console.error(i)}}if(Di.onmessage&&e&&e.data&&e.data.length)for(let n of e.data)Di.onmessage(n)}if(Li!==void 0){let e=function(){let n=Li();n&&typeof n=="object"&&typeof n.then=="function"&&n.catch(console.error),he.removeSystem(e)};he.addSystem(e,1/0)}
/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
